<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales &#8211; Racó Tècnic</title>
<meta name="description" content="Punt de trobada de coneixements">
<meta name="keywords" content="PHP, MySQL, Apache, Apache2, fastCGI">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="//elboletaire.github.io/racotecnic/images/">
<meta name="twitter:title" content="Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales">
<meta name="twitter:description" content="Punt de trobada de coneixements">
<meta name="twitter:creator" content="@racotecnic">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales">
<meta property="og:description" content="Punt de trobada de coneixements">
<meta property="og:url" content="//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/">
<meta property="og:site_name" content="Racó Tècnic">





<link rel="canonical" href="//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/">
<link href="//elboletaire.github.io/racotecnic/feed.xml" type="application/atom+xml" rel="alternate" title="Racó Tècnic Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="//elboletaire.github.io/racotecnic/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="//elboletaire.github.io/racotecnic/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="//elboletaire.github.io/racotecnic/images/" alt="Racó Tècnic photo" class="author-photo">
					<h4>Racó Tècnic</h4>
					<p>A subproject from <a href="http://underave.net">underave.net</a> created by <a href="https://github.com/elboletaire">elboletaire</a> and maintained by many collaborators.</p>
				</li>
				<li><a href="//elboletaire.github.io/racotecnic/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:elboletaire@underave.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/racotecnic"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/racotecnic"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/elboletaire/racotecnic"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="//elboletaire.github.io/racotecnic/posts/">All Posts</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/tags/">All Tags</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/categories/">All Categories</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="https://github.com/elboletaire/racotecnic" target="_blank">Github</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry no-line-numbers">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/" rel="bookmark" title="Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales">Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2015-03-16T23:50:52+01:00">March 16, 2015</time></span></h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~17 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>En esta guía os explicaré cómo <strong>realizar la instalación de un servidor Windows Apache + MySQL + PHP (WAMP) con múltiples versiones de PHP</strong> para distintos servidores virtuales.</p>

<p>En realidad me centraré en la configuración tanto de Apache como de PHP para que tengáis todo funcionando como es debido, de aquí que diga lo de “a pelo”.</p>

<p>Instalaréis todo a partir de las páginas oficiales, tal como, creo, debería de ser siempre (y dejarse estar de mierdas prefabricadas).</p>

<p>Antes de empezar quiero dejar claro que ni soy de Microsoft, ni de Apache, ni de MySQL, ni de PHP; así que si tenéis algún problema no soy la persona a quién deberéis preguntar.</p>

<p>La metodología que explicaré a continuación la he utilizado anteriormente con éxito en múltiples máquinas y en varios sistemas operativos además de la instalación que realizo en una máquina virtual mientras os explico este tutorial paso por paso.</p>

<p>El proceso lo voy a realizar desde Windows 7 x64, pero como he dicho lo he tenido funcionando en varios sistemas operativos sin problemas:</p>

<ul>
  <li>Windows XP x86</li>
  <li>Windows 7 x64 y x86</li>
  <li>Windows 8 x64</li>
  <li>Windows 8.1 x64</li>
  <li>Windows 10 x64</li>
</ul>

<p>Como podéis ver, en la versión 32 bits de windows 8 no lo he probado pero, como digo, debería funcionar (me pregunto quién corre un Win8 a 32 bits).</p>

<p>En cuanto a las versiones de software, yo personalmente recuerdo haber probado, al menos:</p>

<ul>
  <li>Apache 2.0, 2.2 y 2.4</li>
  <li>MySQL 5.5</li>
  <li>PHP 5.3, 5.4, 5.5, 5.6 y 7</li>
</ul>

<p>De hecho yo en mi ordenador tengo todas esas versiones de PHP instaladas pero, por motivos obvios, en este tutorial voy a utilizar la última versión de apache y las dos últimas versiones de PHP (el mínimo necesario para poder enseñaros cómo configurar múltiples versiones por virtualhost).</p>

<p>Todo ello utilizando las versiones de 64 bits, pero procuraré poneros los enlaces actuales para las versiones de 32 bits.</p>
<blockquote>
Antes de empezar es importantísimo que comprobéis que tenéis todas las actualizaciones del sistema al día. Especialmente interesa tener <em>.NET Framework</em> instalado y actualizado para poder correr cualquiera de las aplicaciones que vamos a instalar. En mi caso la última actualización fue .NET Framework 4.5.2.</blockquote>

<p><a id="more"></a><a id="more-2326"></a></p>

<h2 id="estructura-de-la-instalación"><a id="user-content-estructura-de-la-instalación" class="anchor" href="#estructura-de-la-instalaci%C3%B3n"></a>Estructura de la instalación</h2>

<p>Podéis escoger instalar cada cosa donde os dé la gana, pero procurad tenerlo en cuenta a la hora de configurar cada cosa.</p>

<p>Para hacer las cosas sencillas y por tenerlo todo ordenado yo siempre he seguido esta estructura de directorios:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>C:\httpd\apache -&gt; Apache 2.4
C:\httpd\phpXX  -&gt; Cada una de las versiones de PHP
C:\httpd\www    -&gt; Directorio raíz de todos mis proyectos en desarrollo
</pre></td></tr></tbody></table>
</div>
</div>

<p>MySQL dejo que se instale donde quiera ya que no me preocupa tener copia de sus ficheros. Evidentemente hago copia de seguridad de las bases de datos pero no es el tema que nos concierne ahora.</p>

<h2 id="instalando-apache"><a id="user-content-instalando-apache" class="anchor" href="#instalando-apache"></a>Instalando Apache</h2>

<p>Desde hace relativamente poco la descarga de binarios de Apache ya no se realiza desde el sitio oficial. En su lugar ellos mismos te recomiendan varios sites alternativos desde los que efectuar la descarga.</p>

<p>Podéis ver esto <a href="http://ftp.cixug.es/apache//httpd/binaries/win32/">desde cualquiera de los mirrors de descarga de apache, bajo <code class="highlighter-rouge">binaries/win32</code></a>.</p>

<p>Yo personalmente recomiendo <a href="http://www.apachelounge.com/">ApacheLounge</a> y os guiaré para descargar desde ahí los ficheros.</p>

<p>Os guiaré, pero de todos modos pondré los enlaces directos a los ficheros que yo he utilizado (no os lo recomiendo ya que sacan versiones nuevas constantemente).</p>

<p>Entrad en ApacheLounge y seguid estos pasos para descargar todo lo necesario:</p>

<ul>
  <li>Id a <a href="http://www.apachelounge.com/download/">descargas</a>. En la barra lateral veréis que pone "VC11" y "VC10", eso es la versión necesaria del compilador de Visual C++ proporcionado por Microsoft.</li>
  <li>Descargad la versión que os interese de Apache, en mi caso descargo la versión <a href="http://www.apachelounge.com/download/VC11/binaries/httpd-2.4.12-win64-VC11.zip">2.4.12 Win64 desde VC11</a>.</li>
  <li>Dependiendo de la versión que hayáis descargado tenéis que descargar el compilador de C++. Veréis que está enlazado cerca de la misma descarga de Apache. En mi caso descargo <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30679">VC11 vcredist_x64/86.exe</a> asegurándome de marcar la casilla `VSU_4\vcredist_x64.exe` ya que estoy descargando para 64 bits.</li>
  <li>Descargad también el módulo de apache `mod_fcgid`. En el caso de Apache 2.4 los módulos vienen todos en un mismo zip así que en mi caso descargo <a href="http://www.apachelounge.com/download/VC11/modules/modules-2.4-win64-VC11.zip">modules-2.4-win64-VC11.zip</a>.</li>
</ul>

<p>Ahora que ya tenemos todo lo necesario en cuanto a Apache se refiere, procederemos a instalarlo.</p>

<p>Instalad primero VC10 (u 11) ya que es requisito indispensable para que Apache funcione.</p>

<p>Una vez instalado, descomprimid Apache y movedlo donde lo queráis instalar. En mi caso descomprimo apache en <code class="highlighter-rouge">C:\httpd\apache</code> de modo que accediendo a dicho directorio me queda el contenido del .zip (múltiples directorios y ficheros, entre ellos <code class="highlighter-rouge">INSTALL.txt</code> con detalles sobre cómo instalar Apache).</p>

<p>Como en mi caso no quiero utilizar el directorio <code class="highlighter-rouge">htdocs</code> que viene dentro del directorio de apache creo ahora el directorio <code class="highlighter-rouge">C:\httpd\www</code>.</p>

<p>Descomprimid también el módulo <code class="highlighter-rouge">mod_fcgid</code>. Os interesa únicamente el fichero <code class="highlighter-rouge">mod_fcgid.so</code> que desplazaréis dentro del directorio <code class="highlighter-rouge">modules</code> del directorio raíz de apache, en mi caso <code class="highlighter-rouge">C:\httpd\apache\modules</code> quedando <code class="highlighter-rouge">C:\httpd\apache\modules\mod_fcgid.so</code> listo para ser cargado por apache.</p>

<p>Hecho esto necesitáis configurar Apache para indicarle el directorio donde lo habéis ubicado. Para ello abrid el fichero <code class="highlighter-rouge">C:\httpd\apache\conf\httpd.conf</code> con el bloc de notas (o con vuestro editor de código favorito) —huelga decir que editar ese fichero con Word o WordPad sería una idiotez.</p>

<p>Cerca de la línea 37 encontraréis:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ServerRoot "C:/Apache24"
</pre></td></tr></tbody></table>
</div>
</div>

<p>Debéis cambiarlo a vuestra ubicación que siguiendo esta guía sería:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ServerRoot "C:/httpd/apache"
</pre></td></tr></tbody></table>
</div>
</div>

<p>Para ir más rápido, buscad todas las coincidencias en el documento de <code class="highlighter-rouge">C:/Apache24</code> y reemplazadlas con vuestra ubicación de instalación. Esto debería de reemplazar varias cosas como el <code class="highlighter-rouge">DocumentRoot</code> o la ubicación de los <code class="highlighter-rouge">cgi-bin</code>.</p>

<p>Dado que, en mi caso, el <code class="highlighter-rouge">DocumentRoot</code> lo quiero en otra ubicación, lo cambio en los dos sitios donde requiere (líneas 242 y 243 aproximadamente) a <code class="highlighter-rouge">C:\httpd\www</code>.</p>

<p>En esa misma configuración de <code class="highlighter-rouge">Directory</code> (cerca de la línea 243) debéis aseguraros de que se pueden ejecutar scripts cgi, dado que utilizaréis fastcgi para ejecutar PHP. Para ello debéis añadir <code class="highlighter-rouge">ExecCGI</code> detrás de las opciones, quedando esa línea así:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>Options Indexes FollowSymlinks ExecCGI
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ahora, cerca de la línea 176, cuando terminan de cargar todos los módulos debéis añadir el módulo <code class="highlighter-rouge">mod_fcgid</code> tal que así:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>LoadModule fcgid_module modules/mod_fcgid.so
</pre></td></tr></tbody></table>
</div>
</div>

<p>También sería un buen momento para que revisárais qué módulos de los que hay comentados os interesa tener habilitados para descomentarlos (como el típico <code class="highlighter-rouge">mod_rewrite</code>).</p>

<p>Para avanzar faena, cambiad <code class="highlighter-rouge">DirectoryIndex</code> para que coja ficheros php por defecto:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>DirectoryIndex index.php index.html index.htm
</pre></td></tr></tbody></table>
</div>
</div>

<p>Al final de todo del documento añadid las siguientes líneas:</p>

<div class="language-conf highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="c"># 200MB of file upload limit
</span><span class="n">FcgidMaxRequestLen</span> <span class="m">209715200</span>
<span class="c"># Set minimum timeouts
</span><span class="n">FcgidConnectTimeout</span> <span class="m">240</span>
<span class="n">FcgidIOTimeout</span> <span class="m">240</span>
<span class="n">FcgidBusyScanInterval</span> <span class="m">240</span>
<span class="n">FcgidBusyTimeout</span> <span class="m">240</span>

<span class="c"># Set PHP 5.6 as default php-cgi executable
# AddHandler fcgid-script .php
# FcgidInitialEnv PHPRC "C:/httpd/php56"
# FcgidWrapper "C:/httpd/php56/php-cgi.exe" .php
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>El último trozo está comentado a propósito, ya que instalaremos y probaremos Apache antes de instalar PHP.</p>

<p>Ya lo tenéis todo listo, guardad el documento e id a ejecutar Apache. Para ello abrid un terminal (cmd o PowerShell, tanto da) y ejecutad lo siguiente:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>cd C:\httpd\apache\bin
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ahora que estáis en el directorio de ejecutables de Apache ejecutadlo para ver si arranca:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>.\httpd.exe
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>Ojo! Algunas aplicaciones como Skype utilizan el puerto 80 si ven que no está
ocupado. Por ello es recomendable que cerréis cualquier aplicación que tengáis
corriendo antes de ejecutar Apache. Si no lo hacéis simplemente os saltará un
error indicando que dicho puerto está ocupado.</p>
</blockquote>

<p>Si todo ha ido bien únicamente os aparecerá una alerta indicando que no se ha
indicado un <code class="highlighter-rouge">ServerName</code>. Sino os mostrará claramente el error y deberéis de
arreglarlo. En mi caso mientras hacía este tutorial olvidé crear el directorio
<code class="highlighter-rouge">www</code> y me saltó este error:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>Syntax error on line 243 of C:/httpd/apache/conf/httpd.conf:
DocumentRoot must be a directory
</pre></td></tr></tbody></table>
</div>
</div>

<p>Utilizando vuestro navegador podéis acceder a <a href="http://localhost">http://localhost</a> y comprobar que el servidor funciona correctamente.</p>

<p>Perfecto, pero no hemos instalado Apache. Sólo hemos comprobado que funcionaba correctamente antes de instalarlo.</p>

<p>Para instalarlo debéis ejecutar un terminal con derechos de administrador. Una vez abierta y habiendo accedido a <code class="highlighter-rouge">C:\httpd\apache\bin</code> ejecutad:</p>

<pre><code class="language-bat">.\httpd.exe -k install
</code></pre>

<p>Para hacer que <code class="highlighter-rouge">ApacheMonitor</code> se ejecute cuando arranquéis el ordenador únicamente tenéis que crearle un acceso directo en la sección <code class="highlighter-rouge">Inicio</code> del menú Inicio (un poco redundante, sí).</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2015/03/apache_monitor.png"><img src="//elboletaire.github.io/racotecnic/uploads/2015/03/apache_monitor.png" alt="En català no és pas tant redundant, oi?" width="233" height="77" class="aligncenter size-full wp-image-2334" /></a></p>

<p>Hecho. Si os da el gusanillo reiniciad el ordenador y acceded de nuevo a <a href="http://localhost">http://localhost</a> para comprobar que todo sigue funcionando OK.</p>

<h2 id="instalando-php"><a id="user-content-instalando-php" class="anchor" href="#instalando-php"></a>Instalando PHP</h2>

<p>Id a la <a href="http://windows.php.net/download/">página de descargas de PHP para windows</a> y descargad todas las versiones de PHP que queráis tener instaladas.</p>

<p>Al descargarlas únicamente debéis tener en cuenta la arquitectura que estéis instalando (en mi caso x64) y que <strong>Apache es Thread Safe</strong>.</p>

<p><a href="https://instagram.com/elboletaire/">
  <img src="//elboletaire.github.io/racotecnic/uploads/2015/03/thread_safe.jpg" alt="Thread safe" />
</a></p>

<p>En mi instalación descargo <a href="http://windows.php.net/downloads/releases/php-5.6.6-Win32-VC11-x64.zip">PHP 5.6 (5.6.6) VC11 x64 Thread Safe (2015-Feb-19 01:45:29)</a> y <a href="http://windows.php.net/downloads/releases/php-5.5.22-Win32-VC11-x64.zip">PHP 5.5 (5.5.22) VC11 x64 Thread Safe (2015-Feb-19 01:38:01)</a>.</p>

<p>Una vez tenéis todo descargado, lo descomprimís y lo movéis hacia el directorio <code class="highlighter-rouge">C:\httpd</code>. Poned nombres cortos a los directorios:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>C:\httpd\php56
C:\httpd\php55
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ya está PHP instalado, pero no configurado.</p>

<p>Si queréis poder ejecutar <code class="highlighter-rouge">php.exe</code> desde vuestro terminal deberéis añadir a la variable de entorno <code class="highlighter-rouge">PATH</code> el directorio de la versión que queráis utilizar. En caso de hacerlo también deberéis crear una nueva variable de entorno <code class="highlighter-rouge">PHPRC</code> con el mismo directorio que habéis añadido al <code class="highlighter-rouge">PATH</code>.</p>

<p>Ahora tenéis que entrar en cada instalación de php que habéis instalado y renombrar el fichero <code class="highlighter-rouge">php.ini-development</code> a <code class="highlighter-rouge">php.ini</code> y hacer los cambios que indicaré a continuación.</p>

<p>Buscad el siguiente trozo:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="c">; On windows:
; extension_dir = "ext"
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>Y descomentad la línea de <code class="highlighter-rouge">extension_dir</code>, quedando así:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="c">; On windows:
</span><span class="py">extension_dir</span> <span class="p">=</span> <span class="s">"ext"</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Buscad el trozo donde estén todas las extensiones y descomentad las que os interesen. Las encontraréis en este formato:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c">;extension=php_bz2.dll
;extension=php_curl.dll
;extension=php_fileinfo.dll
;[...]
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>Estas tres primeras que he puesto yo seguramente os interesará activarlas, al igual que <code class="highlighter-rouge">gd2</code>, <code class="highlighter-rouge">gettext</code>, <code class="highlighter-rouge">intl</code>, <code class="highlighter-rouge">mbstring</code>, <code class="highlighter-rouge">exif</code>, <code class="highlighter-rouge">mysql</code>, <code class="highlighter-rouge">mysqli</code>, <code class="highlighter-rouge">pdo_mysql</code> y/u <code class="highlighter-rouge">openssl</code>.</p>

<p>Hecho esto en todos los ficheros <code class="highlighter-rouge">php.ini</code> de nuestras instalaciones, es momento de acabar de configurar apache para que ejecute ficheros php con nuestra versión por defecto de PHP.</p>

<p>Volved al fichero <code class="highlighter-rouge">httpd.conf</code> de apache y al final del documento, descomentad:</p>

<div class="language-conf highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c"># Set PHP 5.6 as default php-cgi executable
</span><span class="n">AddHandler</span> <span class="n">fcgid</span>-<span class="n">script</span> .<span class="n">php</span>
<span class="n">FcgidInitialEnv</span> <span class="n">PHPRC</span> <span class="s2">"C:/httpd/php56"</span>
<span class="n">FcgidWrapper</span> <span class="s2">"C:/httpd/php56/php-cgi.exe"</span> .<span class="n">php</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Utilizando <code class="highlighter-rouge">ApacheMonitor</code> reiniciad Apache. Cread un fichero <code class="highlighter-rouge">index.php</code> en el directorio <code class="highlighter-rouge">www</code> con un <code class="highlighter-rouge">phpinfo</code> dentro:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nb">phpinfo</span><span class="p">();</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y acceded a <a href="http://localhost">http://localhost</a> para verificar que PHP funciona correctamente.</p>

<h2 id="utilizando-distintas-versiones-de-php-en-nuestros-servidores-virtuales"><a id="user-content-utilizando-distintas-versiones-de-php-en-nuestros-servidores-virtuales" class="anchor" href="#utilizando-distintas-versiones-de-php-en-nuestros-servidores-virtuales"></a>Utilizando distintas versiones de PHP en nuestros servidores virtuales</h2>

<p>Ahora que ya tenéis Apache y la versión de PHP por defecto corriendo, llega el momento de explicaros cómo cambiar entre versiones de PHP.</p>

<p>Para utilizar esta metodología es necesario el uso de servidores virtuales, así que en el fichero <code class="highlighter-rouge">httpd.conf</code> descomentáis la línea donde carga el fichero de VirtualHosts:</p>

<div class="language-conf highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="c"># Virtual hosts
</span><span class="n">Include</span> <span class="n">conf</span>/<span class="n">extra</span>/<span class="n">httpd</span>-<span class="n">vhosts</span>.<span class="n">conf</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Descomentada esa línea abrís el fichero <code class="highlighter-rouge">conf/extra/httpd-vhosts.conf</code> en cuestión y creáis un par de servidores virtuales que irán con distintas versiones de PHP.</p>

<p>Para el ejemplo crearéis dos servidores virtuales <code class="highlighter-rouge">php55.loc</code> y <code class="highlighter-rouge">php56.loc</code>, así que lo primero que haréis es crear sus directorios:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>C:\httpd\www\php55.loc
C:\httpd\www\php56.loc
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y en el fichero <code class="highlighter-rouge">httpd-vhosts.conf</code> previamente abierto creamos los servidores virtuales:</p>

<div class="language-apache highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="p">&lt;</span><span class="nl">VirtualHost</span><span class="sr"> *:80</span><span class="p">&gt;
</span>  <span class="c"># Indicamos que queremos utilizar PHP 5.5</span>
  FcgidInitialEnv PHPRC "C:/httpd/php55"
  FcgidWrapper "C:/httpd/php55/php-cgi.exe" .php

  <span class="nc">DocumentRoot</span> "C:/httpd/www/php55.loc"
  <span class="nc">ServerName</span> php55.loc
  <span class="nc">ServerAlias</span> www.php55.loc
  <span class="nc">ErrorLog</span> "logs/php55.loc-error.log"
  <span class="nc">CustomLog</span> "logs/php55.loc-access.log" common
<span class="p">&lt;/</span><span class="nl">VirtualHost</span><span class="p">&gt;
</span>
<span class="p">&lt;</span><span class="nl">VirtualHost</span><span class="sr"> *:80</span><span class="p">&gt;
</span>  <span class="c"># Dado que utilizo PHP 5.6 por defecto no me es</span>
  <span class="c"># necesario especificar nada a fastcgi</span>

  <span class="nc">DocumentRoot</span> "C:/httpd/www/php56.loc"
  <span class="nc">ServerName</span> php56.loc
  <span class="nc">ServerAlias</span> www.php56.loc
  <span class="nc">ErrorLog</span> "logs/php56.loc-error.log"
  <span class="nc">CustomLog</span> "logs/php56.loc-access.log" common
<span class="p">&lt;/</span><span class="nl">VirtualHost</span><span class="p">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>Para ir acabando añadid al fichero hosts de sistema (<code class="highlighter-rouge">C:\Windows\System32\drivers\etc\hosts</code>) los dominios de los servidores virtuales:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>127.0.0.1    php55.loc www.php55.loc
127.0.0.1    php56.loc www.php56.loc
</pre></td></tr></tbody></table>
</div>
</div>

<p>Copiad el fichero <code class="highlighter-rouge">index.php</code> que hemos creado antes en el directorio <code class="highlighter-rouge">www</code> a cada directorio de cada host virtual.</p>

<p>Finalmente reiniciad apache utilizando ApacheMonitor y acceded con vuestro navegador a <a href="http://php55.loc">http://php55.loc</a> y <a href="http://php56.loc">http://php56.loc</a> para verificar que todo ha funcionado correctamente.</p>

<p>Estoy seguro de que sí :)</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2015/03/php.loc_.png"><img src="//elboletaire.github.io/racotecnic/uploads/2015/03/php.loc_-1024x732.png" alt="php.loc" class="aligncenter size-large wp-image-2336" /></a></p>

<h2 id="instalar-mysql"><a id="user-content-instalar-mysql" class="anchor" href="#instalar-mysql"></a>Instalar MySQL</h2>

<p>Descargad el <a href="http://dev.mysql.com/downloads/windows/installer/5.6.html">instalador de MySQL</a> y procurad instalar lo que os interese (con el servidor ya basta).</p>

<p>Podéis optar por escoger la instalación por defecto para desarrolladores (os instalará cosas que no necesita un desarrollador PHP habitualmente), o bien podéis instalar los paquetes que queráis manualmente.</p>

<p>En el caso de mi instalación escojo únicamente el servidor de MySQL en su versión x64.</p>

<p>Y para instalar, “siguiente, siguiente, siguiente”…</p>

<h2 id="enlaces-útiles-y-referencias"><a id="user-content-enlaces-útiles-y-referencias" class="anchor" href="#enlaces-%C3%BAtiles-y-referencias"></a>Enlaces útiles y referencias</h2>

<p>Me gustaría enlazar a las referencias pero no puedo ya que hace demasiado tiempo que ando haciendo todo este proceso de memoria y no recuerdo exactamente de dónde saqué la información. Sé que al final lo hice funcionar gracias a alguien que explicaba cómo correr FastCGI en Linux, pero ni de coña lograría encontrar el enlace original.</p>

<p>A parte de esto (que lo digo en parte para que seáis conscientes de que todo se puede encontrar buscándolo), os adjunto los ficheros de configuración resultantes tras la configuración explicada en este tutorial.</p>

      <footer class="entry-meta">
        <span class="entry-tags">
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/PHP" title="Pages tagged PHP" class="tag">
                <span class="term">PHP</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/MySQL" title="Pages tagged MySQL" class="tag">
                <span class="term">MySQL</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/Apache" title="Pages tagged Apache" class="tag">
                <span class="term">Apache</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/Apache2" title="Pages tagged Apache2" class="tag">
                <span class="term">Apache2</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/fastCGI" title="Pages tagged fastCGI" class="tag">
                <span class="term">fastCGI</span>
            </a>
            
            
        </span>
        
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="//elboletaire.github.io/racotecnic/2014/01/ordenar-por-columnas-en-laravel-4-o-como-extender-laravel-4-a-nuestro-gusto/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="//elboletaire.github.io/racotecnic/2016/05/guarda-gratis-en-la-nube-tus-partidas-guardadas-o-como-hacer-copias-de-seguridad-en-la-nube-gratis/" title="Guarda GRATIS en la nube tus partidas guardadas o cómo hacer copias de seguridad en la nube gratis">Guarda GRATIS en la nube tus partidas guardadas o cómo hacer copias de seguridad en la nube gratis</a></h3>
      <p>Ya hace unos años que hago esto y la verdad es que es muy práctico. Consistebásicamente en subir automáticamente las partidas guardadas a...&hellip; <a href="//elboletaire.github.io/racotecnic/2016/05/guarda-gratis-en-la-nube-tus-partidas-guardadas-o-como-hacer-copias-de-seguridad-en-la-nube-gratis/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="//elboletaire.github.io/racotecnic/2014/01/ordenar-por-columnas-en-laravel-4-o-como-extender-laravel-4-a-nuestro-gusto/" title="Ordenar por columnas en Laravel 4 o cómo extender Laravel 4 a tu gusto">Ordenar por columnas en Laravel 4 o cómo extender Laravel 4 a tu gusto</a></h4>
        <span>Published on January 18, 2014</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="//elboletaire.github.io/racotecnic/2013/12/tema-de-oh-my-zsh-inspirado-en-af-magic-y-posh-git/" title="Tema de oh my zsh inspirado en af-magic y posh-git">Tema de oh my zsh inspirado en af-magic y posh-git</a></h4>
        <span>Published on December 07, 2013</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Racó Tècnic. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="//elboletaire.github.io/racotecnic/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106861877-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>



    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'racotecnic'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</body>
</html>
