<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Leer hilos RSS en CakePHP utilizando jQuery &#8211; Racó Tècnic</title>
<meta name="description" content="Punt de trobada de coneixements">
<meta name="keywords" content="PHP, JavaScript, jQuery, RSS, XML, CakePHP">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="//elboletaire.github.io/racotecnic/images/">
<meta name="twitter:title" content="Leer hilos RSS en CakePHP utilizando jQuery">
<meta name="twitter:description" content="Punt de trobada de coneixements">
<meta name="twitter:creator" content="@racotecnic">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Leer hilos RSS en CakePHP utilizando jQuery">
<meta property="og:description" content="Punt de trobada de coneixements">
<meta property="og:url" content="//elboletaire.github.io/racotecnic/2009/11/leer-hilos-rss-en-cakephp-utilizando-jquery/">
<meta property="og:site_name" content="Racó Tècnic">





<link rel="canonical" href="//elboletaire.github.io/racotecnic/2009/11/leer-hilos-rss-en-cakephp-utilizando-jquery/">
<link href="//elboletaire.github.io/racotecnic/feed.xml" type="application/atom+xml" rel="alternate" title="Racó Tècnic Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="//elboletaire.github.io/racotecnic/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="//elboletaire.github.io/racotecnic/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="//elboletaire.github.io/racotecnic/images/" alt="Racó Tècnic photo" class="author-photo">
					<h4>Racó Tècnic</h4>
					<p>A subproject from <a href="http://underave.net">underave.net</a> created by <a href="https://github.com/elboletaire">elboletaire</a> and maintained by many collaborators.</p>
				</li>
				<li><a href="//elboletaire.github.io/racotecnic/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:elboletaire@underave.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/racotecnic"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/racotecnic"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/elboletaire/racotecnic"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="//elboletaire.github.io/racotecnic/posts/">All Posts</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/tags/">All Tags</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/categories/">All Categories</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="https://github.com/elboletaire/racotecnic" target="_blank">Github</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2009/11/leer-hilos-rss-en-cakephp-utilizando-jquery/" rel="bookmark" title="Leer hilos RSS en CakePHP utilizando jQuery">Leer hilos RSS en CakePHP utilizando jQuery</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2009-11-20T14:41:14+01:00">November 20, 2009</time></span></h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~15 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Con este pequeño tutorial aprenderéis a leer hilos RSS en CakePHP y mostrarlos “con clase” utilizando el framework de JavaScript jQuery.</p>

<p>Si no tenéis ni idea de Cake pero utilizáis un poco el tarro seguro que podréis aprovechar este mismo ejemplo para <strong>leer hilos RSS mediante PHP y jQuery</strong> (una pista: empezad por eliminar todo lo que tenga que ver con la caché).</p>

<blockquote>
  <ul>
    <li>Ejemplo en <a title="Visitar underave" href="http://www.underave.net/barna23/">underave</a>: <a href="http://www.underave.net/barna23/blogs">http://www.underave.net/barna23/blogs</a></li>
    <li>Ejemplo del tutorial: <a href="http://demos.racotecnic.com/tutorials/cake/pages/blogs">http://demos.racotecnic.com/tutorials/cake/pages/blogs</a></li>
    <li><a href="http://demos.racotecnic.com/tutorials/2009/11/rss_cake.zip">Descargar ficheros del ejemplo</a></li>
  </ul>
</blockquote>

<p>Para este tutorial sólo necesitáis <a rel="nofollow" href="http://www.jquery.com" target="_blank">jQuery</a> (yo utilizo la v. 1.3.2) y <a rel="nofollow" href="http://www.cakephp.org" target="_blank">CakePHP</a> (en mi caso la v. 1.2.4.8284 [1.2.5 stable]).</p>

<p><a id="more"></a><a id="more-1177"></a></p>

<p>Vamos a utilizar nuestro fichero <i>pages_controller.php</i> para gestionar los hilos. Si no lo tenéis creado, creadlo. Recordad que debéis hacerlo en la carpeta <i>/app/controllers/</i> y que el contenido de este fichero debe ser, para empezar, idéntico que el fichero <i>/cake/libs/controller/pages_controller.php</i>; algo así:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// /app/controllers/pages_controller.php
</span><span class="k">class</span> <span class="nc">PagesController</span> <span class="k">extends</span> <span class="nx">AppController</span>
<span class="p">{</span>
  <span class="k">var</span> <span class="nv">$name</span> <span class="o">=</span> <span class="s1">'Pages'</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$uses</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="k">var</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'RequestHandler'</span><span class="p">);</span>
  <span class="k">var</span> <span class="nv">$cacheDuration</span> <span class="o">=</span> <span class="s1">'+3 hours'</span><span class="p">;</span>

  <span class="k">function</span> <span class="nf">display</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="nv">$path</span> <span class="o">=</span> <span class="nb">func_get_args</span><span class="p">();</span>

    <span class="nv">$count</span> <span class="o">=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nv">$page</span> <span class="o">=</span> <span class="nv">$subpage</span> <span class="o">=</span> <span class="nv">$title</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$path</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nv">$page</span> <span class="o">=</span> <span class="nv">$path</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$path</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nv">$subpage</span> <span class="o">=</span> <span class="nv">$path</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$path</span><span class="p">[</span><span class="nv">$count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nv">$title</span> <span class="o">=</span> <span class="nx">Inflector</span><span class="o">::</span><span class="na">humanize</span><span class="p">(</span><span class="nv">$path</span><span class="p">[</span><span class="nv">$count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nb">compact</span><span class="p">(</span><span class="s1">'page'</span><span class="p">,</span> <span class="s1">'subpage'</span><span class="p">,</span> <span class="s1">'title'</span><span class="p">));</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nb">join</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="nv">$path</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Para ahorrar tiempo he añadido ya —en azul— un par de cosas que vamos a necesitar.</p>

<p>En la <b>línea 5</b> he añadido el “<a href="http://book.cakephp.org/view/174/request-handling" target="_blank" rel="nofollow">RequestHandler</a>” ya que vamos a trabajar con Ajax y necesitaremos uno de sus métodos.</p>

<p>En la <b>línea 6</b> he inicializado la variable <i>$cacheDuration</i> donde almacenamos el tiempo de actualización de la caché (3 horas en el caso del ejemplo). Si lo preferís podéis iniciarla más adelante como una variable normal dentro de un método en lugar de crearla como variable de clase.</p>

<p>Sabiendo esto, pasemos a la creación del resto de métodos del controlador <i>PagesController</i>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></td><td class="code"><pre><span class="c1">// continuación de /app/controllers/pages_controller.php
</span><span class="k">function</span> <span class="nf">beforeFilter</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">// Desactivamos debug para todo el controlador
</span>  <span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">'debug'</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="c1">// En caso de utilizar el componente Auth, damos permiso a las secciones necesarias
</span>  <span class="c1">//$this-&gt;Auth-&gt;allowedActions = array('rss');
</span>  <span class="k">parent</span><span class="o">::</span><span class="na">beforeFilter</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">rss</span><span class="p">(</span><span class="nv">$name</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nv">$limit</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="nv">$cache</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// Desactivamos auto render de las vistas
</span>  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">autoRender</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="nv">$options</span> <span class="o">=</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">'limit'</span><span class="p">,</span><span class="s1">'cache'</span><span class="p">);</span>
  <span class="c1">// Si la solicitud es Ajax
</span>  <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">RequestHandler</span><span class="o">-&gt;</span><span class="na">isAjax</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// Cargamos layout ajax.ctp
</span>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">layout</span> <span class="o">=</span> <span class="s1">'ajax'</span><span class="p">;</span>
    <span class="c1">// Url según nombre recibido por parámetro
</span>    <span class="k">switch</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s1">'psico'</span><span class="o">:</span>
        <span class="nv">$url</span> <span class="o">=</span> <span class="s1">'http://psicoactividad.underave.net/feed'</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s1">'zeta'</span><span class="o">:</span>
        <span class="nv">$url</span> <span class="o">=</span> <span class="s1">'http://planzeta.underave.net/feed'</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s1">'raco'</span><span class="o">:</span>
        <span class="nv">$url</span> <span class="o">=</span> <span class="s1">'http://www.racotecnic.com/feed'</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s1">'underave'</span><span class="o">:</span>
      <span class="k">default</span><span class="o">:</span>
        <span class="nv">$url</span> <span class="o">=</span> <span class="s1">'http://blog.underave.net/feed'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Obtenemos los hilos
</span>    <span class="k">if</span> <span class="p">((</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$options</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">]</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nv">$feeds</span> <span class="o">=</span> <span class="nx">Cache</span><span class="o">::</span><span class="na">read</span><span class="p">(</span><span class="s1">'$name.feed'</span><span class="p">))</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$feeds</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_getFeeds</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
      <span class="c1">// Si el parámetro cache es true guardamos en caché
</span>      <span class="k">if</span> <span class="p">(</span><span class="nv">$options</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">]</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Cache</span><span class="o">::</span><span class="na">set</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'duration'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cacheDuration</span><span class="p">));</span>
        <span class="nx">Cache</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">'$name.feed'</span><span class="p">,</span> <span class="nv">$feeds</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// Limitamos los resultados
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$options</span><span class="p">[</span><span class="s1">'limit'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$feeds</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'limit'</span><span class="p">])</span>
      <span class="nv">$feeds</span> <span class="o">=</span> <span class="nb">array_slice</span><span class="p">(</span><span class="nv">$feeds</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'limit'</span><span class="p">]);</span>
    <span class="c1">// Guardamos la variable $data
</span>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="nv">$feeds</span><span class="p">);</span>
    <span class="c1">// Cargamos fichero json.ctp
</span>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">'/ajax/json'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">function</span> <span class="nf">_getFeeds</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// Configuramos la conexión curl
</span>  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_FOLLOWLOCATION</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
  <span class="c1">// Ejecutamos la conexión
</span>  <span class="nv">$feed</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="c1">// En caso de error detenemos ejecución
</span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$feed</span><span class="p">)</span>  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="c1">// Creamos objeto SimpleXmlElement
</span>  <span class="nv">$xml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SimpleXmlElement</span><span class="p">(</span><span class="nv">$feed</span><span class="p">);</span>
  <span class="c1">// Leemos el hilo RSS y lo guardamos en la variable $out
</span>  <span class="k">foreach</span> <span class="p">(</span><span class="nv">$xml</span><span class="o">-&gt;</span><span class="na">channel</span><span class="o">-&gt;</span><span class="na">item</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$out</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'title'</span>       <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">,</span>
      <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">description</span><span class="p">,</span>
      <span class="s1">'pubDate'</span>     <span class="o">=&gt;</span> <span class="nb">strtotime</span><span class="p">(</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">pubDate</span><span class="p">),</span>
      <span class="s1">'link'</span>        <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">link</span>
    <span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// Devolvemos el hilo
</span>  <span class="k">return</span> <span class="nv">$out</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Como siempre digo, el código habla por si solo y para el resto están los comentarios ;) Sólo cabría mencionar un par de cosas:</p>

<p>El layout <em>ajax.ctp</em> (línea 19) no hace falta que lo creéis ya que CakePHP ya lo incluye en su núcleo.</p>

<p>El fichero <em>json.ctp</em> (línea 49) sólo contiene el <i>echo</i> de un <i>json_encode</i>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="cp">&lt;?php</span> <span class="c1">// /app/views/ajax/json.ctp
</span><span class="k">echo</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>El fichero <i>json.ctp</i> lo he creado en la carpeta ajax porque todo lo relacionado con ajax lo meto en la carpeta /app/views/ajax/ para tenerlo todo en el mismo sitio. A demás, son ficheros tan genéricos que los utilizo desde casi todas las secciones así que ya me va bien tenerlos en una carpeta por separado.</p>

<p>Si lo preferís, en lugar de crear la vista json, podéis optar por hacer un <i>echo</i> de un <i>json_encode</i> en el controlador directamente, aunque eso rompe un poco con el patrón MVC.</p>

<p><strong>Para que el método rss funcione es importante que creemos una ruta hacia /rss</strong>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="c1">// /app/config/routes.php
</span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span><span class="s1">'/rss/:feed'</span><span class="p">,</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">'controller'</span> <span class="o">=&gt;</span> <span class="s1">'pages'</span><span class="p">,</span><span class="s1">'action'</span> <span class="o">=&gt;</span> <span class="s1">'rss'</span><span class="p">),</span>
  <span class="k">array</span><span class="p">(</span>
    <span class="s1">'feed'</span> <span class="o">=&gt;</span> <span class="s1">'[a-z]+'</span><span class="p">,</span>
    <span class="s1">'pass'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'feed'</span><span class="p">)</span>
  <span class="p">)</span>
<span class="p">);</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Dicho esto, pasemos rápidamente a la vista que mostrará los hilos RSS (en mi caso la he llamado <i>blogs.ctp</i>):</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><pre>// /app/views/pages/blogs.ctp
<span class="cp">&lt;?php</span> <span class="nv">$javascript</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="s1">'page_specific/blogs'</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span> <span class="cp">?&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="s1">'Leer hilos RSS en CakePHP utilizando jQuery'</span><span class="p">,</span><span class="s1">'http://www.racotecnic.com/2009/11/leer-hilos-rss-en-cakephp-utilizando-jquery'</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="nv">$html</span><span class="o">-&gt;</span><span class="na">image</span><span class="p">(</span><span class="s1">'http://www.underave.net/barna23/img/blogs/raco.png'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'alt'</span><span class="o">=&gt;</span><span class="s1">'Racó Tècnic'</span><span class="p">,</span> <span class="s1">'class'</span><span class="o">=&gt;</span><span class="s1">'titol_blog'</span><span class="p">)),</span><span class="s1">'http://www.racotecnic.com'</span><span class="p">,</span><span class="k">array</span><span class="p">(</span><span class="s1">'target'</span><span class="o">=&gt;</span><span class="s1">'_blank'</span><span class="p">),</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">'blogs'</span> <span class="na">id=</span><span class="s">'raco'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;?php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Cargando'</span><span class="p">)</span> <span class="cp">?&gt;</span>...<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="nv">$html</span><span class="o">-&gt;</span><span class="na">image</span><span class="p">(</span><span class="s1">'http://www.underave.net/barna23/img/blogs/unde.png'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'alt'</span><span class="o">=&gt;</span><span class="s1">'Underave\'s Blog: Be underground'</span><span class="p">,</span> <span class="s1">'class'</span><span class="o">=&gt;</span><span class="s1">'titol_blog'</span><span class="p">)),</span><span class="s1">'http://blog.underave.net'</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">'blogs'</span> <span class="na">id=</span><span class="s">'underave'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;?php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Cargando'</span><span class="p">)</span> <span class="cp">?&gt;</span>...<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="nv">$html</span><span class="o">-&gt;</span><span class="na">image</span><span class="p">(</span><span class="s1">'http://www.underave.net/barna23/img/blogs/zeta.png'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'alt'</span><span class="o">=&gt;</span><span class="s1">'Plan [Zeta]'</span><span class="p">,</span> <span class="s1">'class'</span><span class="o">=&gt;</span><span class="s1">'titol_blog'</span><span class="p">)),</span><span class="s1">'http://planzeta.underave.net'</span><span class="p">,</span><span class="k">array</span><span class="p">(</span><span class="s1">'target'</span><span class="o">=&gt;</span><span class="s1">'_blank'</span><span class="p">),</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">'blogs'</span> <span class="na">id=</span><span class="s">'zeta'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;?php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Cargando'</span><span class="p">)</span> <span class="cp">?&gt;</span>...<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="nv">$html</span><span class="o">-&gt;</span><span class="na">image</span><span class="p">(</span><span class="s1">'http://www.underave.net/barna23/img/blogs/psico.png'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'alt'</span><span class="o">=&gt;</span><span class="s1">'Psico Actividad'</span><span class="p">,</span> <span class="s1">'class'</span><span class="o">=&gt;</span><span class="s1">'titol_blog'</span><span class="p">)),</span><span class="s1">'http://psicoactividad.underave.net'</span><span class="p">,</span><span class="k">array</span><span class="p">(</span><span class="s1">'target'</span><span class="o">=&gt;</span><span class="s1">'_blank'</span><span class="p">),</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">'blogs'</span> <span class="na">id=</span><span class="s">'psico'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;?php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Cargando'</span><span class="p">)</span> <span class="cp">?&gt;</span>...<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>En la <b>línea 2</b> he añadido el fichero javascript que se encargará de cargar los hilos RSS (y será el siguiente paso del tutorial).</p>

<p>En las <b>líneas 5, 6 y 7</b> (y luego se repite para cada blog) he añadido una lista de elementos con una ID cada uno.<strong> Esta ID debe coincidir con las opciones que hayáis puesto en el <i>switch</i> del método <i>rss</i></strong> (en <i>pages_controller.php</i>).</p>

<p>Sólo nos queda hacer el fichero JavaScript encargado de cargar los hilos:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="c1">// /app/webroot/js/page_specific/blogs.js</span>
<span class="nx">jQuery</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ID de cada blog (debe coincidir con las ID de la vista y las del controlador)</span>
  <span class="kd">var</span> <span class="nx">blogs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'underave'</span><span class="p">,</span> <span class="s1">'zeta'</span><span class="p">,</span> <span class="s1">'psico'</span><span class="p">,</span> <span class="s1">'raco'</span><span class="p">];</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">blogs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">blog</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Obtenemos JSON para cada blog</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="nx">webroot</span> <span class="o">+</span> <span class="s1">'rss/'</span> <span class="o">+</span> <span class="nx">blog</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Ocultamos el texto 'Cargando...'</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#'</span> <span class="o">+</span> <span class="nx">blog</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="s1">'normal'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Eliminamos el texto 'Cargando...'</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
        <span class="c1">// Añadimos un ítem a la lista por cada enlace recibido</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;li&gt;&lt;a href="'</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">link</span> <span class="o">+</span> <span class="s1">'" target="_top"&gt;'</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'&lt;/a&gt;&lt;/li&gt;'</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">'#'</span> <span class="o">+</span> <span class="nx">blog</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="c1">// Lo mostramos todo</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">(</span><span class="s1">'normal'</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>El trozo de item.title.subtr(0,1).toUpperCase() + item.title….. es una pijada mía para que salga sólo la primera letra en mayúscula y el resto en minúscula. Si lo queréis sacar simplemente poned “item.title” y ya estará ;)</p>

<p>Pues ya está, ya lo tenemos :D Si todo ha ido bien deberíais verlo parecido a alguno de los ejemplos.</p>

<blockquote>
  <ul>
    <li>Ejemplo en <a title="Visitar underave" href="http://www.underave.net/barna23/">underave</a>: <a href="http://www.underave.net/barna23/blogs">http://www.underave.net/barna23/blogs</a></li>
    <li>Ejemplo del tutorial: <a href="http://demos.racotecnic.com/tutorials/cake/pages/blogs">http://demos.racotecnic.com/tutorials/cake/pages/blogs</a></li>
    <li><a href="http://demos.racotecnic.com/tutorials/2009/11/rss_cake.zip">Descargar ficheros del ejemplo</a></li>
  </ul>
</blockquote>

      <footer class="entry-meta">
        <span class="entry-tags">
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/PHP" title="Pages tagged PHP" class="tag">
                <span class="term">PHP</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/JavaScript" title="Pages tagged JavaScript" class="tag">
                <span class="term">JavaScript</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/jQuery" title="Pages tagged jQuery" class="tag">
                <span class="term">jQuery</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/RSS" title="Pages tagged RSS" class="tag">
                <span class="term">RSS</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/XML" title="Pages tagged XML" class="tag">
                <span class="term">XML</span>
            </a>
            
            
            <a href="//elboletaire.github.io/racotecnic/etiqueta/CakePHP" title="Pages tagged CakePHP" class="tag">
                <span class="term">CakePHP</span>
            </a>
            
            
        </span>
        
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=//elboletaire.github.io/racotecnic/2009/11/leer-hilos-rss-en-cakephp-utilizando-jquery/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=//elboletaire.github.io/racotecnic/2009/11/leer-hilos-rss-en-cakephp-utilizando-jquery/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=//elboletaire.github.io/racotecnic/2009/11/leer-hilos-rss-en-cakephp-utilizando-jquery/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="//elboletaire.github.io/racotecnic/2009/11/recursos-web-gratis/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="//elboletaire.github.io/racotecnic/2016/05/guarda-gratis-en-la-nube-tus-partidas-guardadas-o-como-hacer-copias-de-seguridad-en-la-nube-gratis/" title="Guarda GRATIS en la nube tus partidas guardadas o cómo hacer copias de seguridad en la nube gratis">Guarda GRATIS en la nube tus partidas guardadas o cómo hacer copias de seguridad en la nube gratis</a></h3>
      <p>Ya hace unos años que hago esto y la verdad es que es muy práctico. Consistebásicamente en subir automáticamente las partidas guardadas a...&hellip; <a href="//elboletaire.github.io/racotecnic/2016/05/guarda-gratis-en-la-nube-tus-partidas-guardadas-o-como-hacer-copias-de-seguridad-en-la-nube-gratis/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/" title="Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales">Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales</a></h4>
        <span>Published on March 16, 2015</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="//elboletaire.github.io/racotecnic/2014/01/ordenar-por-columnas-en-laravel-4-o-como-extender-laravel-4-a-nuestro-gusto/" title="Ordenar por columnas en Laravel 4 o cómo extender Laravel 4 a tu gusto">Ordenar por columnas en Laravel 4 o cómo extender Laravel 4 a tu gusto</a></h4>
        <span>Published on January 18, 2014</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Racó Tècnic. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="//elboletaire.github.io/racotecnic/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106861877-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>



    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'racotecnic'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</body>
</html>
