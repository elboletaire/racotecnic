<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Racó Tècnic</title>
<meta name="description" content="Punt de trobada de coneixements">
<meta name="keywords" content="development, hardware, software, audio, video, mapping, php, bash, apache, nginx, cakephp, git">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg">

<meta name="twitter:title" content="Racó Tècnic">
<meta name="twitter:description" content="Punt de trobada de coneixements">
<meta name="twitter:creator" content="@racotecnic">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Racó Tècnic">
<meta property="og:description" content="Punt de trobada de coneixements">
<meta property="og:url" content="//elboletaire.github.io/racotecnic/">
<meta property="og:site_name" content="Racó Tècnic">





<link rel="canonical" href="//elboletaire.github.io/racotecnic/">
<link href="//elboletaire.github.io/racotecnic/feed.xml" type="application/atom+xml" rel="alternate" title="Racó Tècnic Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="//elboletaire.github.io/racotecnic/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="//elboletaire.github.io/racotecnic/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="//elboletaire.github.io/racotecnic/images/" alt="Racó Tècnic photo" class="author-photo">
					<h4>Racó Tècnic</h4>
					<p>A subproject from <a href="http://underave.net">underave.net</a> created by <a href="https://github.com/elboletaire">elboletaire</a> and maintained by many collaborators.</p>
				</li>
				<li><a href="//elboletaire.github.io/racotecnic/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:elboletaire@underave.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/racotecnic"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/racotecnic"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/elboletaire/racotecnic"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="//elboletaire.github.io/racotecnic/posts/">All Posts</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/tags/">All Tags</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/categories/">All Categories</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="https://github.com/elboletaire/racotecnic" target="_blank">Github</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="https://github.com/elboletaire/Watimage/blob/master/examples/files/LICENSE">elboletaire</a></div><!-- /.image-credit -->
  
    <div class="entry-image" style="background-image: url(//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg);">
      <img src="//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg" alt="">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Racó Tècnic</h1>
      <h2>Punt de trobada de coneixements</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2016-05-25T00:00:00+02:00">
          <a href="//elboletaire.github.io/racotecnic/2016/05/guarda-gratis-en-la-nube-tus-partidas-guardadas-o-como-hacer-copias-de-seguridad-en-la-nube-gratis/">May 25, 2016</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~7 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2016/05/guarda-gratis-en-la-nube-tus-partidas-guardadas-o-como-hacer-copias-de-seguridad-en-la-nube-gratis/" rel="bookmark" title="Guarda GRATIS en la nube tus partidas guardadas o cómo hacer copias de seguridad en la nube gratis" itemprop="url">Guarda GRATIS en la nube tus partidas guardadas o cómo hacer copias de seguridad en la nube gratis</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Ya hace unos años que hago esto y la verdad es que es muy práctico. Consiste
básicamente en subir automáticamente las partidas guardadas a un servicio en la
nube como
<a href="https://db.tt/5HdFOXd" target="_blank" rel="nofollow">Dropbox</a>,
Mega u ownCloud.</p>

<p>Me voy a centrar en hablar de partidas guardadas, pero el caso es que lo que
aprenderéis es a automatizar el proceso de copia en la nube, de modo que lo
podéis aprovechar para hacer copia de más cosas (como de vuestros documentos más
importantes).</p>

<p>Antes de empezar, aclarar que voy a hacer el tutorial para Mac, Linux y Win, pero
en el caso de Windows todos los ejemplos serán con versiones posteriores a Windows
Vista. Si estás utilizando Windows XP (seriously?) deberás buscar las
ubicaciones equivalentes.</p>

<p>Básicamente necesitaréis una cuenta en cualquier servicio en la nube que tenga
cliente de sincronización. ¿Que qué coño es eso de “cliente de sincronización”?
Pues una aplicación que se encarga de tener sincronizados tus ficheros entre tu
ordenador y el servicio de almacenaje en cuestión, a.k.a. “la nube”.</p>

<p>Así que <a href="https://db.tt/5HdFOXd">lo primero es crearse la cuenta si no lo habéis hecho ya</a>.</p>

<p>A continuación dejo enlazados los clientes de los tres servicios que he mencionado:</p>

<ul>
  <li><a href="https://db.tt/5HdFOXd"><strong>Dropbox:</strong></a> https://www.dropbox.com/install</li>
  <li><strong>Mega:</strong> https://mega.nz/#sync</li>
  <li><strong>ownCloud:</strong> https://owncloud.com/products/desktop-clients/</li>
</ul>

<blockquote>
  <p>No es intención de esta guía explicar las diferencias entre ellos ni tampoco
comparar sus características. Dejo a vuestra elección el servicio a elegir
—en caso de no estar utilizando uno ya.</p>
</blockquote>

<p>Ahora que ya tenéis cuenta en la nube y tenéis el cliente instalado, procedamos
a hacer la copia en la nube.</p>

<p>Antes de proceder, necesito que entendáis mínimamente qué es lo que vamos a hacer,
aunque si os la suda y queréis hacer el mono copiando-pegando podéis pasar a la
parte final.</p>

<p>Lo que vamos a hacer es crear un “enlace simbólico” (<em>symlink</em> en inglés) en la
carpeta de Dropbox que enlace hacia la carpeta donde estén las partidas guardadas
en cuestión.</p>

<p>En sistemas Unix (como Mac o Linux) un enlace simbólico suele ser lo mismo que un
acceso directo (<em>shortcut</em> en inglés), pero en Windows no tienen nada que ver:</p>

<ul>
  <li>Un acceso directo es un fichero con extensión <code class="highlighter-rouge">.lnk</code>. Si creamos un acceso
directo a una partida guardada en nuestro servicio en la nube lo que estaremos
haciendo es subir un fichero con estensión <code class="highlighter-rouge">.lnk</code> a dropbox. Vamos, algo inútil.</li>
  <li>Un enlace simbólico no tiene extensión específica, pero siempre comparte las
características de aquello que hemos enlazado. Esto quiere decir que si enlazamos
simbólicamente una carpeta nuestro sistema se creerá que esa carpeta está ahí.
O dicho de otro modo, si hacemos un enlace simbólico hacia una carpeta en nuestro
dropbox, dropbox creerá que es una carpeta, subiendo los contenidos de ésta
(pero en nuestro sistema sólo nos ocupará espacio la carpeta real).</li>
</ul>

<p>Dicho esto, <strong>da igual el orden en que hagáis el enlace simbólico</strong>; podéis tener
las carpetas originales en el servicio de la nube y enlazar hacia la carpeta
de la partida guardada (es lo que hago yo cuando instalo un juego del que ya tengo
partida guardada) o bien puede ser al revés: que tengáis la partida guardada en
su directorio original y creéis un enlace hacia ella en el servicio de la nube
(es lo que hago la primera vez que instalo un juego).</p>

<p>Vamos, que podéis utilizar uno u otro indistintamente, pero en mi caso utilizo
según me conviene, por comodidad. Así no tengo que ir moviendo ficheros de un
sitio a otro.</p>

<h2 id="al-grano">Al grano</h2>

<p>Bueno, ahora sólo nos queda una cosa: crear el enlace simbólico.</p>

<p>Para ello necesitas saber la ubicación exacta de:</p>

<ul>
  <li>La partida guardada a salvar en la nube (cada juego guarda donde le da la puta gana).</li>
  <li>La ubicación en tu servicio de la nube donde lo quieras almacenar.</li>
</ul>

<p>Os recomiendo que creéis una carpeta en vuestro servicio en la nube para tenerlo
todo bien agrupado. En los ejemplos utilizaré la ubicación
<code class="highlighter-rouge">C:\Users\USUARIO\ownCloud\Saved Games</code></p>

<p>El primer ejemplo lo haré con <strong>The Witcher 3</strong>. Las partidas guardadas están en
<code class="highlighter-rouge">Mis Documentos/The Witcher 3</code> que, si no habéis cambiado la ubicación de la carpeta
<code class="highlighter-rouge">Mis Documentos</code> debería ser:</p>

<p><code class="highlighter-rouge">C:\Users\USUARIO\Documents\The Witcher 3</code></p>

<p>Vale, ahora viene la parte que no he avisado y a la que muchos tendréis miedo: la
consola.</p>

<p>Abrid una consola con permisos de administración (tecla de Windows, escribes <code class="highlighter-rouge">cmd</code>
y le das a <code class="highlighter-rouge">Shift + Enter</code>) y teclead lo siguiente:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>mklink /?
</pre></td></tr></tbody></table>
</div>
</div>

<p>El comando en cuestión es <code class="highlighter-rouge">mklink</code> y al pasarle <code class="highlighter-rouge">/?</code> como parámetro, os devolverá
la ayuda, que debería ser algo parecido a esto:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre>Crea un vínculo simbólico.

MKLINK [[/D] | [/H] | [/J]] Vínculo Destino

        /D      Crea un vínculo simbólico a un directorio. El valor
                predeterminado es un vínculo simbólico a un archivo.
        /H      Crea un vínculo físico en lugar de un vínculo simbólico.
        /J      Crea una unión de directorios.
        Vínculo Especifica el nombre del nuevo vínculo simbólico.
        Destino Especifica la ruta (relativa o absoluta) a la que hace
                referencia el nuevo vínculo.
</pre></td></tr></tbody></table>
</div>
</div>

<p>Tal como pone en la ayuda, tendremos que indicar tres parámetros:</p>

<ul>
  <li><code class="highlighter-rouge">/D</code> para indicar que estamos haciendo un enlace simbólico de un directorio.</li>
  <li><code class="highlighter-rouge">Vínculo</code> la ubicación del vínculo simbólico.</li>
  <li><code class="highlighter-rouge">Destino</code> a qué enlaza ese vínculo simbólico.</li>
</ul>

<p>Así pues, siguiendo el ejemplo de The Witcher 3, en mi caso debería hacer:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>mklink /D <span class="s2">"C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\U</span><span class="s2">SUARIO</span><span class="se">\o</span><span class="s2">wnCloud</span><span class="se">\S</span><span class="s2">aved Games</span><span class="se">\T</span><span class="s2">he Witcher 3"</span> <span class="s2">"C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\U</span><span class="s2">SUARIO</span><span class="se">\D</span><span class="s2">ocuments</span><span class="se">\T</span><span class="s2">he Witcher 3"</span>
</pre></td></tr></tbody></table>
</div>
</div>
<blockquote>
  <p>No hace falta entrecomillar los parámetros si la ubicación no tiene espacios.</p>
</blockquote>

<p>Y listos. Como resultado la consola os indicará que el enlace simbólico ha sido creado.</p>

<h2 id="sistemas-unix-linux--mac">Sistemas UNIX (Linux / Mac)</h2>

<p>En el caso de los sistemas UNIX el comando a utilizar es <code class="highlighter-rouge">ln</code>. Utilizad
<code class="highlighter-rouge">ln --help</code> para ver todas las opciones posibles (es bastante más extenso que
el comando <code class="highlighter-rouge">MKLINK</code> de Windows).</p>

<p>Siguiendo el ejemplo de Windows, aquí tenéis que tener en cuenta que los argumentos
<code class="highlighter-rouge">Vículo</code> y <code class="highlighter-rouge">Destino</code> están intercambiados y que habrá que utilizar la opción <code class="highlighter-rouge">-s</code>
para indicarle que es un enlace simbólico.</p>

<p>Así pues, siguiendo el ejemplo de Windows de The Witcher 3 (que por desgracia no
está para sistemas Unix), sería:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ln -s  /home/USUARIO/Documents/The<span class="se">\ </span>Witcher<span class="se">\ </span>3 /home/USUARIO/ownCloud/Saved<span class="se">\ </span>Games/The<span class="se">\ </span>Witcher<span class="se">\ </span>3
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="más-ejemplos">Más ejemplos</h2>

<p>Para no liar seguiré utilizando la misma ubicación para mis partidas guardadas,
<code class="highlighter-rouge">C:\Users\USUARIO\ownCloud\Saved Games</code>.</p>

<h3 id="rockstar-games--gta">Rockstar Games / GTA</h3>

<p>En este caso copio la carpeta <code class="highlighter-rouge">Rockstar Games</code> entera:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>mklink /D <span class="s2">"C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\U</span><span class="s2">SUARIO</span><span class="se">\o</span><span class="s2">wnCloud</span><span class="se">\S</span><span class="s2">aved Games</span><span class="se">\R</span><span class="s2">ockstar Games"</span> <span class="s2">"C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\U</span><span class="s2">SUARIO</span><span class="se">\D</span><span class="s2">ocuments</span><span class="se">\R</span><span class="s2">ockstar Games"</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Unix:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ln -s /home/USUARIO/Documents/Rockstar<span class="se">\ </span>Games /home/USUARIO/ownCloud/Saved<span class="se">\ </span>Games
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="tropico-4--5">Tropico 4 / 5</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>mklink /D <span class="s2">"C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\U</span><span class="s2">SUARIO</span><span class="se">\o</span><span class="s2">wnCloud</span><span class="se">\S</span><span class="s2">aved Games</span><span class="se">\T</span><span class="s2">ropico 4"</span> <span class="s2">"C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\U</span><span class="s2">SUARIO</span><span class="se">\A</span><span class="s2">ppData</span><span class="se">\R</span><span class="s2">oaming</span><span class="se">\t</span><span class="s2">ropico 4"</span>
mklink /D <span class="s2">"C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\U</span><span class="s2">SUARIO</span><span class="se">\o</span><span class="s2">wnCloud</span><span class="se">\S</span><span class="s2">aved Games</span><span class="se">\T</span><span class="s2">ropico 5"</span> <span class="s2">"C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\U</span><span class="s2">SUARIO</span><span class="se">\A</span><span class="s2">ppData</span><span class="se">\R</span><span class="s2">oaming</span><span class="se">\t</span><span class="s2">ropico 5"</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Unix:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>ln -s /home/USUARIO/Documents/Tropico<span class="se">\ </span>4 /home/USUARIO/ownCloud/Saved<span class="se">\ </span>Games
ln -s /home/USUARIO/Documents/Tropico<span class="se">\ </span>5 /home/USUARIO/ownCloud/Saved<span class="se">\ </span>Games
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="más-usos">Más usos</h2>

<ul>
  <li>Copias de seguridad de todo tipo.</li>
  <li>Mover una aplicación/juego entre discos duros y crear un enlace simbólico evitará que
tengáis que reinstalarlo o reubicar sus accesos directos.</li>
  <li>Organizar ficheros o directorios.</li>
  <li>Compartir ficheros en múltiples directorios sin ocupar el espacio que todos
ellos requieren y teniendo todos los ficheros en cuestión actualizados.</li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry no-line-numbers">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2015-03-16T23:50:52+01:00">
          <a href="//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/">March 16, 2015</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~14 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2015/03/instalacion-wamp-a-pelo-con-multiples-versiones-de-php/" rel="bookmark" title="Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales" itemprop="url">Instalación WAMP a pelo con múltiples versiones de PHP o cómo configurar Apache para correr varias versiones de PHP en distintos servidores virtuales</a></h1>
    
  </header>
  <div class="entry-content">
    <p>En esta guía os explicaré cómo <strong>realizar la instalación de un servidor Windows Apache + MySQL + PHP (WAMP) con múltiples versiones de PHP</strong> para distintos servidores virtuales.</p>

<p>En realidad me centraré en la configuración tanto de Apache como de PHP para que tengáis todo funcionando como es debido, de aquí que diga lo de “a pelo”.</p>

<p>Instalaréis todo a partir de las páginas oficiales, tal como, creo, debería de ser siempre (y dejarse estar de mierdas prefabricadas).</p>

<p>Antes de empezar quiero dejar claro que ni soy de Microsoft, ni de Apache, ni de MySQL, ni de PHP; así que si tenéis algún problema no soy la persona a quién deberéis preguntar.</p>

<p>La metodología que explicaré a continuación la he utilizado anteriormente con éxito en múltiples máquinas y en varios sistemas operativos además de la instalación que realizo en una máquina virtual mientras os explico este tutorial paso por paso.</p>

<p>El proceso lo voy a realizar desde Windows 7 x64, pero como he dicho lo he tenido funcionando en varios sistemas operativos sin problemas:</p>

<ul>
  <li>Windows XP x86</li>
  <li>Windows 7 x64 y x86</li>
  <li>Windows 8 x64</li>
  <li>Windows 8.1 x64</li>
  <li>Windows 10 x64</li>
</ul>

<p>Como podéis ver, en la versión 32 bits de windows 8 no lo he probado pero, como digo, debería funcionar (me pregunto quién corre un Win8 a 32 bits).</p>

<p>En cuanto a las versiones de software, yo personalmente recuerdo haber probado, al menos:</p>

<ul>
  <li>Apache 2.0, 2.2 y 2.4</li>
  <li>MySQL 5.5</li>
  <li>PHP 5.3, 5.4, 5.5, 5.6 y 7</li>
</ul>

<p>De hecho yo en mi ordenador tengo todas esas versiones de PHP instaladas pero, por motivos obvios, en este tutorial voy a utilizar la última versión de apache y las dos últimas versiones de PHP (el mínimo necesario para poder enseñaros cómo configurar múltiples versiones por virtualhost).</p>

<p>Todo ello utilizando las versiones de 64 bits, pero procuraré poneros los enlaces actuales para las versiones de 32 bits.</p>
<blockquote>
Antes de empezar es importantísimo que comprobéis que tenéis todas las actualizaciones del sistema al día. Especialmente interesa tener <em>.NET Framework</em> instalado y actualizado para poder correr cualquiera de las aplicaciones que vamos a instalar. En mi caso la última actualización fue .NET Framework 4.5.2.</blockquote>

<p><a id="more"></a><a id="more-2326"></a></p>

<h2 id="estructura-de-la-instalación"><a id="user-content-estructura-de-la-instalación" class="anchor" href="#estructura-de-la-instalaci%C3%B3n"></a>Estructura de la instalación</h2>

<p>Podéis escoger instalar cada cosa donde os dé la gana, pero procurad tenerlo en cuenta a la hora de configurar cada cosa.</p>

<p>Para hacer las cosas sencillas y por tenerlo todo ordenado yo siempre he seguido esta estructura de directorios:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>C:\httpd\apache -&gt; Apache 2.4
C:\httpd\phpXX  -&gt; Cada una de las versiones de PHP
C:\httpd\www    -&gt; Directorio raíz de todos mis proyectos en desarrollo
</pre></td></tr></tbody></table>
</div>
</div>

<p>MySQL dejo que se instale donde quiera ya que no me preocupa tener copia de sus ficheros. Evidentemente hago copia de seguridad de las bases de datos pero no es el tema que nos concierne ahora.</p>

<h2 id="instalando-apache"><a id="user-content-instalando-apache" class="anchor" href="#instalando-apache"></a>Instalando Apache</h2>

<p>Desde hace relativamente poco la descarga de binarios de Apache ya no se realiza desde el sitio oficial. En su lugar ellos mismos te recomiendan varios sites alternativos desde los que efectuar la descarga.</p>

<p>Podéis ver esto <a href="http://ftp.cixug.es/apache//httpd/binaries/win32/">desde cualquiera de los mirrors de descarga de apache, bajo <code class="highlighter-rouge">binaries/win32</code></a>.</p>

<p>Yo personalmente recomiendo <a href="http://www.apachelounge.com/">ApacheLounge</a> y os guiaré para descargar desde ahí los ficheros.</p>

<p>Os guiaré, pero de todos modos pondré los enlaces directos a los ficheros que yo he utilizado (no os lo recomiendo ya que sacan versiones nuevas constantemente).</p>

<p>Entrad en ApacheLounge y seguid estos pasos para descargar todo lo necesario:</p>

<ul>
  <li>Id a <a href="http://www.apachelounge.com/download/">descargas</a>. En la barra lateral veréis que pone "VC11" y "VC10", eso es la versión necesaria del compilador de Visual C++ proporcionado por Microsoft.</li>
  <li>Descargad la versión que os interese de Apache, en mi caso descargo la versión <a href="http://www.apachelounge.com/download/VC11/binaries/httpd-2.4.12-win64-VC11.zip">2.4.12 Win64 desde VC11</a>.</li>
  <li>Dependiendo de la versión que hayáis descargado tenéis que descargar el compilador de C++. Veréis que está enlazado cerca de la misma descarga de Apache. En mi caso descargo <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30679">VC11 vcredist_x64/86.exe</a> asegurándome de marcar la casilla `VSU_4\vcredist_x64.exe` ya que estoy descargando para 64 bits.</li>
  <li>Descargad también el módulo de apache `mod_fcgid`. En el caso de Apache 2.4 los módulos vienen todos en un mismo zip así que en mi caso descargo <a href="http://www.apachelounge.com/download/VC11/modules/modules-2.4-win64-VC11.zip">modules-2.4-win64-VC11.zip</a>.</li>
</ul>

<p>Ahora que ya tenemos todo lo necesario en cuanto a Apache se refiere, procederemos a instalarlo.</p>

<p>Instalad primero VC10 (u 11) ya que es requisito indispensable para que Apache funcione.</p>

<p>Una vez instalado, descomprimid Apache y movedlo donde lo queráis instalar. En mi caso descomprimo apache en <code class="highlighter-rouge">C:\httpd\apache</code> de modo que accediendo a dicho directorio me queda el contenido del .zip (múltiples directorios y ficheros, entre ellos <code class="highlighter-rouge">INSTALL.txt</code> con detalles sobre cómo instalar Apache).</p>

<p>Como en mi caso no quiero utilizar el directorio <code class="highlighter-rouge">htdocs</code> que viene dentro del directorio de apache creo ahora el directorio <code class="highlighter-rouge">C:\httpd\www</code>.</p>

<p>Descomprimid también el módulo <code class="highlighter-rouge">mod_fcgid</code>. Os interesa únicamente el fichero <code class="highlighter-rouge">mod_fcgid.so</code> que desplazaréis dentro del directorio <code class="highlighter-rouge">modules</code> del directorio raíz de apache, en mi caso <code class="highlighter-rouge">C:\httpd\apache\modules</code> quedando <code class="highlighter-rouge">C:\httpd\apache\modules\mod_fcgid.so</code> listo para ser cargado por apache.</p>

<p>Hecho esto necesitáis configurar Apache para indicarle el directorio donde lo habéis ubicado. Para ello abrid el fichero <code class="highlighter-rouge">C:\httpd\apache\conf\httpd.conf</code> con el bloc de notas (o con vuestro editor de código favorito) —huelga decir que editar ese fichero con Word o WordPad sería una idiotez.</p>

<p>Cerca de la línea 37 encontraréis:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ServerRoot "C:/Apache24"
</pre></td></tr></tbody></table>
</div>
</div>

<p>Debéis cambiarlo a vuestra ubicación que siguiendo esta guía sería:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ServerRoot "C:/httpd/apache"
</pre></td></tr></tbody></table>
</div>
</div>

<p>Para ir más rápido, buscad todas las coincidencias en el documento de <code class="highlighter-rouge">C:/Apache24</code> y reemplazadlas con vuestra ubicación de instalación. Esto debería de reemplazar varias cosas como el <code class="highlighter-rouge">DocumentRoot</code> o la ubicación de los <code class="highlighter-rouge">cgi-bin</code>.</p>

<p>Dado que, en mi caso, el <code class="highlighter-rouge">DocumentRoot</code> lo quiero en otra ubicación, lo cambio en los dos sitios donde requiere (líneas 242 y 243 aproximadamente) a <code class="highlighter-rouge">C:\httpd\www</code>.</p>

<p>En esa misma configuración de <code class="highlighter-rouge">Directory</code> (cerca de la línea 243) debéis aseguraros de que se pueden ejecutar scripts cgi, dado que utilizaréis fastcgi para ejecutar PHP. Para ello debéis añadir <code class="highlighter-rouge">ExecCGI</code> detrás de las opciones, quedando esa línea así:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>Options Indexes FollowSymlinks ExecCGI
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ahora, cerca de la línea 176, cuando terminan de cargar todos los módulos debéis añadir el módulo <code class="highlighter-rouge">mod_fcgid</code> tal que así:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>LoadModule fcgid_module modules/mod_fcgid.so
</pre></td></tr></tbody></table>
</div>
</div>

<p>También sería un buen momento para que revisárais qué módulos de los que hay comentados os interesa tener habilitados para descomentarlos (como el típico <code class="highlighter-rouge">mod_rewrite</code>).</p>

<p>Para avanzar faena, cambiad <code class="highlighter-rouge">DirectoryIndex</code> para que coja ficheros php por defecto:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>DirectoryIndex index.php index.html index.htm
</pre></td></tr></tbody></table>
</div>
</div>

<p>Al final de todo del documento añadid las siguientes líneas:</p>

<div class="language-conf highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="c"># 200MB of file upload limit
</span><span class="n">FcgidMaxRequestLen</span> <span class="m">209715200</span>
<span class="c"># Set minimum timeouts
</span><span class="n">FcgidConnectTimeout</span> <span class="m">240</span>
<span class="n">FcgidIOTimeout</span> <span class="m">240</span>
<span class="n">FcgidBusyScanInterval</span> <span class="m">240</span>
<span class="n">FcgidBusyTimeout</span> <span class="m">240</span>

<span class="c"># Set PHP 5.6 as default php-cgi executable
# AddHandler fcgid-script .php
# FcgidInitialEnv PHPRC "C:/httpd/php56"
# FcgidWrapper "C:/httpd/php56/php-cgi.exe" .php
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>El último trozo está comentado a propósito, ya que instalaremos y probaremos Apache antes de instalar PHP.</p>

<p>Ya lo tenéis todo listo, guardad el documento e id a ejecutar Apache. Para ello abrid un terminal (cmd o PowerShell, tanto da) y ejecutad lo siguiente:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>cd C:\httpd\apache\bin
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ahora que estáis en el directorio de ejecutables de Apache ejecutadlo para ver si arranca:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>.\httpd.exe
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>Ojo! Algunas aplicaciones como Skype utilizan el puerto 80 si ven que no está
ocupado. Por ello es recomendable que cerréis cualquier aplicación que tengáis
corriendo antes de ejecutar Apache. Si no lo hacéis simplemente os saltará un
error indicando que dicho puerto está ocupado.</p>
</blockquote>

<p>Si todo ha ido bien únicamente os aparecerá una alerta indicando que no se ha
indicado un <code class="highlighter-rouge">ServerName</code>. Sino os mostrará claramente el error y deberéis de
arreglarlo. En mi caso mientras hacía este tutorial olvidé crear el directorio
<code class="highlighter-rouge">www</code> y me saltó este error:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>Syntax error on line 243 of C:/httpd/apache/conf/httpd.conf:
DocumentRoot must be a directory
</pre></td></tr></tbody></table>
</div>
</div>

<p>Utilizando vuestro navegador podéis acceder a <a href="http://localhost">http://localhost</a> y comprobar que el servidor funciona correctamente.</p>

<p>Perfecto, pero no hemos instalado Apache. Sólo hemos comprobado que funcionaba correctamente antes de instalarlo.</p>

<p>Para instalarlo debéis ejecutar un terminal con derechos de administrador. Una vez abierta y habiendo accedido a <code class="highlighter-rouge">C:\httpd\apache\bin</code> ejecutad:</p>

<pre><code class="language-bat">.\httpd.exe -k install
</code></pre>

<p>Para hacer que <code class="highlighter-rouge">ApacheMonitor</code> se ejecute cuando arranquéis el ordenador únicamente tenéis que crearle un acceso directo en la sección <code class="highlighter-rouge">Inicio</code> del menú Inicio (un poco redundante, sí).</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2015/03/apache_monitor.png"><img src="//elboletaire.github.io/racotecnic/uploads/2015/03/apache_monitor.png" alt="En català no és pas tant redundant, oi?" width="233" height="77" class="aligncenter size-full wp-image-2334" /></a></p>

<p>Hecho. Si os da el gusanillo reiniciad el ordenador y acceded de nuevo a <a href="http://localhost">http://localhost</a> para comprobar que todo sigue funcionando OK.</p>

<h2 id="instalando-php"><a id="user-content-instalando-php" class="anchor" href="#instalando-php"></a>Instalando PHP</h2>

<p>Id a la <a href="http://windows.php.net/download/">página de descargas de PHP para windows</a> y descargad todas las versiones de PHP que queráis tener instaladas.</p>

<p>Al descargarlas únicamente debéis tener en cuenta la arquitectura que estéis instalando (en mi caso x64) y que <strong>Apache es Thread Safe</strong>.</p>

<p><a href="https://instagram.com/elboletaire/">
  <img src="//elboletaire.github.io/racotecnic/uploads/2015/03/thread_safe.jpg" alt="Thread safe" />
</a></p>

<p>En mi instalación descargo <a href="http://windows.php.net/downloads/releases/php-5.6.6-Win32-VC11-x64.zip">PHP 5.6 (5.6.6) VC11 x64 Thread Safe (2015-Feb-19 01:45:29)</a> y <a href="http://windows.php.net/downloads/releases/php-5.5.22-Win32-VC11-x64.zip">PHP 5.5 (5.5.22) VC11 x64 Thread Safe (2015-Feb-19 01:38:01)</a>.</p>

<p>Una vez tenéis todo descargado, lo descomprimís y lo movéis hacia el directorio <code class="highlighter-rouge">C:\httpd</code>. Poned nombres cortos a los directorios:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>C:\httpd\php56
C:\httpd\php55
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ya está PHP instalado, pero no configurado.</p>

<p>Si queréis poder ejecutar <code class="highlighter-rouge">php.exe</code> desde vuestro terminal deberéis añadir a la variable de entorno <code class="highlighter-rouge">PATH</code> el directorio de la versión que queráis utilizar. En caso de hacerlo también deberéis crear una nueva variable de entorno <code class="highlighter-rouge">PHPRC</code> con el mismo directorio que habéis añadido al <code class="highlighter-rouge">PATH</code>.</p>

<p>Ahora tenéis que entrar en cada instalación de php que habéis instalado y renombrar el fichero <code class="highlighter-rouge">php.ini-development</code> a <code class="highlighter-rouge">php.ini</code> y hacer los cambios que indicaré a continuación.</p>

<p>Buscad el siguiente trozo:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="c">; On windows:
; extension_dir = "ext"
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>Y descomentad la línea de <code class="highlighter-rouge">extension_dir</code>, quedando así:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="c">; On windows:
</span><span class="py">extension_dir</span> <span class="p">=</span> <span class="s">"ext"</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Buscad el trozo donde estén todas las extensiones y descomentad las que os interesen. Las encontraréis en este formato:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c">;extension=php_bz2.dll
;extension=php_curl.dll
;extension=php_fileinfo.dll
;[...]
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>Estas tres primeras que he puesto yo seguramente os interesará activarlas, al igual que <code class="highlighter-rouge">gd2</code>, <code class="highlighter-rouge">gettext</code>, <code class="highlighter-rouge">intl</code>, <code class="highlighter-rouge">mbstring</code>, <code class="highlighter-rouge">exif</code>, <code class="highlighter-rouge">mysql</code>, <code class="highlighter-rouge">mysqli</code>, <code class="highlighter-rouge">pdo_mysql</code> y/u <code class="highlighter-rouge">openssl</code>.</p>

<p>Hecho esto en todos los ficheros <code class="highlighter-rouge">php.ini</code> de nuestras instalaciones, es momento de acabar de configurar apache para que ejecute ficheros php con nuestra versión por defecto de PHP.</p>

<p>Volved al fichero <code class="highlighter-rouge">httpd.conf</code> de apache y al final del documento, descomentad:</p>

<div class="language-conf highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c"># Set PHP 5.6 as default php-cgi executable
</span><span class="n">AddHandler</span> <span class="n">fcgid</span>-<span class="n">script</span> .<span class="n">php</span>
<span class="n">FcgidInitialEnv</span> <span class="n">PHPRC</span> <span class="s2">"C:/httpd/php56"</span>
<span class="n">FcgidWrapper</span> <span class="s2">"C:/httpd/php56/php-cgi.exe"</span> .<span class="n">php</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Utilizando <code class="highlighter-rouge">ApacheMonitor</code> reiniciad Apache. Cread un fichero <code class="highlighter-rouge">index.php</code> en el directorio <code class="highlighter-rouge">www</code> con un <code class="highlighter-rouge">phpinfo</code> dentro:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nb">phpinfo</span><span class="p">();</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y acceded a <a href="http://localhost">http://localhost</a> para verificar que PHP funciona correctamente.</p>

<h2 id="utilizando-distintas-versiones-de-php-en-nuestros-servidores-virtuales"><a id="user-content-utilizando-distintas-versiones-de-php-en-nuestros-servidores-virtuales" class="anchor" href="#utilizando-distintas-versiones-de-php-en-nuestros-servidores-virtuales"></a>Utilizando distintas versiones de PHP en nuestros servidores virtuales</h2>

<p>Ahora que ya tenéis Apache y la versión de PHP por defecto corriendo, llega el momento de explicaros cómo cambiar entre versiones de PHP.</p>

<p>Para utilizar esta metodología es necesario el uso de servidores virtuales, así que en el fichero <code class="highlighter-rouge">httpd.conf</code> descomentáis la línea donde carga el fichero de VirtualHosts:</p>

<div class="language-conf highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="c"># Virtual hosts
</span><span class="n">Include</span> <span class="n">conf</span>/<span class="n">extra</span>/<span class="n">httpd</span>-<span class="n">vhosts</span>.<span class="n">conf</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Descomentada esa línea abrís el fichero <code class="highlighter-rouge">conf/extra/httpd-vhosts.conf</code> en cuestión y creáis un par de servidores virtuales que irán con distintas versiones de PHP.</p>

<p>Para el ejemplo crearéis dos servidores virtuales <code class="highlighter-rouge">php55.loc</code> y <code class="highlighter-rouge">php56.loc</code>, así que lo primero que haréis es crear sus directorios:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>C:\httpd\www\php55.loc
C:\httpd\www\php56.loc
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y en el fichero <code class="highlighter-rouge">httpd-vhosts.conf</code> previamente abierto creamos los servidores virtuales:</p>

<div class="language-apache highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="p">&lt;</span><span class="nl">VirtualHost</span><span class="sr"> *:80</span><span class="p">&gt;
</span>  <span class="c"># Indicamos que queremos utilizar PHP 5.5</span>
  FcgidInitialEnv PHPRC "C:/httpd/php55"
  FcgidWrapper "C:/httpd/php55/php-cgi.exe" .php

  <span class="nc">DocumentRoot</span> "C:/httpd/www/php55.loc"
  <span class="nc">ServerName</span> php55.loc
  <span class="nc">ServerAlias</span> www.php55.loc
  <span class="nc">ErrorLog</span> "logs/php55.loc-error.log"
  <span class="nc">CustomLog</span> "logs/php55.loc-access.log" common
<span class="p">&lt;/</span><span class="nl">VirtualHost</span><span class="p">&gt;
</span>
<span class="p">&lt;</span><span class="nl">VirtualHost</span><span class="sr"> *:80</span><span class="p">&gt;
</span>  <span class="c"># Dado que utilizo PHP 5.6 por defecto no me es</span>
  <span class="c"># necesario especificar nada a fastcgi</span>

  <span class="nc">DocumentRoot</span> "C:/httpd/www/php56.loc"
  <span class="nc">ServerName</span> php56.loc
  <span class="nc">ServerAlias</span> www.php56.loc
  <span class="nc">ErrorLog</span> "logs/php56.loc-error.log"
  <span class="nc">CustomLog</span> "logs/php56.loc-access.log" common
<span class="p">&lt;/</span><span class="nl">VirtualHost</span><span class="p">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>Para ir acabando añadid al fichero hosts de sistema (<code class="highlighter-rouge">C:\Windows\System32\drivers\etc\hosts</code>) los dominios de los servidores virtuales:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>127.0.0.1    php55.loc www.php55.loc
127.0.0.1    php56.loc www.php56.loc
</pre></td></tr></tbody></table>
</div>
</div>

<p>Copiad el fichero <code class="highlighter-rouge">index.php</code> que hemos creado antes en el directorio <code class="highlighter-rouge">www</code> a cada directorio de cada host virtual.</p>

<p>Finalmente reiniciad apache utilizando ApacheMonitor y acceded con vuestro navegador a <a href="http://php55.loc">http://php55.loc</a> y <a href="http://php56.loc">http://php56.loc</a> para verificar que todo ha funcionado correctamente.</p>

<p>Estoy seguro de que sí :)</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2015/03/php.loc_.png"><img src="//elboletaire.github.io/racotecnic/uploads/2015/03/php.loc_-1024x732.png" alt="php.loc" class="aligncenter size-large wp-image-2336" /></a></p>

<h2 id="instalar-mysql"><a id="user-content-instalar-mysql" class="anchor" href="#instalar-mysql"></a>Instalar MySQL</h2>

<p>Descargad el <a href="http://dev.mysql.com/downloads/windows/installer/5.6.html">instalador de MySQL</a> y procurad instalar lo que os interese (con el servidor ya basta).</p>

<p>Podéis optar por escoger la instalación por defecto para desarrolladores (os instalará cosas que no necesita un desarrollador PHP habitualmente), o bien podéis instalar los paquetes que queráis manualmente.</p>

<p>En el caso de mi instalación escojo únicamente el servidor de MySQL en su versión x64.</p>

<p>Y para instalar, “siguiente, siguiente, siguiente”…</p>

<h2 id="enlaces-útiles-y-referencias"><a id="user-content-enlaces-útiles-y-referencias" class="anchor" href="#enlaces-%C3%BAtiles-y-referencias"></a>Enlaces útiles y referencias</h2>

<p>Me gustaría enlazar a las referencias pero no puedo ya que hace demasiado tiempo que ando haciendo todo este proceso de memoria y no recuerdo exactamente de dónde saqué la información. Sé que al final lo hice funcionar gracias a alguien que explicaba cómo correr FastCGI en Linux, pero ni de coña lograría encontrar el enlace original.</p>

<p>A parte de esto (que lo digo en parte para que seáis conscientes de que todo se puede encontrar buscándolo), os adjunto los ficheros de configuración resultantes tras la configuración explicada en este tutorial.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2014-01-18T18:30:38+01:00">
          <a href="//elboletaire.github.io/racotecnic/2014/01/ordenar-por-columnas-en-laravel-4-o-como-extender-laravel-4-a-nuestro-gusto/">January 18, 2014</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~11 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2014/01/ordenar-por-columnas-en-laravel-4-o-como-extender-laravel-4-a-nuestro-gusto/" rel="bookmark" title="Ordenar por columnas en Laravel 4 o cómo extender Laravel 4 a tu gusto" itemprop="url">Ordenar por columnas en Laravel 4 o cómo extender Laravel 4 a tu gusto</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Si has trasteado o estás trasteando con <a href="http://laravel.com/" title="Web oficial de Laravel" rel="nofollow external">Laravel 4</a> habrás notado que está algo verde. Entre varias cosas se echa en falta que no tenga una manera sencilla para poder ordenar los resultados por columnas.</p>

<p>Dado que yo vengo de CakePHP, me he inspirado en él para crear el sistema de ordenación por columnas, así que si en Cake podemos crear un enlace para ordenar así:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="nt">&lt;tr&gt;</span>
  <span class="nt">&lt;th&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/th&gt;</span>
  <span class="nt">&lt;th&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'Nom'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/th&gt;</span>
  <span class="nt">&lt;th&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">(</span><span class="s1">'address'</span><span class="p">,</span> <span class="s1">'Adreça'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/th&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>En este tutorial verás cómo hacer para poder ordenar así, utilizando blade (el sistema de plantillas por defecto de Laravel 4):</p>

<div class="language-html highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;th&gt;</span>{{ $posts-&gt;sort('id') }}<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;th&gt;</span>{{ $posts-&gt;sort('name', 'Nom') }}<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;th&gt;</span>{{ $posts-&gt;sort('address', 'Adreça') }}<span class="nt">&lt;/th&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2014/01/laravel_paginate.png" style="display:block; text-align:center">
  <img src="//elboletaire.github.io/racotecnic/uploads/2014/01/laravel_paginate.png" alt="laravel_paginate" />
</a></p>

<p>Para poder hacer esto tendrás que extender el paginador de Laravel para añadirle las funciones que necesites (como <code class="highlighter-rouge">sort</code>).</p>

<p>Dado que lo que es ordenar en sí no tiene ninguna complicación y lo puedes encontrar documentado, en este tutorial me centraré más en <strong>cómo extender classes de Laravel 4 para adaptarlo a tus necesidades</strong> y de paso verás cómo tener la ordenación por columnas bien organizada (a nivel código) para mejor reutilización en futuros proyectos.</p>

<blockquote>
  <p><strong>Nota:</strong> Debido al continuo desarrollo de Laravel este tutorial ha quedado rápidamente desfasado. He actualizado todos los enlaces para que funcionen correctamente pero ten en cuenta que algunos de estos ficheros han cambiado mucho o directamente ya no existen.</p>
</blockquote>

<p><a id="more"></a><a id="more-2277"></a></p>

<p>Antes de empezar me gustaría aclarar que no soy experto en Laravel ni mucho menos, simplemente me puse a trastear con él, vi que no tenía esta funcionalidad y exploré hasta encontrar la manera de integrarlo mejor en mi aplicación. Gracias a ello aprendí mucho mejor cómo funciona Laravel (internamente) y es en parte esto lo que quiero compartir contigo.</p>

<p>Por otro lado, a pesar de que el siguiente post rebosa de referencias externas a documentación, código incrustado y código en github, no estaría de más que hubieras leído la documentación de Laravel 4 antes de empezar.</p>

<h2 id="entendiendo-el-paginador">Entendiendo el paginador</h2>

<h3 id="la-facade-paginator">La <em>Facade</em> Paginator</h3>

<blockquote>
  <p><b>Nota:</b> Si no sabes qué es una <i>Facade</i>, <a href="http://laravel.com/docs/facades" rel="nofollow external" title="Abrir documentación sobre Facades">repásate la documentación</a>.</p>
</blockquote>

<p>Para hacer todo esto lo primero que hay que hacer es entender cómo funciona el paginador actual de Laravel 4. Vayamos al grano.</p>

<p>Si accedes al directorio <a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Pagination" rel="nofollow external">vendor/laravel/framework/src/Illuminate/Pagination</a> verás que hay un directorio llamado <a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Pagination/views" title="Ver en github" rel="nofollow external">views</a>, un fichero <code class="highlighter-rouge">composer.json</code> y cuatro ficheros php.</p>

<p>En la carpeta <code class="highlighter-rouge">views</code> hay tres plantillas para mostrar los <a href="http://laravel.com/docs/pagination" rel="nofollow external">botones de la paginación</a>. Si no leíste la documentación de Laravel sobre la paginación, gracias a este directorio acabas de averiguar que los botones de paginación tienen plantillas y que hay tres definidas por defecto.</p>

<p>El fichero <code class="highlighter-rouge">composer.json</code> ignóralo y de los ficheros PHP, fíjate en los tres siguientes:</p>

<ul>
  <li><a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Pagination/Paginator.php">Paginator.php</a></li>
  <li><a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Pagination/PaginationServiceProvider.php">PaginationServiceProvider.php</a></li>
  <li><a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Pagination/Environment.php">Environment.php</a></li>
</ul>

<p>El fichero <code class="highlighter-rouge">Paginator.php</code> es el que realmente te interesa ya que aquí es donde residen métodos como <a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Pagination/Paginator.php#L176" rel="nofollow external" title="Ver en github"><code class="highlighter-rouge">links()</code></a> y por tanto es donde te interesa añadir el método <code class="highlighter-rouge">sort()</code>.</p>

<p>No obstante, para poder hacer todo esto posible necesitarás hacer tu propio <code class="highlighter-rouge">PaginationServiceProvider.php</code> y tu propio <code class="highlighter-rouge">Environment.php</code>, ya que es en esos dos ficheros donde se inicializa el paginador.</p>

<p>Para entender esto mejor, abre tu fichero <code class="highlighter-rouge">app.php</code> y en el array de providers fíjate que, entre varios providers, <a href="https://github.com/laravel/laravel/tree/3ad58caba6c79c487deecb2fd7b0ea94e45b4f38/app/config/app.php#L98" title="Ver en github" rel="nofollow external">hay el siguiente</a>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="k">return</span> <span class="k">array</span><span class="p">(</span>
  <span class="c1">// ... otros parámetros de configuración ...
</span>
  <span class="s1">'providers'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// ... otros providers ...
</span>    <span class="s1">'Illuminate\Pagination\PaginationServiceProvider'</span><span class="p">,</span>
    <span class="c1">// ... más providers ...
</span>  <span class="p">)</span>

  <span class="c1">// ... más parámetros de configuración ...
</span><span class="p">);</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Así pues, para cargar el paginador lo primero que hace Laravel es cargar la clase <code class="highlighter-rouge">PaginationServiceProvider</code>.</p>

<p>Si abres este fichero podrás observar cómo en el método <a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Pagination/PaginationServiceProvider.php#L23" title="Ver en github" rel="nofollow external"><code class="highlighter-rouge">register</code></a> se inicializa la clase <code class="highlighter-rouge">Environment</code>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre><span class="sd">/**
 * Register the service provider.
 *
 * @return void
 */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">register</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">app</span><span class="p">[</span><span class="s1">'paginator'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">app</span><span class="o">-&gt;</span><span class="na">share</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$app</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$paginator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Environment</span><span class="p">(</span><span class="nv">$app</span><span class="p">[</span><span class="s1">'request'</span><span class="p">],</span> <span class="nv">$app</span><span class="p">[</span><span class="s1">'view'</span><span class="p">],</span> <span class="nv">$app</span><span class="p">[</span><span class="s1">'translator'</span><span class="p">]);</span>

    <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">setViewName</span><span class="p">(</span><span class="nv">$app</span><span class="p">[</span><span class="s1">'config'</span><span class="p">][</span><span class="s1">'view.pagination'</span><span class="p">]);</span>

    <span class="k">return</span> <span class="nv">$paginator</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y en la clase <code class="highlighter-rouge">Enviornment</code>, finalmente, en el método <a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Pagination/Environment.php#L103" title="Ver en github" rel="nofollow external"><code class="highlighter-rouge">make()</code></a> se innicializa la clase <code class="highlighter-rouge">Paginator</code>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="sd">/**
 * Get a new paginator instance.
 *
 * @param  array  $items
 * @param  int    $total
 * @param  int    $perPage
 * @return \Illuminate\Pagination\Paginator
 */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">make</span><span class="p">(</span><span class="k">array</span> <span class="nv">$items</span><span class="p">,</span> <span class="nv">$total</span><span class="p">,</span> <span class="nv">$perPage</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nv">$paginator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Paginator</span><span class="p">(</span><span class="nv">$this</span><span class="p">,</span> <span class="nv">$items</span><span class="p">,</span> <span class="nv">$total</span><span class="p">,</span> <span class="nv">$perPage</span><span class="p">);</span>

  <span class="k">return</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">setupPaginationContext</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p><b>Resumiendo:</b> En <code class="highlighter-rouge">app.php</code> se carga el <code class="highlighter-rouge">PaginationServiceProvider</code> que carga <code class="highlighter-rouge">Environment</code> que a su vez carga <code class="highlighter-rouge">Paginator</code>; así que habrá que crear tres clases para poder crear el método <code class="highlighter-rouge">sort()</code>.</p>

<h3 id="el-método-paginate-de-eloquent">El método paginate de Eloquent</h3>

<p>Esto que has visto únicamente es para añadir el método <code class="highlighter-rouge">sort()</code>, que básicamente pintará enlaces en las vistas, pero todavía tienes que hacer que la paginación te haga caso y ordene según los parámetros establecidos.</p>

<p>Si recuerdas <a href="http://laravel.com/docs/pagination" rel="nofollow external" title="Abrir documentación sobre la paginación">la documentación de Laravel</a>, para hacer la paginación de elementos debes hacer algo así (los ejemplos a continuación son de un controlador):</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">paginate</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">View</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">'posts.admin.index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">'posts'</span><span class="p">,</span> <span class="nv">$posts</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Éste método <a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Database/Eloquent/Builder.php" rel="nofollow external" title="Ver en github"><code class="highlighter-rouge">paginate()</code></a> forma parte del <code class="highlighter-rouge">Builder</code> de Eloquent, así que también habrá que extenderlo si quieres que la paginación tome parámetros adicionales de la URL para ordenar los resultados.</p>

<p>Si en lugar de paginar como en el ejemplo anterior lo hubiera hecho así:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Db</span><span class="o">::</span><span class="na">table</span><span class="p">(</span><span class="s1">'posts'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">(</span><span class="s1">'15'</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">View</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">'posts.admin.index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">'posts'</span><span class="p">,</span> <span class="nv">$posts</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>En vez de modificar el Builder de Eloquent tendrías que modificar el <a href="https://github.com/laravel/framework/tree/a54dda66de814f8c2085e71c69e44e91f1b46a9c/src/Illuminate/Database/Query/Builder.php#L1394" rel="nofollow external" title="Ver en github">Builder de queries</a>. Aun así, en este tutorial me centraré en el método <code class="highlighter-rouge">paginate()</code> del Builder de Eloquent (primer ejemplo).</p>

<p>No obstante, el Builder de Eloquent no se carga igual que el paginador. Éste está inyectado en los modelos, por lo que podrías modificar el método <code class="highlighter-rouge">paginate</code> directamente redefiniéndolo en el modelo deseado, ya que éste extiende de Eloquent:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="c1">// app/models/Post.php
</span><span class="k">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="nx">Eloquent</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">paginate</span><span class="p">(</span><span class="nv">$perPage</span><span class="p">,</span> <span class="nv">$columns</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'*'</span><span class="p">),</span> <span class="nv">$orderBy</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
  <span class="p">{</span>
    <span class="c1">// nuestros cambios para ordenar por columna
</span>  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Fácilmente puedes añadirlo en un nuevo modelo padre del cual extender, por ejemplo <code class="highlighter-rouge">AppModel</code> (ya que digo que vengo de CakePHP, voy a demostrarlo):</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="c1">// app/models/AppModel.php
</span><span class="k">class</span> <span class="nc">AppModel</span> <span class="k">extends</span> <span class="nx">Eloquent</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">paginate</span><span class="p">(</span><span class="nv">$perPage</span><span class="p">,</span> <span class="nv">$columns</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'*'</span><span class="p">),</span> <span class="nv">$orderBy</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
  <span class="p">{</span>
    <span class="c1">// nuestros cambios para ordenar por columna
</span>  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// app/models/Post.php
</span><span class="k">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="nx">AppModel</span>
<span class="p">{</span>

<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Pero esto en realidad no sería muy reusable, así que en su lugar, y ya que Laravel está pensado para ser utilizado con PHP &gt;= 5.4, lo que harás será crear un <a href="http://www.php.net/manual/es/language.oop5.traits.php" rel="nofollow external" title="Ver en php.net">trait</a>.</p>

<p>Habiendo creado el trait simplemente habrá que indicarlo en aquellos modelos donde quieras utilizarlo:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="nx">Eloquent</span>
<span class="p">{</span>
  <span class="k">use</span> <span class="nx">OrderBy</span><span class="p">;</span> <span class="c1">// donde OrderBy es el nombre que has puesto al trait
</span><span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="los-cambios">Los cambios</h2>

<p>Confiando en que has entendido algo de lo que he explicado hasta ahora, resumiré los cambios a hacer y enlazaré hacia los ficheros que <a href="https://github.com/elboletaire/laravel-utils-and-extensions" rel="external" title="Ver proyecto en github">he publicado en github</a>.</p>

<p>Yo tengo todas mis extensiones dentro del directorio <code class="highlighter-rouge">app/library/Minombre/Extensions</code>, pero tienes que poder ponerlas en cualquier directorio que cargue clases Laravel siempre y cuando respetes los <i>namespaces</i>.</p>

<h3 id="yendo-al-grano">Yendo al grano</h3>

<p>Si quieres ahorrarte el proceso que viene a continuación <a href="https://github.com/elboletaire/laravel-utils-and-extensions" rel="external" title="Ver proyecto en github">puedes añadir mi proyecto</a> como un submódulo de tu proyecto fácilmente:</p>

<div class="language-bash no-line-numbers highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>git submodule add https://github.com/elboletaire/laravel-utils-and-extensions.git app/library/Elboletaire
</pre></td></tr></tbody></table>
</div>
</div>

<p>Si no utilizas git <a href="https://github.com/elboletaire/laravel-utils-and-extensions/archive/master.zip" rel="nofollow">descarga directamente el zip de github</a> y descomprime los contenidos del fichero en un nuevo directorio <code class="highlighter-rouge">app/library/Elboletaire</code>.</p>

<h3 id="el-método-sort">El método <code class="highlighter-rouge">sort</code></h3>

<p>Volviendo al resumen, tienes que crear tu propio <a href="https://github.com/elboletaire/laravel-utils-and-extensions/blob/master/Extensions/Pagination/PaginationServiceProvider.php" rel="nofollow external" title="Ver en github"><code class="highlighter-rouge">PaginationServiceProvider</code></a> para en él cargar un nuevo <a href="https://github.com/elboletaire/laravel-utils-and-extensions/blob/master/Extensions/Pagination/Environment.php" rel="nofollow external" title="Ver en github"><code class="highlighter-rouge">Environment</code></a> que finalmente será quien cargue el <a href="https://github.com/elboletaire/laravel-utils-and-extensions/blob/master/Extensions/Pagination/Paginator.php" rel="nofollow external" title="Ver en github"><code class="highlighter-rouge">Paginator</code></a>.</p>

<p>Es en ésta última clase <code class="highlighter-rouge">Paginator</code> donde deberás definir el método sort y otros métodos necesarios para que éste funcione correctamente. Como digo muy a menudo, el código habla por sí solo, así que no me centraré en explicarlo.</p>

<p>Una vez has creado tus ficheros (con su contenido, evidentemente) tienes que modificar el array de <code class="highlighter-rouge">providers</code> para que cargue tu <code class="highlighter-rouge">PaginationServiceProvider</code> en lugar de el de Laravel:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="k">return</span> <span class="k">array</span><span class="p">(</span>
  <span class="c1">// [...]
</span>
  <span class="s1">'providers'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// reemplazas el original
</span>    <span class="c1">// 'Illuminate\Pagination\PaginationServiceProvider',
</span>    <span class="c1">// por el tuyo
</span>    <span class="s1">'Elboletaire\Extensions\Pagination\PaginationServiceProvider'</span>
  <span class="p">)</span>

  <span class="c1">// [...]
</span><span class="p">);</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="el-método-paginate">El método <code class="highlighter-rouge">paginate</code></h3>

<p>Crea un trait en el mismo directorio donde has creado los ficheros anteriores; éste será el encaragdo de modificar la consulta hacia la base de datos a partir de los datos recibidos vía <code class="highlighter-rouge">GET</code>.</p>

<p>Puedes ponerle el nombre que quieras, al mío lo he llamado <a href="https://github.com/elboletaire/laravel-utils-and-extensions/blob/master/Extensions/Pagination/PaginatorSort.php" rel="nofollow external" title="Ver en github"><code class="highlighter-rouge">PaginatorSort</code></a>, pero como digo es cuestión de gustos.</p>

<p>Una vez creado y hecha la lógica sólo hay que llamarlo desde el modelo que quieras que tenga ordenación por columnas:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="nx">Eloquent</span>
<span class="p">{</span>
  <span class="k">use</span> <span class="nx">Elboletaire\Extensions\Pagination\PaginatorSort</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="añadiendo-paginación">Añadiendo paginación</h3>

<p>Hechos estos dos sencillos pasos, ya puedes añadir a tus vistas los enlaces para poder ordenar por columna:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;th&gt;</span>{{ $posts-&gt;sort('id') }}<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;th&gt;</span>{{ $posts-&gt;sort('name', 'Nombre') }}<span class="nt">&lt;/th&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y mientras tu controlador (o ruta) cargue los datos de la paginación <strong>mediante el modelo</strong> (al que previamente has cargado el trait creado):</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">paginate</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">View</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">'posts.admin.index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">'posts'</span><span class="p">,</span> <span class="nv">$posts</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>…la paginación estaría funcionando. <i>Congrats my friend</i> :D</p>

<p>Si quieres puedes especificar el orden por defecto pasándolo como tercer parámetro:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">paginate</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">'name asc'</span><span class="p">);</span>
  <span class="c1">// o bien pasado como array:
</span>  <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">paginate</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'direction'</span> <span class="o">=&gt;</span> <span class="s1">'asc'</span><span class="p">,</span>
    <span class="s1">'sort'</span>      <span class="o">=&gt;</span> <span class="s1">'name'</span>
  <span class="p">));</span>

  <span class="k">return</span> <span class="nx">View</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">'posts.admin.index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">'posts'</span><span class="p">,</span> <span class="nv">$posts</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="fin-referencias-y-esas-cosas">Fin [referencias y esas cosas]</h2>

<p>Si eres lector asiduo (aunque aquí no nos vaya mucho esto de la asiduidad..) sabrás que estoy abierto a que me preguntéis lo que sea —otra cosa es si sabré contestar…</p>

<p>El repositorio está colgado en github, entre otras cosas, para que la gente colabore; así que si te animas ya sabes.</p>

<blockquote>
  <p><strong>Más información y fuentes:</strong></p>

  <ul>
    <li><a rel="nofollow external" href="http://laravel.com/docs">Documentación de Laravel</a></li>
    <li><a rel="nofollow external" href="http://www.php.net/manual/en/language.oop5.traits.php">Documentación acerca de los traits</a></li>
    <li><a rel="nofollow external" href="http://forums.laravel.io/viewtopic.php?pid=39576#p39576">How to extend Illuminate\Database\Eloquent\Builder class?</a></li>
  </ul>
</blockquote>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry no-line-numbers">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2013-12-07T21:45:02+01:00">
          <a href="//elboletaire.github.io/racotecnic/2013/12/tema-de-oh-my-zsh-inspirado-en-af-magic-y-posh-git/">December 07, 2013</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2013/12/tema-de-oh-my-zsh-inspirado-en-af-magic-y-posh-git/" rel="bookmark" title="Tema de oh my zsh inspirado en af-magic y posh-git" itemprop="url">Tema de oh my zsh inspirado en af-magic y posh-git</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Hoy me he entretenido en crear un tema para zsh inspirado en <code class="highlighter-rouge">af-magic</code> pero añadiendo los <i>features</i> de <a title="Ir al proyecto posh-git" href="https://github.com/dahlbyk/posh-git" rel="nofollow external">posh-git</a>, mostrando información detallada sobre el estado actual de git (ficheros modificados, creados, etc).</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-21.28.46.png"><img class="aligncenter size-full wp-image-2230" alt="oh my zsh racotecnic theme" src="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-21.28.46.png" width="595" height="334" /></a></p>
<ul style="text-align:center; list-style: none; font-size: 140%; text-transform: uppercase; margin: 25px 0">
<li style="display:inline; margin-right: 20px; padding: 0"><a href="https://github.com/elboletaire/zsh-theme-racotecnic/archive/master.zip" rel="nofollow">Descargar zip</a></li>
<li style="display:inline; padding: 0"><a href="https://github.com/elboletaire/zsh-theme-racotecnic" rel="external nofollow">Ir a github</a></li>
</ul>

<p>Muestra los datos <a title="Detalles sobre posh-git" href="https://github.com/dahlbyk/posh-git#the-prompt" rel="nofollow external">exactamente igual que lo hace posh-git</a>, salvo por que me he comido los ceros (no me parecen necesarios) y le he hecho un pequeño añadido: en caso de tener cambios <i>stashed</i> mostrará un asterisco en el lateral derecho:</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/git_stash_zsh.png"><img class="aligncenter size-full wp-image-2240" style="height: auto;" alt="git stash racotecnic zsh theme" src="//elboletaire.github.io/racotecnic/uploads/2013/12/git_stash_zsh.png" width="658" height="250" /></a></p>

<p>Para instalarlo simplemente <a title="Descargar tema zsh de racotecnic" href="https://github.com/elboletaire/zsh-theme-racotecnic/raw/master/racotecnic.zsh-theme" rel="nofollow external">tenéis que descargarlo</a> en vuestro directorio <code class="highlighter-rouge">.oh-my-zsh/themes</code> y modificar la variable <code class="highlighter-rouge">ZSH_THEME</code> para cargar el template:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nv">ZSH_THEME</span><span class="o">=</span><span class="s1">'racotecnic'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Guardáis el fichero <code class="highlighter-rouge">.zshrc</code> y lo recargáis para que surta efecto:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nb">source</span> ~/.zshrc
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ea :)</p>

<p>PD. No dudéis en colaborar en github o comentármelo por aquí si se os ocurre cualquier mejora.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry no-line-numbers">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2013-12-07T01:09:15+01:00">
          <a href="//elboletaire.github.io/racotecnic/2013/12/instalar-zsh-con-oh-my-zsh-y-enlaces-en-menus-contextuales-en-windows-utilizando-cygwin/">December 07, 2013</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~9 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2013/12/instalar-zsh-con-oh-my-zsh-y-enlaces-en-menus-contextuales-en-windows-utilizando-cygwin/" rel="bookmark" title="Instalar zsh en Windows con "oh my zsh" y enlace en menús contextuales utilizando cygwin" itemprop="url">Instalar zsh en Windows con "oh my zsh" y enlace en menús contextuales utilizando cygwin</a></h1>
    
  </header>
  <div class="entry-content">
    <p><a title="github.com/dahlbyk/posh-git" href="https://github.com/dahlbyk/posh-git" rel="external nofollow">Posh-git</a> mola pero si, como yo, sois algo amantes de linux y encima habéis probado zsh sabréis que <b>zsh mola mucho más</b>.</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-23.08.16.png"><img src="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-23.08.16.png" alt="zsh under windows using cygwin" width="644" height="236" class="aligncenter size-full wp-image-2242" style="height:auto" /></a></p>

<p>Podemos <strong>instalar zsh en windows</strong> utilizando cygwin de manera bastante sencilla y <b>con un par</b> de cambios en el registro de windows tendremos un enlace en el menú contextual para abrir zsh en cualquier directorio rápidamente.</p>

<p><a style="display: block; text-align: center;" href="//elboletaire.github.io/racotecnic/uploads/2013/12/obre-zsh.png"><img class="aligncenter size-full wp-image-2163" alt="obre zsh aquí" src="//elboletaire.github.io/racotecnic/uploads/2013/12/obre-zsh.png" width="433" height="131" /></a></p>

<p><a id="more"></a><a id="more-2154"></a></p>

<p><b>Antes de empezar tenéis que tener en cuenta lo siguiente</b>: a la hora de crear el enlace del menú contextual hay que crear dos entradas en el registro de windows, una para cuando hacemos clic derecho sobre un directorio seleccionado (accederemos a dicho directorio) y la otra para cuando hacemos clic derecho sin tener un directorio seleccionado (accederemos al directorio actual).</p>

<p>¿Porqué os digo esto? Porque para poder crear la primera entrada en el registro (hacer clic derecho sobre un directorio seleccionado) <strong>sólo podemos hacerlo si instalamos la versión de cygwin de 32 bits</strong> ya que no hay manera de hacerlo si no es con el paquete <code class="highlighter-rouge">chere</code>.</p>

<p>Es decir que si no queréis dicha opción del menú contextual podéis optar por descargar la versión de 64 bits en lugar de la de 32<del>, aunque no os lo recomiendo ya que yo no he logrado hacer funcionar del todo bien lo del menú contextual en dicha versión (y el tutorial está enfocado a la versión de 32 bits, vamos que <em>me limpio las manos</em> con la de 64)</del>. Chere ya está disponible para 64 bits así que no tendréis problema si lo hacéis con el instalador de x64.</p>

<p><a title="Descargar cygwin x32" href="http://cygwin.com/install.html" rel="nofollow">Descargad cygwin</a> e instalad con normalidad (siguiente, siguiente…) hasta que lleguéis al listado de paquetes a instalar.</p>

<p><a style="display: block; text-align: center;" href="//elboletaire.github.io/racotecnic/uploads/2013/12/packages.png"><img class="aligncenter size-full wp-image-2156" alt="cygwin packages" src="//elboletaire.github.io/racotecnic/uploads/2013/12/packages.png" width="546" height="399" /></a></p>

<p>Cuando lleguéis al listado utilizad el buscador y marcad para descargar los siguientes paquetes:</p>

<ul>
  <li><b>chere</b> necesario para poder abrir la ubicación del directorio seleccionado. Ubicado en «Shells». No es necesario que la instaléis si no queréis abrir el menú contextual al hacer clic derecho sobre un directorio.</li>
  <li><b>zsh</b> ubicado en «Shells».</li>
  <li><b>curl</b> o <b>wget</b> cualquiera nos servirá para instalar oh-my-zsh. Ambos ubicados en «Web».</li>
  <li><b>git</b> necesario para instalar oh-my-zsh. Ubicado en «Devel».</li>
  <li><b>ncurses</b> necesario desde cygwin 1.7, ya que no viene incluido con el sistema base. Este paquete tiene ejecutables de sistema necesarios por el instalador de oh-my-zsh.</li>
</ul>

<p>Y terminad la instalación (siguiente, siguiente…).</p>

<p>Ahora vamos a <a href="https://github.com/robbyrussell/oh-my-zsh" title="Página del proyecto oh-my-zsh" rel="external nofollow">instalar oh-my-zsh</a>. Para ello abrid una consola de cygwin. Si durante la instalación desmarcasteis el checkbox para añadir el acceso directo podéis ejecutar la consola accediendo a la carpeta de instalación de cygwin y ejecutando el fichero <code class="highlighter-rouge">Cygwin.bat</code>.</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/curl.png" style="display:block;text-align:center"><img src="//elboletaire.github.io/racotecnic/uploads/2013/12/curl.png" alt="bash init" width="595" height="232" class="aligncenter size-full wp-image-2172" /></a></p>

<p>En la consola ejecutad lo siguiente:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c"># Si hemos instalado curl</span>
curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh
<span class="c"># Si hemos instalado wget</span>
wget --no-check-certificate https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O - | sh
</pre></td></tr></tbody></table>
</div>
</div>

<p>Esto instalará oh-my-zsh en vuestro directorio <code class="highlighter-rouge">$HOME</code> de cygwin (exactamente igual que en linux).</p>

<p>Ahora que tenemos oh-my-zsh instalado pondremos zsh como la consola por defecto para nuestro usuario.</p>

<p>Para ello hay que modificar el fichero <code class="highlighter-rouge">/etc/passwd</code>. Podéis hacerlo con vuestro editor favorito (a.k.a. sublime text, geany, notepad++…) accediendo al directorio de instalación de cygwin/etc y modificando el fichero passwd o si lo preferís podéis hacerlo mediante la propia consola de cygwin, utilizando el editor vi:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>vi /etc/passwd
</pre></td></tr></tbody></table>
</div>
</div>

<p>Buscáis vuestro usuario y al final de la línea substituís <code class="highlighter-rouge">/bin/bash</code> por <code class="highlighter-rouge">/bin/zsh</code> .</p>

<p>Si ejecutáis de nuevo el terminal de cygwin debería mostraros una consola de zsh como esta:</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/zsh-init.png"><img src="//elboletaire.github.io/racotecnic/uploads/2013/12/zsh-init.png" alt="zsh-init" width="595" height="232" class="aligncenter size-full wp-image-2174" /></a></p>

<p><b>Ojo:</b> Si habéis ejecutado la consola utilizando <code class="highlighter-rouge">Cygwin.bat</code> tendréis que modificar dicho fichero antes de ejecutarlo para modificar ahí el terminal por defecto, ya que éste fichero ignora la configuración en <code class="highlighter-rouge">/etc/passwd</code>. Para ello, editadlo y reemplazad <code class="highlighter-rouge">bash</code> por <code class="highlighter-rouge">zsh</code>, dejándolo así:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre>@echo off

C:
chdir C:\cygwin\bin

zsh --login -i
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ya tenemos zsh instalado y corriendo como si de una instalación de linux se tratara. Podemos modificar el fichero <code class="highlighter-rouge">.zshrc</code> para cambiar opciones como el tema o los plugins que zsh debería cargar al iniciar. A mi me gusta especialmente <a href="http://www.racotecnic.com/2013/12/tema-de-oh-my-zsh-inspirado-en-af-magic-y-posh-git/">el tema <del><code class="highlighter-rouge">af-magic</code></del> racotecnic</a>:</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-21.28.46.png"><img src="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-21.28.46.png" alt="oh my zsh racotecnic theme" width="595" height="334" class="aligncenter size-full wp-image-2230" /></a></p>

<p>Bien, ahora que tenemos el terminal configurado es hora de añadir el acceso directo en nuestro menú contextual.</p>

<p>Si habéis instalado cygwin en la raíz de C:\ podéis <a href="//elboletaire.github.io/racotecnic/uploads/2013/12/minTTY_zsh.zip">descargar este fichero</a> para <strong>instalar rápidamente el acceso directo del menú contextual. Ojo que está en catalán</strong> así que si queréis cambiarlo tendréis que abrirlo con un editor de texto y cambiar el «Obre zsh» por «Abrir zsh».</p>

<p>Si queréis ver paso por paso cómo he creado el acceso directo en el menú contextual seguid los pasos que os describo a continuación. En caso contrario, ya habéis terminado de instalar zsh con oh-my-zsh en windows :D.</p>

<h4 id="para-los-curiosos">Para los curiosos</h4>

<p>Ejecutad el editor de registro de windows (windows + R y luego <code class="highlighter-rouge">regedit</code>) y desplegad el primer registro <code class="highlighter-rouge">HKEY_CLASSES_ROOT</code>.</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-06-21.41.20.png"><img src="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-06-21.41.20.png" alt="HKEY_CLASSES_ROOT" width="670" height="384" class="aligncenter size-full wp-image-2180" style="height:auto" /></a></p>

<p>En él buscad el subregistro <code class="highlighter-rouge">Directory</code>. De aquí nos interesan dos registros: <code class="highlighter-rouge">Background</code> y <code class="highlighter-rouge">shell</code>. En el primero crearemos el registro para abrir un terminal en el directorio actual y el segundo nos servirá para cuando hagamos clic derecho sobre un directorio (y siempre que éste esté seleccionado).</p>

<p>Desplegad <code class="highlighter-rouge">Background</code> y en <code class="highlighter-rouge">shell</code> haced clic derecho / Nuevo / Clave y le ponéis un nombre como <code class="highlighter-rouge">minTTYzsh</code>. En la columna de la derecha hacéis doble clic sobre <code class="highlighter-rouge">(Predeterminado)</code> y escribís el texto que queráis mostrar en el menú contextual, yo tengo puesto «Obre zsh».</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-00.16.59.png"><img src="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-00.16.59.png" alt="minTTYzsh key" width="604" height="285" class="aligncenter size-full wp-image-2197" /></a></p>

<p>Si queréis añadirle un icono a la opción del menú desplegable, en la columna de la derecha hacéis clic derecho / Nuevo / Valor de cadena y como nombre le ponéis «Icon». Hacéis doble clic sobre él e indicáis la ruta hacia un icono o un ejecutable (.exe) que contenga iconos. Para indicar el índice de un icono (en caso de que el .ico o el .exe tenga múltiples iconos) tenéis que indicarlo separado de una coma: <code class="highlighter-rouge">C:\\cygwin\\cygwin.ico,1</code>.</p>

<p>En nuestro caso indicaremos el icono de mintty, ya que es el ejecutable que utilizaremos como consola: <code class="highlighter-rouge">C:\\cygwin\\bin\\mintty.exe</code></p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-00.21.35.png"><img src="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-00.21.35.png" alt="mintty icon" width="645" height="269" class="aligncenter size-full wp-image-2199" /></a></p>

<p>Haced clic derecho en el escritorio y podréis comprobar cómo aparece ya la opción creada en el menú contextual. Pero dicha opción no tiene comando asociado, así que vamos a creárselo.</p>

<p>En la columa de la izquiera del editor de registro de windows hacéis clic derecho sobre la clave creada anteriormente <code class="highlighter-rouge">minTTYzsh</code> y seleccionáis Nuevo / Clave y le ponéis como nombre <code class="highlighter-rouge">command</code>.</p>

<p>Después de hacer esto hacemos doble clic en el nombre de la columna de la derecha, que aparecerá como (Predeterminado). En el editor que nos aparecerá introducimos lo siguiente: <code class="highlighter-rouge">C:\\cygwin\\bin\\mintty.exe --size=120,40 /bin/env CHERE_INVOKING=1 /bin/zsh -l</code></p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-00.26.44.png"><img src="//elboletaire.github.io/racotecnic/uploads/2013/12/Captura-de-pantalla-2013-12-07-00.26.44-1024x259.png" alt="minTTYzsh command" width="1024" height="259" class="aligncenter size-large wp-image-2201" style="height:auto" /></a></p>

<p>Haced clic derecho de nuevo en el escritorio y comprobad que funciona el enlace del menú contextual. Si habéis seguido los pasos con todo detalle debería de funcionar sin problemas.</p>

<p><a style="display: block; text-align: center;" href="//elboletaire.github.io/racotecnic/uploads/2013/12/obre-zsh.png"><img class="aligncenter size-full wp-image-2163" alt="obre zsh aquí" src="//elboletaire.github.io/racotecnic/uploads/2013/12/obre-zsh.png" width="433" height="131" /></a></p>

<p>Para añadir la entrada de registro que nos permitirá abrir la consola en un directorio seleccionado seguid los pasos de antes pero en lugar de crear la clave <code class="highlighter-rouge">minTTYzsh</code> en <code class="highlighter-rouge">Directory/Background/shell</code> deberéis crearla directamente en <code class="highlighter-rouge">Directory/shell</code> y en el momento de indicar el comando a ejecutar tendréis que introducir lo siguiente:</p>

<p><code class="highlighter-rouge">C:\\cygwin\\bin\\mintty.exe --size=120,40 /bin/env /bin/xhere /bin/zsh '%L'</code></p>

<p>En el caso anterior también podríamos haber iniciado la consola indicando <code class="highlighter-rouge">/bin/xhere</code> pero tengo la sensación que del otro modo es algo más rápido al cargar (notaréis que en este caso al ejecutar el terminal empieza con «<code class="highlighter-rouge">Starting /bin/zsh</code>»)</p>

<p>El parámetro <code class="highlighter-rouge">--size</code> lo indico para hacer algo más grande el terminal de minTTY ya que por defecto lo encuentro algo pequeño.</p>

<p>En todo caso, <strong>ya tenéis zsh con oh-my-zsh funcionando bajo windows y con la opción en los menús contextuales</strong> :D</p>

<p><strong>Update a 10 de enero de 2014:</strong> Acabo de encontrar en github un script en bash que debería instalar los paquetes necesarios en cygwin y configurarlo para que funcione con zsh. No lo he probado pero no pinta nada mal, podéis echarle un ojo desde aquí: <a href="https://github.com/haithembelhaj/oh-my-cygwin" rel="nofollow external">https://github.com/haithembelhaj/oh-my-cygwin</a>.</p>

<p><strong>Update a 15 de febrero de 2014:</strong> En windows 8.1 he tenido problemas para lograr tener oh-my-zsh funcionando. El terminal estaba escupiendo un montón de código y me daba el error <i>compdef: unknown command or service: git</i> repetidas veces antes de, finalmente, mostrar el prompt. <a href="https://github.com/robbyrussell/oh-my-zsh/issues/630" rel="nofollow external">En este post</a> he encontrado la solución y ha sido tan sencillo como hacer lo siguiente:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c"># accedemos a nuestro directorio home</span>
<span class="nb">cd</span>
<span class="c"># listamos el directorio en busca del fichero .zcompdump</span>
ls -lha
</pre></td></tr></tbody></table>
</div>
</div>

<p>Seguramente veáis un fichero llamado <code class="highlighter-rouge">.zcompdump-VuestroUsuario</code>. Lo que está sucediendo es que, por motivos que desconozco, zsh va a buscar ese fichero en lugar de el fichero .zcompdump. Ahora que sabemos el nombre del fichero, solucionemos el problema:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>compinit
<span class="c"># zsh compinit: insecure directories, run compaudit for list.</span>
<span class="c"># Ignore insecure directories and continue [y] or abort compinit [n]? y</span>
cat .zcompdump &gt; .zcompdump-VuestroUsuario
</pre></td></tr></tbody></table>
</div>
</div>

<p>Aseguraros de que <code class="highlighter-rouge">.zcompdump-VuestroUsuario</code> coincida exactamente con el fichero que antes habéis visto listado. Cerrad el terminal y volved a abrirlo y debería de estar solucionado.</p>

<blockquote>
  <p><strong>Más información y fuentes:</strong></p>

  <ul>
    <li><a href="http://unix.stackexchange.com/a/18411/10942" rel="nofollow external">Best way to use a shell with Cygwin in Windows 7 - Unix &amp; Linux Stack Exchange</a></li>
    <li><a href="http://www.iamntz.com/1059/frontend-developer/how-to-use-mintty-with-cygwin-by-default/" rel="nofollow external">How to use Mintty with Cygwin (by default)</a></li>
    <li><a href="http://www.typeof.co/post/a-better-terminal-for-windows" rel="external nofollow">A better terminal for Windows</a></li>
    <li><a href="https://github.com/haithembelhaj/oh-my-cygwin" rel="external nofollow">Oh-my-cygwin</a></li>
  </ul>
</blockquote>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    

    
    
      <li><strong class="current-page">1</strong></li>
    

    
    

    
    
    

    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/2/">2</a></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/3/">3</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="//elboletaire.github.io/racotecnic/page/23/">23</a></li>
    

    
    
      <li><a href="//elboletaire.github.io/racotecnic/page/2/" class="btn">Next</a></li>
    
  </ul>
</div>



</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Racó Tècnic. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="//elboletaire.github.io/racotecnic/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106861877-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>




</body>
</html>
