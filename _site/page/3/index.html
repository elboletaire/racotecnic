<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Racó Tècnic</title>
<meta name="description" content="Punt de trobada de coneixements">
<meta name="keywords" content="development, hardware, software, audio, video, mapping, php, bash, apache, nginx, cakephp, git">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg">

<meta name="twitter:title" content="Racó Tècnic">
<meta name="twitter:description" content="Punt de trobada de coneixements">
<meta name="twitter:creator" content="@racotecnic">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Racó Tècnic">
<meta property="og:description" content="Punt de trobada de coneixements">
<meta property="og:url" content="//elboletaire.github.io/racotecnic/page/3/">
<meta property="og:site_name" content="Racó Tècnic">





<link rel="canonical" href="//elboletaire.github.io/racotecnic/page/3/">
<link href="//elboletaire.github.io/racotecnic/feed.xml" type="application/atom+xml" rel="alternate" title="Racó Tècnic Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="//elboletaire.github.io/racotecnic/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="//elboletaire.github.io/racotecnic/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="//elboletaire.github.io/racotecnic/images/" alt="Racó Tècnic photo" class="author-photo">
					<h4>Racó Tècnic</h4>
					<p>A subproject from <a href="http://underave.net">underave.net</a> created by <a href="https://github.com/elboletaire">elboletaire</a> and maintained by many collaborators.</p>
				</li>
				<li><a href="//elboletaire.github.io/racotecnic/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:elboletaire@underave.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/racotecnic"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/racotecnic"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/elboletaire/racotecnic"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="//elboletaire.github.io/racotecnic/posts/">All Posts</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/tags/">All Tags</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/categories/">All Categories</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="https://github.com/elboletaire/racotecnic" target="_blank">Github</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="https://github.com/elboletaire/Watimage/blob/master/examples/files/LICENSE">elboletaire</a></div><!-- /.image-credit -->
  
    <div class="entry-image" style="background-image: url(//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg);">
      <img src="//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg" alt="">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Racó Tècnic</h1>
      <h2>Punt de trobada de coneixements</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2012-02-21T13:47:42+01:00">
          <a href="//elboletaire.github.io/racotecnic/2012/02/firefox-ha-muerto-y-el-proximo-sera-internet-explorer/">February 21, 2012</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2012/02/firefox-ha-muerto-y-el-proximo-sera-internet-explorer/" rel="bookmark" title="Firefox ha muerto y el próximo será Internet Explorer" itemprop="url">Firefox ha muerto y el próximo será Internet Explorer</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Hace ya un tiempo que Chrome superó las el número de usuarios de Firefox, y seguro que ya lo habéis visto de varias fuentes..</p>

<p><a href="http://www.extremetech.com/computing/116885-the-death-of-firefox">extremetech.com/computing/116885-the-death-of-firefox</a>
<a href="http://www.genbetadev.com/desarrollo-web/la-muerte-anunciada-de-firefox">genbetadev.com/desarrollo-web/la-muerte-anunciada-de-firefox</a></p>

<p><a href="http://www.extremetech.com/wp-content/uploads/2012/02/firefox-market-share-trend-640x374.jpg">
  <img src="http://www.extremetech.com/wp-content/uploads/2012/02/firefox-market-share-trend-640x374.jpg" alt="firefox-market-share-trend-640x374" />
</a></p>

<p>Lo que no se menciona, y que se puede observar fácilmente viendo las estadísticas de statscounter, es que Internet Explorer sigue éste mismo camino. Si miramos la gráfica podemos preveer fácilmente que en menos de medio año Chrome superaría Internet Explorer del mismo modo que lo hizo con Firefox.</p>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2012/02/StatCounter-browser-ww-monthly-201101-201201.jpg">
  <img src="//elboletaire.github.io/racotecnic/uploads/2012/02/StatCounter-browser-ww-monthly-201101-201201.jpg" alt="StatCounter-browser-ww-monthly-201101-201201" />
</a></p>

<p>Ésto, claro, sin tener en cuenta que pronto sacarán Internet Explorer 10 con su <em>nuevo y flagrante</em> Windows 8, cosa que podría ampliar el tiempo hasta finales de año.</p>

<p>Sea como sea… el caso es que Internet Explorer también tiene los días contados.. y no sabéis qué ganas tengo de que llegue ese día xDD</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2011-09-11T13:18:28+02:00">
          <a href="//elboletaire.github.io/racotecnic/2011/09/tomar-screenshots-capturas-de-pantalla-de-paginas-web-desde-la-consola-de-linux/">September 11, 2011</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2011/09/tomar-screenshots-capturas-de-pantalla-de-paginas-web-desde-la-consola-de-linux/" rel="bookmark" title="Tomar screenshots / capturas de pantalla de páginas web desde la consola de Linux" itemprop="url">Tomar screenshots / capturas de pantalla de páginas web desde la consola de Linux</a></h1>
    
  </header>
  <div class="entry-content">
    <p><a href="//elboletaire.github.io/racotecnic/uploads/2011/09/prova2.jpg">
  <img title="prova2" src="//elboletaire.github.io/racotecnic/uploads/2011/09/prova2-150x150.jpg" alt="" />
</a></p>

<p>Puede que os interese <strong>hacer capturas de pantalla de páginas web</strong> para poder <strong>mostrar una previsualización de una web</strong> en el apartado de links de vuestro site.</p>

<p>Para ello podéis utilizar alguno de los muchos servicios que corren por ahí —como <a href="http://www.websnapr.com/" rel="external nofollow">Websnapr</a>, <a href="http://www.webshotspro.com/" rel="external nofollow">WebShotsPro</a>, <a href="http://www.thumbalizr.com/" rel="external nofollow">thumbalizr</a>… O bien, si disponéis de un servidor dedicado (véase el que todos tenemos en la cocina o el baño) podéis crear vuestro propio script para tomar capturas de pantalla. Y ésto es a lo que vamos :P</p>

<p>Antes de empezar.. os advierto que he hecho las pruebas desde ubuntu server maverick, pero esto en teoría debería de ser más o menos igual para el resto de versiones (tanto desktop como server).</p>

<p>Si lo que queréis es hacer capturas de pantalla desde Windows, quizás os interese <a href="http://iecapt.sourceforge.net/" target="_blank">IECapt</a>.</p>

<p>Primero de todo, necesitamos unos cuantos paquetes esenciales…</p>

<ul>
  <li>Vnc4server</li>
  <li>Firefox</li>
  <li>ImageMagick</li>
</ul>

<p>Con VNCServer crearemos una instancia virtual en la que ejecutaremos Firefox para, posteriormente, tomar la captura de la pantalla con el método import de imagemagick.</p>

<p>Instalad los paquetes como haríais habitualmente…</p>

<div class="language-bash no-line-numbers highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>sudo apt-get install vnc4server firefox imagemagick
</pre></td></tr></tbody></table>
</div>
</div>

<p><a id="more"></a><a id="more-2011"></a></p>

<p>Si trabajáis con ubuntu server os va a doler porque firefox baja un huevo de paquetes.. pero es lo que hay U_U</p>

<p>Una vez instalados todos los paquetes, vamos a crear nuestro script para generar screenshots:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">display</span><span class="o">=</span><span class="s1">':23'</span>
<span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="s1">':23'</span>

vncserver -geometry 1280x1024 -depth 24 -name <span class="s1">'screenshoots'</span> <span class="nv">$display</span> &amp;amp;
<span class="c"># esperamos a que cargue vnc sin problemas...</span>
sleep 5
<span class="c"># cargamos firefox con una página en blanco</span>
firefox -display <span class="nv">$display</span> -width 1280 -height 1024 -url <span class="s1">'about:blank'</span> &amp;amp;

<span class="k">while </span><span class="nb">read</span> -a line ; <span class="k">do
  </span><span class="nb">echo</span> <span class="s1">'Carregant... ${line[1]}'</span>
  firefox -remote <span class="s1">'openURL(${line[1]})'</span>
  <span class="c"># o bien... firefox -display $display '${line[1]}'</span>
  sleep 5
  <span class="nb">echo</span> <span class="s1">'Desant... ${line[0]}.jpg'</span>
  import -window root <span class="s1">'${line[0]}'</span>.jpg
<span class="k">done</span> &lt; listado.txt

vncserver -kill <span class="nv">$display</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>¿Qué hace este script?</p>

<ol>
  <li>Crea una instancia de vncserver a 1280x1024px</li>
  <li>Carga firefox en esa instancia a la misma resolución</li>
  <li>Carga el fichero "listado.txt" (que ahora veremos) que contiene una línea con una palabra única seguida de un tabulador y una URL.</li>
  <li>Abre la página web que pertoque, esperando 5 segundos para dar tiempo a cargar</li>
  <li>Toma la captura de pantalla y la guarda con la palabra única y extensión .jpg</li>
</ol>

<p>El fichero “listado.txt” deberá estar en el mismo directorio que el script y ser en este formato:</p>

<div class="no-line-numbers highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>underave  http://www.underave.net
musicavermella  http://www.musicavermella.com
thefuture http://www.thefutureimperfect.com
snooppets http://www.snooppets.com
</pre></td></tr></tbody></table>
</div>
</div>

<p><strong>Es importante que este fichero tenga un salto de línea al final</strong>, sino la última url dará error.</p>

<p>Hecho esto ya debería de funcionar, simplemente ejecutad el script y veréis que en pantalla van saliendo los mensajes “Carregant” (Cargando) y “Desant” (Guardando) a medida que va avanzando en el listado.</p>

<p>Cuando tengáis los screenshots probablemente os daréis cuenta de que la imagen no es sólo de la página web, sino que también sale el navegador.</p>

<p>Para evitar esto he estado probando con parámetro <code class="highlighter-rouge">-screen</code> en lugar de <code class="highlighter-rouge">-window</code> pero supongo que no hace lo que pensaba que hacía xD. Así que la única solución que se me ocurre es que ejecutéis una instancia de VNCServer con firefox para poder ocultarle todas las barras posibles (la de navegación y la de favoritos).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="s1">':23'</span>
vncserver -geometry 1280x1024 -depth 24 -name <span class="s1">'screenshoots'</span> :23 &amp;amp;
firefox -display :23 -width 1280 -height 1024 -url <span class="s1">'about:blank'</span> &amp;amp;
</pre></td></tr></tbody></table>
</div>
</div>

<p>Una vez esté corriendo utilizad vuestro cliente de vnc habitual (yo utilizo <a href="http://www.tightvnc.com/" rel="nofollow external">TightVNC</a>) y conectaros para poder configurar firefox. En el caso de TightVNC, para indicar el display que estamos utilizando simplemente hay que concatenarlo al final de la ip o nombre de host ([IP|HOST]:DISPLAY), por ejemplo <code class="highlighter-rouge">192.168.1.2:23</code></p>

<p>Si además queréis que no se muestren las pestañas, abrid las opciones de firefox, buscad la opción que dice “Mostrar pestañas siempre” y desmarcadla. Ahora, para que esto funcione, tenemos que decirle a firefox que nos abra las nuevas ventanas en la ventana que esté abierta, ya que si nos abre una pestaña más nos mostrará de nuevo la barra de pestañas.</p>

<p>Si queréis evitar esto, en la barra de navegación (utilizad Control+L si os la habéis cargado ya) introducid la URL <code class="highlighter-rouge">about:config</code>, buscad el registro <code class="highlighter-rouge">browser.link.open_newwindow</code> y cambiad su valor de <strong>3</strong> a <strong>2</strong>.</p>

<p>Cerrad vuestro firefox con normalidad y volved a ejecutar el script para ver el resultado.</p>

<p>Pues ahí lo tenéis, utilizando un poco la imaginación, con algún cron y alguna clase en PHP podríais tener las miniaturas guardadas en vuestra web.</p>

<p>Si queréis recortar las imágenes para que no se vean el resto de bordes de firefox podéis tratar de utilizar el método <a href="http://www.imagemagick.org/script/mogrify.php?ImageMagick=th1vkjq027vromjp62lk806r03" rel="nofollow external">mogrify</a> de ImageMagick para hacer un crop.</p>

<p>O podéis hacerlo mediante PHP con alguna clase como <a title="Clase PHP para tratar imágenes (rotar, redimensionar, añadir marcas de agua..)" href="http://www.racotecnic.com/2011/04/clase-php-para-tratar-imagenes-rotar-redimensionar-anadir-marcas-de-agua/">Watimage</a> :D</p>

<blockquote>
  <p><strong>Fuentes…</strong></p>

  <ul>
    <li><a href="http://www.debian-administration.org/article/413/website_screenshot_server_on_debian_stable" rel="external nofollow">Website screenshot server on debian stable</a></li>
    <li><a href="http://stackoverflow.com/questions/2781000/processing-a-tab-delimited-file-with-shell-script-processing/2787573#2787573" rel="external nofollow">Processing a tab delimited file with shell script processing</a></li>
    <li><a href="https://developer.mozilla.org/en/Command_Line_Options#-ProfileManager" rel="external nofollow">Mozilla Firefox Command Line Options</a></li>
    <li><a href="http://www-archive.mozilla.org/unix/remote.html" rel="external nofollow">Remote control of unix mozilla</a></li>
    <li><a href="http://www.imagemagick.org/www/import.html" rel="external nofollow">ImageMagick import</a></li>
    <li><a href="http://forums.mozillazine.org/viewtopic.php?f=38&amp;t=1648545" rel="external nofollow">Firefox -remote using the <em>same</em> tab</a></li>
  </ul>
</blockquote>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2011-08-03T14:05:55+02:00">
          <a href="//elboletaire.github.io/racotecnic/2011/08/seguimos-aqui/">August 03, 2011</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2011/08/seguimos-aqui/" rel="bookmark" title="Seguimos aquí" itemprop="url">Seguimos aquí</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Aunque la cosa parezca estar un poco muerta, seguimos por aquí!</p>

<p>Como todos sabemos el tiempo es oro y el oro escasea últimamente así que por A o por B no hemos podido estar muy por actualizar el blog.</p>

<p>Yo mismo hace ya tiempo que tengo ganas de hacer algunas entradas de CakePHP, que desde las últimas que hice creo que he avanzado notablemente. Entre ellas me gustaría eliminar las que corren por aquí de subidas de ficheros, que me dan auténtico repelús cada vez que las veo.. y hacer una con un sencillo sistema de permisos para CakePHP pero con las ventajas de cualquier sistema de permisos avanzados (grupos de usuarios, permisos y demás).</p>

<p>Pues eso, pasad un buen verano y cuando volváis de vacaciones no olvidéis echar un vistazo al racó! :D</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2011-07-05T19:41:35+02:00">
          <a href="//elboletaire.github.io/racotecnic/2011/07/larga-vida-al-audioblog/">July 05, 2011</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2011/07/larga-vida-al-audioblog/" rel="bookmark" title="Larga vida al audioblog" itemprop="url">Larga vida al audioblog</a></h1>
    
  </header>
  <div class="entry-content">
    <p>El <a title="Maybe it's broken... :\' data-mce-href=" href="http://audioblog.underave.net" target="_blank">Audioblog*</a> de underave ha sido, hasta el día de hoy, un punto de encuentro donde algunos Djs y Productores se habrán dejado caer alguna que otra vez, ya fuera para leer novedades sobre música, o para inspirarse con alguna de las entradas reflexivas que contenía.</p>

<p>La inspiración por parte de los redactores colaboradores duró un año y desde entonces no se le ha dado más uso que el de consulta de sus antiguos contenidos.</p>

<p>Desde <a title="Underave" href="http://www.underave.net" target="_blank">underave</a> decidimos ya hace tiempo clausurar el blog por tal de poder destinar los recursos que ocupaba para otros fines.</p>

<p>Es por eso que hoy escribo esta entrada, para notificaros que todos los contenidos rescatables de dicho blog han sido traspasados a aquí, al Racó Tècnic, donde podréis consultarlos bajo la categoría “General”.</p>

<p>A continuación os dejo un listado con los artículos rescatados:</p>

<ul>
<li><a href="//elboletaire.github.io/racotecnic/2010/01/sintesis-fm-el-patito-feo-de-la-sintetizacion-parte-1/" rel="bookmark">Síntesis FM: El patito feo de la sintetización. (Parte 1)</a></li>
<li><a class="title" href="//elboletaire.github.io/racotecnic/2009/12/arnold-steiner-a-k-a-as1/" rel="bookmark">Arnold Steiner a.k.a AS1</a></li>
<li><a class="title" href="//elboletaire.github.io/racotecnic/2009/12/bandcamp-vende-tu-musica-a-tu-precio-justo/" rel="bookmark">Bandcamp: Vende tu música, a tu precio justo. :)</a></li>
<li><a class="title" href="//elboletaire.github.io/racotecnic/2009/07/overdub-el-primer-comic-didactico-para-productores/" rel="bookmark">OVERDUB: El primer cómic didáctico para productores</a></li>
<li><a class="title" href="//elboletaire.github.io/racotecnic/2009/04/la-musica-electronica-un-estat-emocional/" rel="bookmark">La música electrònica, un estat emocional</a></li>
<li><a class="title" href="//elboletaire.github.io/racotecnic/2009/04/hardcore-de-ayer-y-hoy/" rel="bookmark">Hardcore de ayer y hoy</a></li>
<li><a class="title" href="//elboletaire.github.io/racotecnic/2009/04/north-korean-speedcore/" rel="bookmark">North-Korean SPEEDCORE</a></li>
<li><a class="title" href="//elboletaire.github.io/racotecnic/2009/03/derechos-de-autor/" rel="bookmark">Derechos de Autor</a></li>
</ul>

<ul>
  <li>El enlace está puesto simbólicamente ya que voy a eliminar el blog ahora mismo xD</li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2011-04-16T21:03:12+02:00">
          <a href="//elboletaire.github.io/racotecnic/2011/04/clase-php-para-tratar-imagenes-rotar-redimensionar-anadir-marcas-de-agua/">April 16, 2011</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2011/04/clase-php-para-tratar-imagenes-rotar-redimensionar-anadir-marcas-de-agua/" rel="bookmark" title="Clase PHP para tratar imágenes (rotar, redimensionar, añadir marcas de agua..)" itemprop="url">Clase PHP para tratar imágenes (rotar, redimensionar, añadir marcas de agua..)</a></h1>
    
  </header>
  <div class="entry-content">
    <blockquote>
  <p><strong>Actualizado:</strong> Tanto la clase como este post han sido actualizados a fecha 14 de enero de 2012.</p>
</blockquote>

<p><img class="alignright size-full wp-image-1473" title="all_together" src="//elboletaire.github.io/racotecnic/uploads/2010/04/all_together.jpeg" alt="" width="259" height="258" /></p>

<p>Hace ya un tiempo publiqué (en inglés) un <a title="Watermark &amp; Image Component for CakePHP" href="http://www.racotecnic.com/2010/04/watermark-image-component-for-cakephp/"><strong>Componente para el tratamiento de imágenes en CakePHP</strong></a>. Hoy me he pasado un rato actualizándolo y aprovechando he decidido publicar una entrada con los cambios.</p>

<p>Aunque la he modificado considerablemente, he procurado no modificar el funcionamiento de ésta. Aquí vienen los cambios:</p>

<ul>
  <li>He eliminado el uso del método obsoleto mime_content_type.</li>
  <li>Ahora utilizo la clase Exception para tratar los errores.</li>
  <li>He añadido el método "flip" para hacer espejo de la imagen.</li>
  <li>He limpiado el código y he arreglado algún que otro fallo.</li>
  <li>Ahora las transparencias funcionan correctamente.</li>
</ul>

<p>Podéis descargar el proyecto desde GibHub:</p>

<p><a title="Descargar Watimage" href="https://github.com/elboletaire/Watimage/archives/master">https://github.com/elboletaire/Watimage/archives/master</a></p>

<p>Si queréis utilizar la clase desde CakePHP simplemente tenéis que descomentar la primera línea de la clase, donde dice <code class="highlighter-rouge">//Component extends Object</code>, y utilizarlo como un componente cualquiera.<a id="more"></a><a id="more-1892"></a></p>

<h3 id="aplicando-marcas-de-agua">Aplicando marcas de agua</h3>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2011/04/test1.png">
  <img title="test1" src="//elboletaire.github.io/racotecnic/uploads/2011/04/test1.png" alt="" />
</a></p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nv">$wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Watermark</span><span class="p">();</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">setImage</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">);</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">setWatermark</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'file'</span> <span class="o">=&gt;</span> <span class="s1">'watermark.png'</span><span class="p">,</span> <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="s1">'top right'</span><span class="p">));</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">applyWatermark</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">'test1.png'</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// handle error...
</span>  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="redimensionando">Redimensionando</h3>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2011/04/test2.png"><img class="size-full wp-image-1900 aligncenter" title="test2" src="//elboletaire.github.io/racotecnic/uploads/2011/04/test2.png" alt="" width="400" height="200" /></a></p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="nv">$wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Watermark</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">);</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">resize</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'resizecrop'</span><span class="p">,</span> <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">200</span><span class="p">)));</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">'test2.png'</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// handle error...
</span>  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="rotando">Rotando</h3>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2011/04/test3.png"><img class="size-full wp-image-1901 aligncenter" title="test3" src="//elboletaire.github.io/racotecnic/uploads/2011/04/test3.png" alt="" width="400" height="234" /></a></p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="nv">$wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Watermark</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">);</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">rotate</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">'test3.png'</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// handle error...
</span>  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="guardando-en-otros-formatos">Guardando en otros formatos</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="nv">$wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Watermark</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">'test4.jpg'</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// handle error...
</span>  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="espejo">Espejo</h3>

<p><a href="//elboletaire.github.io/racotecnic/uploads/2011/04/test5.png">
  <img title="test5" src="//elboletaire.github.io/racotecnic/uploads/2011/04/test5-176x300.png" alt="" />
</a></p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="nv">$wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Watermark</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">);</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">flip</span><span class="p">(</span><span class="s1">'vertical'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">'test5.png'</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// handle error...
</span>  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="todo-junto">Todo junto</h3>

<p><img title="test6" src="//elboletaire.github.io/racotecnic/uploads/2011/04/test6.png" alt="" /></p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="nv">$wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Watermark</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">,</span> <span class="s1">'watermark.png'</span><span class="p">);</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">resize</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'resizecrop'</span><span class="p">,</span> <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="mi">400</span><span class="p">));</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">flip</span><span class="p">(</span><span class="s1">'horizontal'</span><span class="p">);</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">rotate</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span>
<span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">applyWatermark</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">'test6.png'</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// handle error...
</span>  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$wm</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Gracias a <a href="#comment-36188">los comentarios de Francisco</a> he podido arreglar la clase para que trate correctamente las transparencias.</p>

<p>Si véis cualquier fallo hacédmelo saber o haced <a href="https://github.com/elboletaire/Watimage/fork" target="_blank">un fork en github directamente</a>!</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="//elboletaire.github.io/racotecnic/page/2/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="//elboletaire.github.io/racotecnic">1</a></li>
    

    
    

    
    
    

    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/2/">2</a></li>
      
    
      
        <li><strong class="current-page">3</strong></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/4/">4</a></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/5/">5</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="//elboletaire.github.io/racotecnic/page/23/">23</a></li>
    

    
    
      <li><a href="//elboletaire.github.io/racotecnic/page/4/" class="btn">Next</a></li>
    
  </ul>
</div>



</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Racó Tècnic. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="//elboletaire.github.io/racotecnic/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106861877-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>




</body>
</html>
