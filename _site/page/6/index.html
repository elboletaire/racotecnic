<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Racó Tècnic</title>
<meta name="description" content="Punt de trobada de coneixements">
<meta name="keywords" content="development, hardware, software, audio, video, mapping, php, bash, apache, nginx, cakephp, git">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg">

<meta name="twitter:title" content="Racó Tècnic">
<meta name="twitter:description" content="Punt de trobada de coneixements">
<meta name="twitter:creator" content="@racotecnic">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Racó Tècnic">
<meta property="og:description" content="Punt de trobada de coneixements">
<meta property="og:url" content="//elboletaire.github.io/racotecnic/page/6/">
<meta property="og:site_name" content="Racó Tècnic">





<link rel="canonical" href="//elboletaire.github.io/racotecnic/page/6/">
<link href="//elboletaire.github.io/racotecnic/feed.xml" type="application/atom+xml" rel="alternate" title="Racó Tècnic Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="//elboletaire.github.io/racotecnic/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="//elboletaire.github.io/racotecnic/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="//elboletaire.github.io/racotecnic/images/" alt="Racó Tècnic photo" class="author-photo">
					<h4>Racó Tècnic</h4>
					<p>A subproject from <a href="http://underave.net">underave.net</a> created by <a href="https://github.com/elboletaire">elboletaire</a> and maintained by many collaborators.</p>
				</li>
				<li><a href="//elboletaire.github.io/racotecnic/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:elboletaire@underave.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/racotecnic"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/racotecnic"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/elboletaire/racotecnic"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="//elboletaire.github.io/racotecnic/posts/">All Posts</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/tags/">All Tags</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/categories/">All Categories</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="https://github.com/elboletaire/racotecnic" target="_blank">Github</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="https://github.com/elboletaire/Watimage/blob/master/examples/files/LICENSE">elboletaire</a></div><!-- /.image-credit -->
  
    <div class="entry-image" style="background-image: url(//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg);">
      <img src="//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg" alt="">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Racó Tècnic</h1>
      <h2>Punt de trobada de coneixements</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-09-13T10:59:59+02:00">
          <a href="//elboletaire.github.io/racotecnic/2010/09/feliz-dia-del-programador/">September 13, 2010</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2010/09/feliz-dia-del-programador/" rel="bookmark" title="Feliz día del programador" itemprop="url">Feliz día del programador</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Hoy es el 256º día del año, de modo que –apropiadamente– se celebra el <a rel="nofollow" href="http://en.wikipedia.org/wiki/Programmers%27_Day"><strong>Día del programador</strong></a>. Según parece en Rusia además consiguieron que fuera oficialmente un día festivo para quienes se dedican a ello como profesión.</p>

<p>Extraído de: <a href="http://www.microsiervos.com/archivo/ordenadores/feliz-dia-programador.html" rel="nofollow external">microsiervos</a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-09-11T15:20:16+02:00">
          <a href="//elboletaire.github.io/racotecnic/2010/09/paginacion-ajax-con-historial-del-navegador-utilizando-jquery-y-cakephp-1-3-x/">September 11, 2010</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2010/09/paginacion-ajax-con-historial-del-navegador-utilizando-jquery-y-cakephp-1-3-x/" rel="bookmark" title="Paginación Ajax con historial del navegador utilizando jQuery y CakePHP 1.3.x" itemprop="url">Paginación Ajax con historial del navegador utilizando jQuery y CakePHP 1.3.x</a></h1>
    
  </header>
  <div class="entry-content">
    <p><a href="http://demos.racotecnic.com/tutorials/cake13/pags"><img class="size-full wp-image-1621 alignright" title="pagination" src="//elboletaire.github.io/racotecnic/uploads/2010/09/pagination.png" alt="" width="279" height="126" /></a>Voy a explicaros una manera sencilla de hacer la paginación de vuestras webs y aplicaciones hechas con CakePHP en Ajax utilizando jQuery y un plugin para que el historial del navegador funcione correctamente.</p>

<p>Para <a href="http://demos.racotecnic.com/tutorials/cake13/pags">mi ejemplo</a> he utilizado <a rel="nofollow external" href="http://github.com/cakephp/cakephp/downloads">CakePHP 1.3.3</a> y <a rel="nofollow external" href="http://jquery.com/">jQuery 1.4.2</a>. El plugin que comentaba anteriormente se llama jQuery History Plugin y lo podéis <a rel="external nofollow" href="http://github.com/tkyk/jquery-history-plugin">descargar de gitHub</a>.</p>

<p>Bien pues vamos a ello. Empecemos por el controlador. Simplemente tenéis que tener en cuenta que vamos a utilizar el <em>helper </em>de JavaScript, así que debemos activarlo:</p>

<p><a id="more"></a><a id="more-1614"></a></p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">PagsController</span> <span class="k">extends</span> <span class="nx">AppController</span>
<span class="p">{</span>
  <span class="k">var</span> <span class="nv">$helpers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Javascript'</span><span class="p">);</span>

  <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'pags'</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ya veis que no tiene ninguna complicación. La vista tampoco es nada del otro mundo:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><pre><span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"pags"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;thead&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;th&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;th&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">(</span><span class="s1">'title'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;th&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">(</span><span class="s1">'conent'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;th&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">(</span><span class="s1">'created'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;th&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">(</span><span class="s1">'modified'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/thead&gt;</span>
  <span class="nt">&lt;tbody&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$pags</span> <span class="k">as</span> <span class="nv">$pag</span> <span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$pag</span><span class="p">[</span><span class="s1">'Pag'</span><span class="p">][</span><span class="s1">'id'</span><span class="p">]</span> <span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$pag</span><span class="p">[</span><span class="s1">'Pag'</span><span class="p">][</span><span class="s1">'title'</span><span class="p">]</span> <span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$pag</span><span class="p">[</span><span class="s1">'Pag'</span><span class="p">][</span><span class="s1">'conent'</span><span class="p">]</span> <span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$pag</span><span class="p">[</span><span class="s1">'Pag'</span><span class="p">][</span><span class="s1">'created'</span><span class="p">]</span> <span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$pag</span><span class="p">[</span><span class="s1">'Pag'</span><span class="p">][</span><span class="s1">'modified'</span><span class="p">]</span> <span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">prev</span><span class="p">(</span><span class="s1">'« Anterior'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">'3'</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">numbers</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$paginator</span><span class="o">-&gt;</span><span class="na">next</span><span class="p">(</span><span class="s1">'Siguiente »'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/tbody&gt;</span>
<span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ajax-loader"</span><span class="nt">&gt;</span>
  <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">image</span><span class="p">(</span><span class="s1">'loader.gif'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'alt'</span> <span class="o">=&gt;</span> <span class="s1">'Cargando...'</span><span class="p">,</span> <span class="s1">'style'</span> <span class="o">=&gt;</span> <span class="s1">'display: none'</span><span class="p">))</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Bien, ya tenemos la parte sencilla. Vamos al intríngulis de la cuestión: el JavaScript (o el <em>jQuery</em>, mejor dicho..).</p>

<p>En la vista que tenemos creada, vamos a cargar <em>jQuery </em>y el plugin de historial, que debéis tener ya descargados en vuestra carpeta <em>js</em>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Javascript</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'jquery-1.4.2.min'</span><span class="p">,</span> <span class="s1">'jquery.history'</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y ahora, la paginación con Ajax. Debajo de la línea que acabamos de añadir para cargar <em>jQuery </em>y el <em>History plugin</em> añadid lo siguiente:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre><span class="nv">$script</span> <span class="o">=</span> <span class="s1">'
jQuery(function($) { // paso $ para no tener problemas con otros frameworks JS
  $.history.init(function(url) {
    if (url == "") url = "'</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'controller'</span> <span class="o">=&gt;</span> <span class="s1">'pags'</span><span class="p">,</span> <span class="s1">'action'</span> <span class="o">=&gt;</span> <span class="s1">'index'</span><span class="p">))</span> <span class="o">.</span> <span class="s1">'"; // si no recibimos URL tenemos que cargar el índice
    $(".ajax-loader img").fadeIn(); // mostramos el gif animado
    $.ajax({
      type: "GET",
      url: url,
      dataType: "html",
      success: function(data) {
        $("#pags").html($(data).find("#pags"));
        $(".ajax-loader img").fadeOut(); // ocultamos el gif animado
      }
    });
  });

  $("a[href*=/page:]").live("click", function(e) {
    $.history.load($(this).attr("href"));
    e.preventDefault(); // return false;
  });
});
'</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Javascript</span><span class="o">-&gt;</span><span class="na">codeBlock</span><span class="p">(</span><span class="nv">$script</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'inline'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">));</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Bien, ¿qué estamos haciendo aquí? Voy a explicarlo paso por paso.</p>

<p>Hay que tener en cuenta que el plugin de historial hace que el código sea un poco distinto a si no lo tuviéramos con dicho plugin, ya que el método <code class="highlighter-rouge">$.history.init()</code> es el que se encarga de cargar la página mediante Ajax cuando <code class="highlighter-rouge">$.history.load()</code> es instanciado.</p>

<p>Por esto, dentro del método <code class="highlighter-rouge">$.history.init()</code> ejecutamos nuestro método de carga mediante Ajax. En la primera línea le indicamos que si no recibe url ésta debe ser el índice de nuestra paginación. Sin esta línea cada vez que entraseis a la página raíz (sin <em>hash</em>) tendríais un error de JavaScript, además de que no funcionaría el historial con la primera página nunca.</p>

<p>Después de eso, llamamos al método <code class="highlighter-rouge">$.ajax()</code> para hacer nuestra petición Ajax. De aquí todo está explicado en la documentación, salvo esta línea:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">'#pags'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#pags'</span><span class="p">));</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Aquí indicamos que queremos reemplazar todo el contenido de la tabla <em>#pags</em> con ese mismo contenido de nuestra petición Ajax (de ahí el <code class="highlighter-rouge">$(data).find("#pags")</code> donde filtramos “#pags” de “data” [nuestra respuesta Ajax]).</p>

<p>Por último, en este trozo de código:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">'a[href*=/page:]'</span><span class="p">).</span><span class="nx">live</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'href'</span><span class="p">));</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">// return false;</span>
<span class="p">});</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Estamos indicando que siempre que se pulse un enlace que contenga en su ruta (href) “/page:” se dispare el método <code class="highlighter-rouge">$.history.load()</code>, al que le pasamos la url del enlace que estemos pulsando.</p>

<p>Utilizamos el método “live” de jQuery, ya que al reemplazar los botones de la tabla, sin <em>live</em>, éstos no funcionarían.</p>

<p>El <code class="highlighter-rouge">e.preventDefault();</code> equivale al típico <code class="highlighter-rouge">return false;</code> que utilizamos para evitar que el botón ejecute su método por defecto (cargar la página sin Ajax).</p>

<p>Pues ya está, de esta manera tan sencilla tenemos <strong>paginación Ajax con historial del navegador gracias a jQuery en nuestra aplicación CakePHP</strong>.</p>

<p>Podéis ver un ejemplo en la siguiente dirección: <a href="http://demos.racotecnic.com/tutorials/cake13/pags">http://demos.racotecnic.com/tutorials/cake13/pags</a>.</p>

<p>El problema de éste método de paginación es que, aunque le ahorramos tiempo de carga al cliente, nuestro servidor carga toda la página igualmente. Si quisierais reducir la carga de vuestro servidor con Ajax quizás deberíais ingeniároslas para cargar sólo esa parte de la vista y devolverla en formato XHTML en un JSON (o en un JSON directamente) y repoblar vuestra tabla con dicho resultado.</p>

<p>Algún día trataré de hacer un tutorial explicando esto con detalle ;)</p>

<blockquote>
  **Enlaces:**
  <ul>
    <li><a href="http://demos.racotecnic.com/tutorials/cake13/pags">Demo del tutorial</a></li>
    <li><a href="http://demos.racotecnic.com/tutorials/2010/09/cake_jquery_pagination.zip">Descarga .zip con los ficheros utilizados</a></li>
    <li><a rel="nofollow external" href="http://cakephp.org/">CakePHP</a></li>
    <li><a rel="nofollow external" href="http://jquery.com/">jQuery</a></li>
    <li><a rel="nofollow external" href="http://github.com/tkyk/jquery-history-plugin">jQuery History Plugin</a></li>
    <li><a href="http://www.preloaders.net">Cargadores Ajax (gifs animados)</a></li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>Edit:</strong> Cuando escribí esto no recordaba que la nueva versión de CakePHP lleva helpers para jQuery y para todo lo relacionado con Ajax. En cuanto pueda investigo cómo va el asunto y creo un tutorial con ello, pero mientras tanto…</p>

  <ul>
    <li><a href="http://book.cakephp.org/view/1592/Js" target="_blank" rel="nofollow">http://book.cakephp.org/view/1592/Js</a></li>
    <li><a href="http://book.cakephp.org/view/1434/HTML" target="_blank" rel="nofollow">hhttp://book.cakephp.org/view/1434/HTML</a>
Podéis ir echando un vistazo por vuestra cuenta :D</li>
  </ul>
</blockquote>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-09-07T11:53:19+02:00">
          <a href="//elboletaire.github.io/racotecnic/2010/09/mis-aplicaciones-basicas-neosy/">September 07, 2010</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
          
            neosy
          
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2010/09/mis-aplicaciones-basicas-neosy/" rel="bookmark" title="Mis aplicaciones básicas (Neosy)" itemprop="url">Mis aplicaciones básicas (Neosy)</a></h1>
    
  </header>
  <div class="entry-content">
    <p>¿A que se refiere esta entrada? Os voy a hacer una lista de las aplicaciones que instalo si o si en cualquier instalación nueva (para mi). Son las aplicaciones que considero esenciales para mi. Desde reproductores, programas ofimáticos… hasta navegadores.</p>

<p>Vamos a ello:</p>

<p><img class="size-thumbnail wp-image-248 alignleft" src="http://www.neosy.net/wp-content/uploads/2010/09/firefox-150x150.png" alt="" width="84" height="84" /><strong>Mozilla Firefox</strong></p>

<p>Básico, es lo primero que instalo (descargandolo desde Internet Explorer o desde el navegador por defecto del sistema).</p>

<p>Web: <a href="http://www.mozilla-europe.org/es/firefox/" target="_blank">http://www.mozilla-europe.org/es/firefox/</a></p>

<p><img src="http://www.neosy.net/wp-content/uploads/2010/09/spotify-L-1-150x150.jpg" alt="" width="84" height="84" /><strong>Spotify</strong></p>

<p>Mi reproductor de música. Atrás ha quedado Winamp y los demas. Casi toda la música que escucho la puedo encontrar aquí.</p>

<p>Web: <a href="http://www.spotify.com/es/" target="_blank">http://www.spotify.com/es/</a></p>

<p><img class="size-full wp-image-251 alignleft" src="http://www.neosy.net/wp-content/uploads/2010/09/vlc_icon.png" alt="" width="84" height="84" /><strong>VLC Media Player</strong></p>

<p>Indispensable. Es “el reproductor”. De todos los reproductores de video que he probado, el mejor, sin duda alguna.</p>

<p>Web: <a href="http://www.videolan.org/vlc/" target="_blank">http://www.videolan.org/vlc/</a></p>

<p><a id="more"></a><a id="more-1609"></a></p>

<p><img class="size-thumbnail wp-image-244 alignleft" src="http://www.neosy.net/wp-content/uploads/2010/09/openoffice-2-150x150.jpg" alt="" width="84" height="84" /><strong>OpenOffice</strong></p>

<p>La suite gratuita OpenOffice tiene todo lo que cualquier persona puede necesitar. Writer, Calc e Impress son los programas que uso.</p>

<p>Web: <a href="http://www.openoffice.org/" target="_blank">http://www.openoffice.org/</a></p>

<p><img class="size-thumbnail wp-image-250 alignleft" src="http://www.neosy.net/wp-content/uploads/2010/09/uTorrent_Logo_by_SnowShade-150x150.png" alt="" width="84" height="84" /><strong>uTorrent</strong></p>

<p>Despues de muchos años usando distintos programas para gestionar los torrents, creo que a dia de hoy este es el mejor.</p>

<p>Web: <a href="http://www.utorrent.com/" target="_blank">http://www.utorrent.com/</a></p>

<p><img class="alignleft size-full wp-image-243" src="http://www.neosy.net/wp-content/uploads/2010/09/images.jpg" alt="" width="84" height="84" /><strong>Foxit Reader</strong></p>

<p>Lector de PDF gratuito. Es mucho mas ligero, por lo que los documentos se abren bastante mas rápido que con Acrobat.</p>

<p>Web: <a href="http://www.foxitsoftware.com/pdf/reader/" target="_blank">http://www.foxitsoftware.com/pdf/reader/</a></p>

<p><img class="alignleft size-full wp-image-252" src="http://www.neosy.net/wp-content/uploads/2010/09/xampp.png" alt="" width="84" height="84" /><strong>Xampp</strong></p>

<p>En “dos clicks” tienes tu propio servidor en local para poder trastear. Apache, PHP, MySql. Recomendable para desarrolladores web.</p>

<p>Web: <a href="http://www.apachefriends.org/es/xampp.html" target="_blank">http://www.apachefriends.org/es/xampp.html</a></p>

<p><img class="alignleft size-thumbnail wp-image-246" src="http://www.neosy.net/wp-content/uploads/2010/09/568395745-150x150.png" alt="" width="84" height="84" /><strong>Notepad++</strong></p>

<p>Editor de código que soporta una gran cantidad de lenguajes de programación. Muy rápido y ligero. Incorpora pestañas.</p>

<p>Web: <a href="http://notepad-plus-plus.org/" target="_blank">http://notepad-plus-plus.org/</a></p>

<p><img class="alignleft size-full wp-image-247" src="http://www.neosy.net/wp-content/uploads/2010/09/Filezilla_logo.png" alt="" width="84" height="84" /><strong>Filezilla</strong></p>

<p>Buen cliente FTP gratuito. Sencillo de usar, muy completo, multilenguaje, buena estructura de ventana. Alternativamente uso NicoFTP.</p>

<p>Web: <a href="http://filezilla-project.org/" target="_blank">http://filezilla-project.org/</a></p>

<p><img class="size-full wp-image-249  alignleft" src="http://www.neosy.net/wp-content/uploads/2010/09/google_chrome_logo.png" alt="" width="84" height="84" /><strong>Google Chrome</strong></p>

<p>Solo por dos cosas. HTML5 y el modo aplicación, que elimina todas las barras y permite que una aplicación web aparente no serlo tanto.</p>

<p>Web: <a href="http://www.google.com/chrome?hl=es" target="_blank">http://www.google.com/chrome?hl=es</a></p>

<p><img class="alignleft size-full wp-image-270" src="http://www.neosy.net/wp-content/uploads/2010/09/logo-web-thumb.gif" alt="" width="84" height="84" /><strong>Avira Antivir</strong></p>

<p>Antivirus que instalo en las instalaciones Windows. Gratuito. El único inconveniente es la publicidad que salta al actualizarse.</p>

<p>Web: <a href="http://www.free-av.com/" target="_blank">http://www.free-av.com/</a></p>

<p><img class="alignleft size-full wp-image-271" src="http://www.neosy.net/wp-content/uploads/2010/09/WINRAR.png" alt="" width="84" height="84" /><strong>WinRar</strong></p>

<p>Compresor-descompresor de archivos que soporta una gran cantidad de formatos. RAR y ZIP, imprescindible para descargas.</p>

<p>Web: <a href="http://www.winrar.es/" target="_blank">http://www.winrar.es/</a></p>

<p>Además de todas estas, tambien suelo instalar: <a href="http://calibre-ebook.com/" target="_blank">Calibre</a>, <a href="http://explore.live.com/windows-live-messenger" target="_blank">Messenger</a>, <a href="http://www.skype.com/intl/es/home/" target="_blank">Skype</a>, <a href="http://www.codecguide.com/about_kl.htm" target="_blank">K-Lite Codek Pack</a>, <a href="http://store.steampowered.com/about/" target="_blank">Steam</a>. Todas estas son las aplicaciones gratuitas. Las de pago que suelo tener instaladas son las siguientes: Adobe Master Collection, Nero, Guitar Pro y VMware.</p>

<blockquote>
  <p><strong>Aviso:</strong></p>

  <ul>
    <li><a href="http://www.neosy.net/apple-store-barcelona-maquinista/" target="_self">Entrada original</a> en el blog de <a href="http://www.neosy.net/" target="_blank">Neosy</a></li>
  </ul>
</blockquote>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-09-06T12:00:23+02:00">
          <a href="//elboletaire.github.io/racotecnic/2010/09/apple-store-barcelona-la-maquinista/">September 06, 2010</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
          
            neosy
          
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2010/09/apple-store-barcelona-la-maquinista/" rel="bookmark" title="Apple Store Barcelona (La Maquinista)" itemprop="url">Apple Store Barcelona (La Maquinista)</a></h1>
    
  </header>
  <div class="entry-content">
    <p><a href="http://www.neosy.net/wp-content/uploads/2010/09/apple-logo1.jpg"></a><a href="http://www.neosy.net/wp-content/uploads/2010/09/apple-logo.jpg"><img class="size-full wp-image-174 aligncenter" src="http://www.neosy.net/wp-content/uploads/2010/09/apple-logo.jpg" alt="" width="600" height="150" /></a></p>

<p>Como la gran mayoría de gente sabe, ayer sábado 4 de septiembre Apple abrió su primera Apple Store en España. El sitio elegido ha sido un local en el centro comercial de La Maquinista (Barcelona). El local en sí es bastante grande (1300 metros cuadrados), pues hay que tener en cuenta que es la Apple Store en centro comercial mas grande de Europa.</p>

<p>La cola empezó el viernes por la mañana, antes de la apertura del centro comercial, cuando el primer cliente se “coló” en las instalaciones a las 6:30 de la mañana. Eso fue el inicio de lo que poco a poco iba a convertirse en una cola de entre una y dos horas para poder entrar a la tienda al dia siguiente. Comentar que a las 00:00 de la noche, se destapó la tienda, eliminando la barrera que impedía ver el interior bajo la atenta mirada de la cola, que a gritos y aplausos veían por primera vez el interior de la tienda. El sábado, a las 9:55 de la mañana, nos encontramos con esto:</p>

<p><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01814.jpg"><img class="size-medium wp-image-177      alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01814-300x225.jpg" alt="" width="270" height="205" /></a><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01816.jpg"> <img class="size-medium wp-image-178      alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01816-300x225.jpg" alt="" width="270" height="205" /></a>
<a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01819.jpg"><img class="size-medium wp-image-180    alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01819-300x225.jpg" alt="" width="270" height="205" /></a><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01817.jpg"> <img class="size-medium wp-image-179     alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01817-300x225.jpg" alt="" width="270" height="205" /></a></p>

<p>Llegado cierto punto, incluso ciertos empleados nos proporcionaban gratuitamente una botella de agua (desconozco si eran empleados por parte de Apple o de la propia marca, pues no llevaban la indumentaria azul de los vendedores).<a id="more"></a><a id="more-1596"></a></p>

<p><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01821.jpg"><img class="size-medium wp-image-181  alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01821-300x225.jpg" alt="" width="270" height="205" /></a> <a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01824.jpg"><img class="size-medium wp-image-182  alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01824-300x225.jpg" alt="" width="270" height="205" /></a></p>

<p>La cola iba avanzando. Un empleado iba pasando por la cola preguntando quién iba a comprar un iphone, puesto que habian dos colas (una general y otra para los compradores de iphone). Entre toda la gente, se podían observar una gran cantidad de aparatos Apple, desde iphones, ipads, ipods… y hasta algunos macbooks.</p>

<p><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01825.jpg"><img class="size-medium wp-image-183  alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01825-300x225.jpg" alt="" width="270" height="205" /></a> <a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01827.jpg"><img class="size-medium wp-image-184  alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01827-300x225.jpg" alt="" width="270" height="205" /></a>
<a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01828.jpg"><img class="size-medium wp-image-185  alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01828-300x225.jpg" alt="" width="270" height="205" /></a> <a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01829.jpg"><img class="size-medium wp-image-186  alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01829-300x225.jpg" alt="" width="270" height="205" /></a></p>

<p>Hasta llegar a la entrada de la tienda, donde estaba el gran bulto de personas y empleados.</p>

<p><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01831.jpg"><img class="size-medium wp-image-187  alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01831-300x225.jpg" alt="" width="270" height="205" /></a> <a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01833.jpg"><img class="size-medium wp-image-188  alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01833-300x225.jpg" alt="" width="270" height="205" /></a></p>

<p>En la puerta, nos encontramos con un pasillo de empleados, que a gritos, silbidos, aplausos, choques de manos… nos daban la bienvenida al mas puro estilo americano. A su vez nos entregaban una cajita que contenía la camiseta (a las 1500 primeras personas) y un panfleto publicitario de la tienda y el centro comercial. Por fin, dentro de la tienda, nos encontramos con este aspecto:</p>

<p><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01836.jpg"><img class="size-medium wp-image-189 alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01836-300x225.jpg" alt="" width="270" height="205" /> </a><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01837.jpg"><img class="size-medium wp-image-190 alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01837-300x225.jpg" alt="" width="270" height="205" /></a>
<a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01838.jpg"><img class="size-medium wp-image-191 alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01838-300x225.jpg" alt="" width="270" height="205" /></a><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01840.jpg"> <img class="size-medium wp-image-192 alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01840-300x225.jpg" alt="" width="270" height="205" /></a></p>

<p>La tienda esta distribuida en 4 filas de mesas y dos filas en las paredes laterales. Al fondo encontramos la <em>genius </em>bar, en sus laterales tenemos unas paredes con aplicaciones y accesorios de todo tipo. Justo delante de la <em>genius </em>bar, tenemos unas mesas mas del estilo cibercafé (con sillas), con ordenadores, de manera que se puede estar mas comodo que en las mesas principales (no disponen de sillas).</p>

<p>En cuanto al contenido, encontramos una gran cantidad de macbooks pro, muchos imacs de 21 pulgadas, muchos iphones, ipods, ipads… solo noté dos productos que estaban expuestos en poca cantidad. El imac de 27 pulgadas (solo tenían dos expuestos, uno con el core i3 y otro con el core i7) y el macbook clásico (solo encontré tres, justo a la izquierda de la entrada). A su vez, tenían un apple tv (version antigua) y un mac pro.</p>

<p>La verdad es que cualquiera que se este pensando en adquirir un producto Apple debería pasarse por la tienda, puesto que puedes comparar diferentes configuraciones (en el caso de los ordenadores) o trastear con los gadgets. Estuve pasando tests de <em>geekbench </em>a varios ordenadores (todos con la versión gratuita de 32 bits). El imac i7 puntuó mas de 9000, macbook pro con i5 alrededor de los 7000 y el macbook superó ampliamente los 3000. Además, a partir del lunes 6 de septiembre, empiezan los talleres (puedes mirarlos <a title="Apple Store la maquinista" rel="nofollow" href="http://www.apple.com/es/retail/lamaquinista/#workshops_browser_gettingstarted" target="_blank">aquí</a>), ideales para todos aquellos que quieran iniciarse en el mundo Apple.</p>

<p>Para finalizar os muestro la camiseta que nos regalaron:</p>

<p><a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01844.jpg"><img class="size-medium wp-image-221 alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01844-300x225.jpg" alt="" width="270" height="205" /></a> <a href="http://www.neosy.net/wp-content/uploads/2010/09/DSC01845.jpg"><img class="size-medium wp-image-222 alignnone" src="http://www.neosy.net/wp-content/uploads/2010/09/DSC01845-300x225.jpg" alt="" width="270" height="205" /></a></p>

<blockquote>
  <p><strong>Aviso:</strong></p>

  <ul>
    <li><a href="http://www.neosy.net/apple-store-barcelona-maquinista/" target="_self">Entrada original</a> en el blog de <a href="http://www.neosy.net/" target="_blank">Neosy</a></li>
  </ul>
</blockquote>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-07-10T23:44:09+02:00">
          <a href="//elboletaire.github.io/racotecnic/2010/07/errores-404-con-ajax-y-jquery-en-cakephp/">July 10, 2010</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2010/07/errores-404-con-ajax-y-jquery-en-cakephp/" rel="bookmark" title="Errores 404 con Ajax (y jQuery) en CakePHP" itemprop="url">Errores 404 con Ajax (y jQuery) en CakePHP</a></h1>
    
  </header>
  <div class="entry-content">
    <p>En este tutorial aprenderéis a <strong>gestionar los errores de CakePHP con y sin Ajax.</strong></p>

<p>Lo primero de todo que tenéis que hacer es poner el debug a cero en vuestro fichero core.php, ya que <strong>con debug &gt; 0 no funcionaría</strong>.</p>

<p>Ahora pasemos a crear (si no existe) el fichero <strong>/app/app_error.php</strong> con el siguiente contenido.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// /app/app_error.php
</span><span class="k">class</span> <span class="nc">AppError</span> <span class="k">extends</span> <span class="nx">ErrorHandler</span>
<span class="p">{</span>
  <span class="k">function</span> <span class="nf">error404</span><span class="p">(</span><span class="nv">$params</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="c1">// Importamos RequestHandler para verificar si la conexión es mediante Ajax
</span>    <span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">'Component'</span><span class="p">,</span> <span class="s1">'RequestHandler'</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">RequestHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RequestHandlerComponent</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">RequestHandler</span><span class="o">-&gt;</span><span class="na">isAjax</span><span class="p">())</span> <span class="p">{</span>
      <span class="c1">// En caso de ser Ajax creamos la cabecera 404
</span>      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">controller</span><span class="o">-&gt;</span><span class="na">header</span><span class="p">(</span><span class="s1">'HTTP/1.0 404 Not Found'</span><span class="p">);</span>
      <span class="c1">// y pasamos algunas variables a la vista que ahora crearemos
</span>      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">controller</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'params'</span><span class="p">,</span> <span class="nv">$params</span><span class="p">);</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">controller</span><span class="o">-&gt;</span><span class="na">layout</span> <span class="o">=</span> <span class="s1">'ajax'</span><span class="p">;</span>
      <span class="c1">// Renderizamos la vista
</span>      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_outputMessage</span><span class="p">(</span><span class="s1">'ajax_error404'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// Aquí iría la gestión del error sin Ajax, en nuestro caso llamamos al método padre.
</span>    <span class="k">else</span> <span class="k">parent</span><span class="o">::</span><span class="na">error404</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Pasemos a la creación de la vista… <strong>/app/views/errors/ajax_error404.ctp</strong></p>

<p><a id="more"></a><a id="more-1583"></a></p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// /app/views/errors/ajax_error404.ctp
</span><span class="nv">$error404</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'message'</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'The requested address was not found on this server.'</span><span class="p">,</span><span class="kc">true</span><span class="p">),</span> <span class="s1">'params'</span> <span class="o">=&gt;</span> <span class="nv">$params</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Javascript</span><span class="o">-&gt;</span><span class="na">object</span><span class="p">(</span><span class="nv">$error404</span><span class="p">);</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Tan simple como eso : )</p>

<p>Finalmente, añadamos esto a nuestro template por defecto, o a nuestra hoja javascript común:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Ajax not found</span>
  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">ajaxError</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">404</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s1">'('</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">+</span> <span class="s1">')'</span><span class="p">).</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Con esto mostraremos una alerta mostrando el texto que hayamos definido en nuestro app_error al usuario que intente adquirir una url no existente en nuestra aplicación CakePHP.</p>

<p>Evidentemente podéis gestionar más errores a parte del típico error 404, simplemente añadiendo algún <em>if</em> más al código javascript y el método correspondiente en el app_error para gestionarlo.</p>

<p>El parámetro <em>$params</em> lo he pasado por si queréis utilizar alguna de sus variables. Por ejemplo, podríamos mostrar al usuario un mensaje tipo “La página /requetefuck no existe”.</p>

<blockquote>
  <p><strong>Nota:</strong> Si estáis utilizando Cake 1.2 tened en cuenta que tenéis que
reemplazar en la vista ajax_error404 el $this-&gt;Javascript por $javascript, ya
que ha variado de una versión a otra.</p>
</blockquote>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="//elboletaire.github.io/racotecnic/page/5/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="//elboletaire.github.io/racotecnic">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/4/">4</a></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/5/">5</a></li>
      
    
      
        <li><strong class="current-page">6</strong></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/7/">7</a></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/8/">8</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="//elboletaire.github.io/racotecnic/page/23/">23</a></li>
    

    
    
      <li><a href="//elboletaire.github.io/racotecnic/page/7/" class="btn">Next</a></li>
    
  </ul>
</div>



</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Racó Tècnic. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="//elboletaire.github.io/racotecnic/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106861877-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>




</body>
</html>
