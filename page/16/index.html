<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Racó Tècnic</title>
<meta name="description" content="Punt de trobada de coneixements">
<meta name="keywords" content="development, hardware, software, audio, video, mapping, php, bash, apache, nginx, cakephp, git">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg">

<meta name="twitter:title" content="Racó Tècnic">
<meta name="twitter:description" content="Punt de trobada de coneixements">
<meta name="twitter:creator" content="@racotecnic">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Racó Tècnic">
<meta property="og:description" content="Punt de trobada de coneixements">
<meta property="og:url" content="//elboletaire.github.io/racotecnic/page/16/">
<meta property="og:site_name" content="Racó Tècnic">





<link rel="canonical" href="//elboletaire.github.io/racotecnic/page/16/">
<link href="//elboletaire.github.io/racotecnic/feed.xml" type="application/atom+xml" rel="alternate" title="Racó Tècnic Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="//elboletaire.github.io/racotecnic/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="//elboletaire.github.io/racotecnic/assets/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="//elboletaire.github.io/racotecnic/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="//elboletaire.github.io/racotecnic/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="//elboletaire.github.io/racotecnic/images/" alt="Racó Tècnic photo" class="author-photo">
					<h4>Racó Tècnic</h4>
					<p>A subproject from <a href="http://underave.net">underave.net</a> created by <a href="https://github.com/elboletaire">elboletaire</a> and maintained by many collaborators.</p>
				</li>
				<li><a href="//elboletaire.github.io/racotecnic/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:elboletaire@underave.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/racotecnic"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/racotecnic"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/elboletaire/racotecnic"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="//elboletaire.github.io/racotecnic/posts/">All Posts</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/tags/">All Tags</a></li>
				<li><a href="//elboletaire.github.io/racotecnic/categories/">All Categories</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="https://github.com/elboletaire/racotecnic" target="_blank">Github</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="https://github.com/elboletaire/Watimage/blob/master/examples/files/LICENSE">elboletaire</a></div><!-- /.image-credit -->
  
    <div class="entry-image" style="background-image: url(//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg);">
      <img src="//elboletaire.github.io/racotecnic/images/el-carmel-viewpoint.jpg" alt="">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Racó Tècnic</h1>
      <h2>Punt de trobada de coneixements</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2009-07-26T10:52:52+02:00">
          <a href="//elboletaire.github.io/racotecnic/2009/07/evitar-mensaje-de-windows-office-genuine-advantage/">July 26, 2009</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2009/07/evitar-mensaje-de-windows-office-genuine-advantage/" rel="bookmark" title="Evitar mensaje de Windows & Office Genuine Advantage" itemprop="url">Evitar mensaje de Windows & Office Genuine Advantage</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Hace ya un tiempo Destroy (a.k.a Axelain) <a title="Leer la entrada en cuestión" href="http://racotecnic.com/2009/03/eliminar-mensaje-de-copia-pirata-de-windows-genuine-advantage/" target="_self">publicó como eliminar este mensaje</a> tan molesto que todos los que tenemos una copia ilegal de windows (es decir, <strong>todos</strong>) sufrimos o hemos sufrido alguna vez.</p>

<p>Él explicó cómo eliminarlo, algo realmente útil para cuando el mal ya está hecho y no hay vuelta atrás, pero yo creo que estas cosas mejor prevenirlas que curarlas, así que os voy a explicar cómo he evitado <strong>siempre</strong> estos mensajes:</p>

<p>Como ya he dicho esto es la medida de prevención, por ello necesitaremos una instalación de Windows semi nueva que todavía no esté “infectada” por este mensaje.</p>

<p>Vayamos a Mi PC / Panel de Control / Actualizaciones automáticas y habilitemos la casilla “Notificarme, pero no descargarlas ni instalarlas…”</p>

<p><img src="//elboletaire.github.io/racotecnic/uploads/2009/07/Captura.png" alt="Actualizaciones de windows" /></p>

<p><a id="more"></a><a id="more-703"></a></p>

<p>¿Porqué hacemos esto? Porque el mensaje de Windows Original no es más que una actualización del sistema, si evitamos descargarla e instalarla ya no tendremos que preocuparnos más por ello (sólo intenta instalarse una vez).</p>

<p>Así pues tendremos que fijarnos a la hora de instalar las actualizaciones. La actualización en concreto se llama “Herramienta de notificación del programa de ventajas de Windows Original”.</p>

<p>Para Office pasa igual, existe una actualización que si se descarga nos hace igual que con Windows. La actualización se llama igual, pero en lugar de Windows, Office ;)</p>

<p>Cuando hayamos desmarcado las actualizaciones que no queramos le damos a descargar y, en la nueva ventana que nos aparezca, marcamos “No volver a notificarme sobre estas actualizaciones”.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2009-07-19T20:24:15+02:00">
          <a href="//elboletaire.github.io/racotecnic/2009/07/leer-y-editar-etiquetas-id3v1-e-id3v2-con-cakephp/">July 19, 2009</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~16 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2009/07/leer-y-editar-etiquetas-id3v1-e-id3v2-con-cakephp/" rel="bookmark" title="Leer y editar etiquetas ID3v1 e ID3v2 con CakePHP 1.2" itemprop="url">Leer y editar etiquetas ID3v1 e ID3v2 con CakePHP 1.2</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Si, como yo, estáis interesados en editar y leer las etiquetas ID3 de los ficheros mp3 que se suban a vuestro servidor, podéis hacerlo utilizando las <a title="ID3 en php.net" href="http://es.php.net/manual/en/book.id3.php" target="_blank">funciones propias de PHP para ello</a> (necesitáis que vuestro hosting lo tenga instalado) o bien, si os pasa igual que a mi que en mi hosting no tienen habilitadas estas funciones (y si no tienes un servidor dedicado no te las instalarán para no detener el servicio), podéis utilizar las classes de PHP <a title="Visitar página del proyecto GetID3" href="http://www.getid3.org" target="_blank">GetID3</a>.</p>

<p>Si no la conocíais os recomiendo que la descarguéis y hagáis alguna prueba con ella, realmente se le puede sacar mucho jugo ya que con ella no sólo podemos editar etiquetas ID3; esto son algunos de los muchos formatos cuya información podéis consultar y / o editar con este magnífico conjunto de clases:</p>

<p><a id="more"></a><a id="more-679"></a></p>

<blockquote>
  <p><strong>getID3()</strong> is a PHP script that extracts useful information from MP3s &amp; other multimedia file formats:</p>

  <ul>
    <li><strong>Tag formats:</strong>
      <ul>
        <li><a href="http://www.id3.org/id3v1.html">ID3v1</a> (v1.0 &amp; v1.1)</li>
        <li><a href="http://www.id3.org/">ID3v2 (v2.2, v2.3 &amp; v2.4)</a></li>
        <li><a href="http://www.personal.uni-jena.de/%7Epfk/mpp/sv8/apetag.html">APE tags (v1 &amp; v2)</a></li>
        <li><a href="http://www.xiph.org/ogg/vorbis/doc/v-comment.html">(Ogg) VorbisComment</a></li>
        <li>Lyrics3 (<a href="http://www.id3.org/lyrics3.html">v1</a> &amp; <a href="http://www.id3.org/lyrics3200.html">v2</a>)</li>
      </ul>
    </li>
    <li><strong>Lossy Audio-only formats:</strong>
      <ul>
        <li><a href="http://www.mp3-tech.org/programmer/frame_header.html">MP3, MP2, MP1</a> (MPEG-1, layer III/II/I audio, including Fraunhofer, Xing and <a href="http://gabriel.mp3-tech.org/mp3infotag.html">LAME VBR/CBR headers</a>)</li>
        <li><a href="http://www.xiph.org/">Ogg Vorbis</a></li>
        <li><a href="http://www.audiocoding.com/wiki/index.php?page=AAC">AAC</a> &amp; MP4</li>
        <li><a href="http://www.dolby.com/digital/">AC-3</a></li>
        <li><a href="http://www.real.com/">RealAudio</a></li>
      </ul>
    </li>
    <li><strong>Lossless Audio-only formats:</strong>
      <ul>
        <li><a href="http://en.wikipedia.org/wiki/Wav">WAV</a> (including extended chunks such as BWF and CART)</li>
        <li><a href="http://en.wikipedia.org/wiki/Aiff">AIFF</a></li>
        <li><a href="http://flac.sourceforge.net/">FLAC</a> &amp; OggFLAC</li>
        <li><a href="http://www-ft.ee.tu-berlin.de/%7Eliebchen/lpac.html">LPAC (Lossless Predictive Audio Compressor)</a></li>
        <li><a href="http://www.apple.com/itunes/import.html">Apple Lossless Audio Codec</a></li>
        <li><a href="http://www.real.com/">RealAudio Lossless</a></li>
        <li><a href="http://en.wikipedia.org/wiki/CD_Audio">CD-audio (*.cda)</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Midi#MIDI_file_formats">MIDI</a></li>
      </ul>
    </li>
    <li><strong>Audio-Video formats:</strong>
      <ul>
        <li><a href="http://en.wikipedia.org/wiki/Audio_Video_Interleave">AVI</a></li>
        <li><a href="http://www.matroska.org/">Matroska</a></li>
        <li><a href="http://www.microsoft.com/windowsmedia/">ASF (ASF, Windows Media Audio (WMA), Windows Media Video (WMV))</a></li>
        <li><a href="http://en.wikipedia.org/wiki/MPEG-1">MPEG-1</a> &amp; <a href="http://en.wikipedia.org/wiki/MPEG-2">MPEG-2</a></li>
        <li><a href="http://www.apple.com/quicktime/">Quicktime</a></li>
        <li><a href="http://www.real.com/">RealVideo</a></li>
      </ul>
    </li>
    <li><strong>Graphic formats:</strong>
      <ul>
        <li><a href="http://en.wikipedia.org/wiki/JPEG">JPEG</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Portable_Network_Graphics">PNG</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Graphics_Interchange_Format">GIF</a></li>
        <li><a href="http://en.wikipedia.org/wiki/BMP_file_format">BMP (Windows &amp; OS/2)</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Tagged_Image_File_Format">TIFF</a></li>
        <li><a href="http://www.openswf.org/">SWF (Flash)</a></li>
      </ul>
    </li>
    <li><strong>Data formats:</strong>
      <ul>
        <li><a href="http://en.wikipedia.org/wiki/ZIP_%28file_format%29">ZIP</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Tar_%28file_format%29">TAR</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Gzip">GZIP</a></li>
        <li><a href="http://en.wikipedia.org/wiki/ISO_image">ISO 9660 (CD-ROM image)</a></li>
      </ul>
    </li>
    <li><strong>Metadata types:</strong>
      <ul>
        <li><a href="http://en.wikipedia.org/wiki/Exchangeable_image_file_format">EXIF (Exchangeable image file format)</a></li>
      </ul>
    </li>
    <li><strong>getID3() can write:</strong>
      <ul>
        <li><a href="http://en.wikipedia.org/wiki/ID3v1">ID3v1 (v1 &amp; v1.1)</a></li>
        <li><a href="http://en.wikipedia.org/wiki/ID3v1">ID3v2 (v2.3, v2.4)</a></li>
        <li><a href="http://en.wikipedia.org/wiki/APE_tag">APE (v2)</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Ogg">Ogg Vorbis comments</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Free_Lossless_Audio_Codec">FLAC comments</a></li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>He eliminado unos cuantos formatos de la lista, si queréis verlos todos id a su página web.</p>

<p>¡Al grano! Ya conocemos las clases ID3 (aunque sea un poco por encima, como yo..) y queremos implementarlas en nuestra aplicación de Cake.</p>

<p>No es muy complicado si utilizamos las demos que nos dan en el zip que nos descargamos de getID3.org. Simplemente debemos tener en cuenta que los “require” que utilicen en las demos debemos substituirlas por <a href="http://api.cakephp.org/class/app#method-Appimport" rel="nofollow" target="_blank" title="Ver documentación del método">App::import(‘vendor’,’rutadelaclase’)</a>.</p>

<p>Lo primero que deberemos hacer será descargar getID3. Si queréis editar etiquetas ID3v2 deberéis descargar la versión estable (actualmente la <a href="http://sourceforge.net/projects/getid3/files/getID3()%201.x/getid3-1.7.9.zip/download" target="_blank" rel="nofollow" title="Desargar">1.7.9</a>) ya que en la versión beta (actualmente la <a href="http://sourceforge.net/projects/getid3/files/getID3%28%29%20beta/getid3-2.0.0b5.zip/download" rel="nofollow" target="_blank" title="Descargar">2.0.0-b5</a>) no funcionan las clases necesarias.</p>

<p>Una vez descargado, lo descomprimimos y lo subimos a la carpeta vendors de nuestro proyecto Cake (para mayor comodidad renombrar la carpeta a “getid3”). Seguramente <a href="http://cakebaker.42dh.com/2006/08/11/why-are-there-two-vendors-folders-in-cakephp/" target="_blank" rel="nofollow" title="Why are there two vendors folders in CakePHP?">habréis visto que existen dos carpetas <em>vendor</em></a> en vuestra aplicación de Cake. Debéis ponerlo en la que se encuentra en la carpeta raíz (junto con las carpeta “app” y “cake”).</p>

<p>Ahora que ya tenemos nuestro plugin en la aplicación debemos crear un componente que nos sirva de conexión entre las librerías getID3 y nuestro Cake.</p>

<p>Para hacerlo utilizaremos como referencia las demos “demo.basic.php” y “demo.simple.write.php”. Recordad que hay que substituir los <em>require</em> e <em>includes</em> por App::import(). Este es el resultado que he obtenido yo:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Getid3Component</span> <span class="k">extends</span> <span class="nx">Object</span>
<span class="p">{</span>
  <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">set_time_limit</span><span class="p">(</span><span class="mi">20</span> <span class="o">*</span> <span class="mi">3600</span><span class="p">);</span>
    <span class="nb">ignore_user_abort</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">function</span> <span class="nf">extract</span><span class="p">(</span><span class="nv">$filename</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Importamos el fichero getid3.php que contiene la classe getID3
</span>    <span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">'vendor'</span><span class="p">,</span> <span class="s1">'getid3/getid3'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'file'</span> <span class="o">=&gt;</span> <span class="s1">'getid3.php'</span><span class="p">));</span>
    <span class="c1">// Initialize getID3 engine
</span>    <span class="nv">$getID3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">getID3</span><span class="p">;</span>

    <span class="c1">// Analyze file and store returned data in $ThisFileInfo
</span>    <span class="nv">$ThisFileInfo</span> <span class="o">=</span> <span class="nv">$getID3</span><span class="o">-&gt;</span><span class="na">analyze</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span>
    <span class="c1">// Devolvemos un array con toda la información del fichero
</span>    <span class="k">return</span> <span class="nv">$ThisFileInfo</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">function</span> <span class="nf">write</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="nv">$data</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">'vendor'</span><span class="p">,</span> <span class="s1">'getid3/getid3/getid3'</span><span class="p">);</span>

    <span class="c1">// Initialize getID3 engine
</span>    <span class="nv">$getID3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">getID3</span><span class="p">;</span>
    <span class="c1">// Indicamos a getID3 que utilice la codificación de Cake
</span>    <span class="nv">$getID3</span><span class="o">-&gt;</span><span class="na">setOption</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'encoding'</span> <span class="o">=&gt;</span> <span class="nx">Configure</span><span class="o">::</span><span class="na">read</span><span class="p">(</span><span class="s1">'App.encoding'</span><span class="p">)));</span>

    <span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">'vendor'</span><span class="p">,</span> <span class="s1">'getid3/getid3'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'file'</span> <span class="o">=&gt;</span> <span class="s1">'write.php'</span><span class="p">));</span>

    <span class="c1">// Initialize getID3 tag-writing module
</span>    <span class="nv">$tagwriter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">getid3_writetags</span><span class="p">;</span>

    <span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">filename</span>       <span class="o">=</span> <span class="nv">$filename</span><span class="p">;</span>
    <span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">tagformats</span>     <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'id3v1'</span><span class="p">,</span> <span class="s1">'id3v2.3'</span><span class="p">);</span>

    <span class="c1">// set various options (optional)
</span>    <span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">overwrite_tags</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">tag_encoding</span>   <span class="o">=</span> <span class="nx">Configure</span><span class="o">::</span><span class="na">read</span><span class="p">(</span><span class="s1">'App.encoding'</span><span class="p">);</span>
    <span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">remove_other_tags</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="c1">// populate data array
</span>    <span class="nv">$TagData</span><span class="p">[</span><span class="s1">'title'</span><span class="p">][]</span>   <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'title'</span><span class="p">];</span>
    <span class="nv">$TagData</span><span class="p">[</span><span class="s1">'artist'</span><span class="p">][]</span>  <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'artist'</span><span class="p">];</span>
    <span class="nv">$TagData</span><span class="p">[</span><span class="s1">'album'</span><span class="p">][]</span>   <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'album'</span><span class="p">];</span>
    <span class="nv">$TagData</span><span class="p">[</span><span class="s1">'year'</span><span class="p">][]</span>    <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'year'</span><span class="p">];</span>
    <span class="nv">$TagData</span><span class="p">[</span><span class="s1">'genre'</span><span class="p">][]</span>   <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'genre'</span><span class="p">];</span>
    <span class="nv">$TagData</span><span class="p">[</span><span class="s1">'comment'</span><span class="p">][]</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'comment'</span><span class="p">];</span>
    <span class="nv">$TagData</span><span class="p">[</span><span class="s1">'track'</span><span class="p">][]</span>   <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'track'</span><span class="p">];</span>

    <span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">tag_data</span> <span class="o">=</span> <span class="nv">$TagData</span><span class="p">;</span>

    <span class="c1">// write tags
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">WriteTags</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">warnings</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">warnings</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nv">$tagwriter</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Recordad que los componentes van en la carpeta <code class="highlighter-rouge">app/controllers/components</code> y que el nombre de este fichero deberá ser <code class="highlighter-rouge">getid3.php</code>.</p>

<p>Ahora que ya tenemos nuestro componente vayamos al controlador sobre el que queramos utilizarlo y añadamoslo al resto de componentes:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">AudiosController</span> <span class="k">extends</span> <span class="nx">AppController</span>
<span class="p">{</span>
  <span class="k">var</span> <span class="nv">$name</span> <span class="o">=</span> <span class="s1">'Audios'</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Upload'</span><span class="p">,</span> <span class="s1">'Getid3'</span><span class="p">);</span>
  <span class="c1">// [...]
</span><span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y sólo nos queda saber cómo utilizarlo:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="nv">$datos</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'album'</span> <span class="o">=&gt;</span> <span class="s1">'Nombre del álbum'</span><span class="p">,</span>
  <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Título del tema'</span><span class="p">,</span>
  <span class="s1">'artist'</span> <span class="o">=&gt;</span> <span class="s1">'Artista'</span><span class="p">,</span>
  <span class="s1">'year'</span> <span class="o">=&gt;</span> <span class="s1">'Año'</span><span class="p">,</span>
  <span class="s1">'genre'</span> <span class="o">=&gt;</span> <span class="s1">'Estilo'</span><span class="p">,</span>
  <span class="s1">'comment'</span> <span class="o">=&gt;</span> <span class="s1">'Comentario'</span>
<span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Getid2</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">'rutadelfichero.mp3'</span><span class="p">,</span> <span class="nv">$datos</span><span class="p">);</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y para leer los datos de un mp3:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Getid2</span><span class="o">-&gt;</span><span class="na">extract</span><span class="p">(</span><span class="s1">'rutadelfichero.mp3'</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Que nos dará una salida similar a <a href="http://www.racotecnic.com/2009/07/leer-y-editar-etiquetas-id3v1-y-id3v2-con-cakephp/#sortida">ésta</a>.</p>

<p>Habéis visto más o menos el método de implementar funciones de getID3 en CakePHP. Ahora es tarea vuestra intentar añadir más funcionalidades a vuestro complemento según vuestras necesidades.</p>

<p>Como siempre, espero que le sirva a alguien!</p>

<blockquote>
  <p>Páginas de referencia:</p>

  <ul>
    <li><a href="http://www.getid3.org" target="_blank" rel="nofollow">getID3.org</a></li>
    <li><a href="http://api.cakephp.org" target="_blank" rel="nofollow">API de CakePHP</a></li>
    <li><a href="http://www.devarticles.in/cakephp/getid3-component-for-cakephp/" target="_blank" rel="nofollow">GetID3 component for CakePHP</a></li>
  </ul>
</blockquote>

<p>Salida de mi fichero de prueba mp3:</p>

<div class="no-line-numbers highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530</pre></td><td class="code"><pre>Array
(
    [GETID3_VERSION] =&gt; 1.7.9-20090308
    [filesize] =&gt; 263776
    [avdataoffset] =&gt; 4096
    [avdataend] =&gt; 263648
    [fileformat] =&gt; mp3
    [audio] =&gt; Array
        (
            [dataformat] =&gt; mp3
            [channels] =&gt; 2
            [sample_rate] =&gt; 44100
            [bitrate] =&gt; 128000
            [channelmode] =&gt; stereo
            [bitrate_mode] =&gt; cbr
            [lossless] =&gt;
            [encoder_options] =&gt; CBR128
            [compression_ratio] =&gt; 0.0907029478458
            [streams] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [dataformat] =&gt; mp3
                            [channels] =&gt; 2
                            [sample_rate] =&gt; 44100
                            [bitrate] =&gt; 128000
                            [channelmode] =&gt; stereo
                            [bitrate_mode] =&gt; cbr
                            [lossless] =&gt;
                            [encoder_options] =&gt; CBR128
                            [compression_ratio] =&gt; 0.0907029478458
                        )

                )

        )

    [tags] =&gt; Array
        (
            [id3v1] =&gt; Array
                (
                    [title] =&gt; Array
                        (
                            [0] =&gt; Títol del tema
                        )

                    [artist] =&gt; Array
                        (
                            [0] =&gt; Jo mateix
                        )

                    [album] =&gt; Array
                        (
                            [0] =&gt; Muahahahahah
                        )

                    [year] =&gt; Array
                        (
                            [0] =&gt; 2009
                        )

                    [comment] =&gt; Array
                        (
                            [0] =&gt; from www.underave.net
                        )

                    [genre] =&gt; Array
                        (
                            [0] =&gt; Techno
                        )

                )

            [id3v2] =&gt; Array
                (
                    [title] =&gt; Array
                        (
                            [0] =&gt; Títol del tema
                        )

                    [artist] =&gt; Array
                        (
                            [0] =&gt; Jo mateix
                        )

                    [album] =&gt; Array
                        (
                            [0] =&gt; Muahahahahah
                        )

                    [year] =&gt; Array
                        (
                            [0] =&gt; 2009
                        )

                    [genre] =&gt; Array
                        (
                            [0] =&gt; Techno
                        )

                    [comments] =&gt; Array
                        (
                            [0] =&gt; from www.underave.net
                        )

                )

        )

    [encoding] =&gt; ISO-8859-1
    [filename] =&gt; Bong0.mp3
    [filepath] =&gt; /public_html/waste/v3.2/app/webroot/files/mp3
    [filenamepath] =&gt; /public_html/waste/v3.2/app/webroot/files/mp3/Bong0.mp3
    [id3v2] =&gt; Array
        (
            [header] =&gt; 1
            [flags] =&gt; Array
                (
                    [unsynch] =&gt;
                    [exthead] =&gt;
                    [experim] =&gt;
                )

            [majorversion] =&gt; 3
            [minorversion] =&gt; 0
            [headerlength] =&gt; 4096
            [tag_offset_start] =&gt; 0
            [tag_offset_end] =&gt; 4096
            [encoding] =&gt; UTF-8
            [comments] =&gt; Array
                (
                    [title] =&gt; Array
                        (
                            [0] =&gt; Títol del tema
                        )

                    [artist] =&gt; Array
                        (
                            [0] =&gt; Jo mateix
                        )

                    [album] =&gt; Array
                        (
                            [0] =&gt; Muahahahahah
                        )

                    [year] =&gt; Array
                        (
                            [0] =&gt; 2009
                        )

                    [genre] =&gt; Array
                        (
                            [0] =&gt; Techno
                        )

                    [comments] =&gt; Array
                        (
                            [0] =&gt; from www.underave.net
                        )

                )

            [TIT2] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [frame_name] =&gt; TIT2
                            [frame_flags_raw] =&gt; 0
                            [data] =&gt; ��T���t�o�l� �d�e�l� �t�e�m�a�
                            [datalength] =&gt; 31
                            [dataoffset] =&gt; 10
                            [framenamelong] =&gt; Title/songname/content description
                            [framenameshort] =&gt; title
                            [flags] =&gt; Array
                                (
                                    [TagAlterPreservation] =&gt;
                                    [FileAlterPreservation] =&gt;
                                    [ReadOnly] =&gt;
                                    [compression] =&gt;
                                    [Encryption] =&gt;
                                    [GroupingIdentity] =&gt;
                                )

                            [encodingid] =&gt; 1
                            [encoding] =&gt; UTF-16
                        )

                )

            [TPE1] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [frame_name] =&gt; TPE1
                            [frame_flags_raw] =&gt; 0
                            [data] =&gt; ��J�o� �m�a�t�e�i�x�
                            [datalength] =&gt; 21
                            [dataoffset] =&gt; 51
                            [framenamelong] =&gt; Lead performer(s)/Soloist(s)
                            [framenameshort] =&gt; artist
                            [flags] =&gt; Array
                                (
                                    [TagAlterPreservation] =&gt;
                                    [FileAlterPreservation] =&gt;
                                    [ReadOnly] =&gt;
                                    [compression] =&gt;
                                    [Encryption] =&gt;
                                    [GroupingIdentity] =&gt;
                                )

                            [encodingid] =&gt; 1
                            [encoding] =&gt; UTF-16
                        )

                )

            [TALB] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [frame_name] =&gt; TALB
                            [frame_flags_raw] =&gt; 0
                            [data] =&gt; ��M�u�a�h�a�h�a�h�a�h�a�h�
                            [datalength] =&gt; 27
                            [dataoffset] =&gt; 82
                            [framenamelong] =&gt; Album/Movie/Show title
                            [framenameshort] =&gt; album
                            [flags] =&gt; Array
                                (
                                    [TagAlterPreservation] =&gt;
                                    [FileAlterPreservation] =&gt;
                                    [ReadOnly] =&gt;
                                    [compression] =&gt;
                                    [Encryption] =&gt;
                                    [GroupingIdentity] =&gt;
                                )

                            [encodingid] =&gt; 1
                            [encoding] =&gt; UTF-16
                        )

                )

            [TYER] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [frame_name] =&gt; TYER
                            [frame_flags_raw] =&gt; 0
                            [data] =&gt; ��2�0�0�9�
                            [datalength] =&gt; 11
                            [dataoffset] =&gt; 119
                            [framenamelong] =&gt; Year
                            [framenameshort] =&gt; year
                            [flags] =&gt; Array
                                (
                                    [TagAlterPreservation] =&gt;
                                    [FileAlterPreservation] =&gt;
                                    [ReadOnly] =&gt;
                                    [compression] =&gt;
                                    [Encryption] =&gt;
                                    [GroupingIdentity] =&gt;
                                )

                            [encodingid] =&gt; 1
                            [encoding] =&gt; UTF-16
                        )

                )

            [TCON] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [frame_name] =&gt; TCON
                            [frame_flags_raw] =&gt; 0
                            [data] =&gt; ��T�e�c�h�n�o�
                            [datalength] =&gt; 15
                            [dataoffset] =&gt; 140
                            [framenamelong] =&gt; Content type
                            [framenameshort] =&gt; genre
                            [flags] =&gt; Array
                                (
                                    [TagAlterPreservation] =&gt;
                                    [FileAlterPreservation] =&gt;
                                    [ReadOnly] =&gt;
                                    [compression] =&gt;
                                    [Encryption] =&gt;
                                    [GroupingIdentity] =&gt;
                                )

                            [encodingid] =&gt; 1
                            [encoding] =&gt; UTF-16
                        )

                )

            [COMM] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [frame_name] =&gt; COMM
                            [frame_flags_raw] =&gt; 0
                            [data] =&gt; ��f�r�o�m� �w�w�w�.�u�n�d�e�r�a�v�e�.�n�e�t�
                            [datalength] =&gt; 50
                            [dataoffset] =&gt; 165
                            [framenamelong] =&gt; Comments
                            [framenameshort] =&gt; comments
                            [flags] =&gt; Array
                                (
                                    [TagAlterPreservation] =&gt;
                                    [FileAlterPreservation] =&gt;
                                    [ReadOnly] =&gt;
                                    [compression] =&gt;
                                    [Encryption] =&gt;
                                    [GroupingIdentity] =&gt;
                                )

                            [encodingid] =&gt; 1
                            [encoding] =&gt; UTF-16
                            [language] =&gt; eng
                            [languagename] =&gt; English
                            [description] =&gt;
                        )

                )

            [TRCK] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [frame_name] =&gt; TRCK
                            [frame_flags_raw] =&gt; 0
                            [data] =&gt;
                            [datalength] =&gt; 1
                            [dataoffset] =&gt; 225
                            [framenamelong] =&gt; Track number/Position in set
                            [framenameshort] =&gt; track_number
                            [flags] =&gt; Array
                                (
                                    [TagAlterPreservation] =&gt;
                                    [FileAlterPreservation] =&gt;
                                    [ReadOnly] =&gt;
                                    [compression] =&gt;
                                    [Encryption] =&gt;
                                    [GroupingIdentity] =&gt;
                                )

                            [encodingid] =&gt; 1
                            [encoding] =&gt; UTF-16
                        )

                )

            [padding] =&gt; Array
                (
                    [start] =&gt; 236
                    [length] =&gt; 3860
                    [valid] =&gt; 1
                )

        )

    [id3v1] =&gt; Array
        (
            [title] =&gt; Títol del tema
            [artist] =&gt; Jo mateix
            [album] =&gt; Muahahahahah
            [year] =&gt; 2009
            [comment] =&gt; from www.underave.net
            [genre] =&gt; Techno
            [comments] =&gt; Array
                (
                    [title] =&gt; Array
                        (
                            [0] =&gt; Títol del tema
                        )

                    [artist] =&gt; Array
                        (
                            [0] =&gt; Jo mateix
                        )

                    [album] =&gt; Array
                        (
                            [0] =&gt; Muahahahahah
                        )

                    [year] =&gt; Array
                        (
                            [0] =&gt; 2009
                        )

                    [comment] =&gt; Array
                        (
                            [0] =&gt; from www.underave.net
                        )

                    [genre] =&gt; Array
                        (
                            [0] =&gt; Techno
                        )

                )

            [padding_valid] =&gt; 1
            [tag_offset_end] =&gt; 263776
            [tag_offset_start] =&gt; 263648
            [encoding] =&gt; ISO-8859-1
        )

    [mime_type] =&gt; audio/mpeg
    [mpeg] =&gt; Array
        (
            [audio] =&gt; Array
                (
                    [raw] =&gt; Array
                        (
                            [synch] =&gt; 4094
                            [version] =&gt; 3
                            [layer] =&gt; 1
                            [protection] =&gt; 0
                            [bitrate] =&gt; 9
                            [sample_rate] =&gt; 0
                            [padding] =&gt; 0
                            [private] =&gt; 0
                            [channelmode] =&gt; 0
                            [modeextension] =&gt; 0
                            [copyright] =&gt; 0
                            [original] =&gt; 1
                            [emphasis] =&gt; 0
                        )

                    [version] =&gt; 1
                    [layer] =&gt; 3
                    [channelmode] =&gt; stereo
                    [channels] =&gt; 2
                    [sample_rate] =&gt; 44100
                    [protection] =&gt; 1
                    [private] =&gt;
                    [modeextension] =&gt;
                    [copyright] =&gt;
                    [original] =&gt; 1
                    [emphasis] =&gt; none
                    [crc] =&gt; 54304
                    [padding] =&gt;
                    [bitrate] =&gt; 128000
                    [framelength] =&gt; 417
                    [bitrate_mode] =&gt; cbr
                )

        )

    [playtime_seconds] =&gt; 16.222
    [tags_html] =&gt; Array
        (
            [id3v1] =&gt; Array
                (
                    [title] =&gt; Array
                        (
                            [0] =&gt; T&amp;amp;iacute;tol del tema
                        )

                    [artist] =&gt; Array
                        (
                            [0] =&gt; Jo mateix
                        )

                    [album] =&gt; Array
                        (
                            [0] =&gt; Muahahahahah
                        )

                    [year] =&gt; Array
                        (
                            [0] =&gt; 2009
                        )

                    [comment] =&gt; Array
                        (
                            [0] =&gt; from www.underave.net
                        )

                    [genre] =&gt; Array
                        (
                            [0] =&gt; Techno
                        )

                )

            [id3v2] =&gt; Array
                (
                    [title] =&gt; Array
                        (
                            [0] =&gt; T&amp;amp;#237;tol del tema
                        )

                    [artist] =&gt; Array
                        (
                            [0] =&gt; Jo mateix
                        )

                    [album] =&gt; Array
                        (
                            [0] =&gt; Muahahahahah
                        )

                    [year] =&gt; Array
                        (
                            [0] =&gt; 2009
                        )

                    [genre] =&gt; Array
                        (
                            [0] =&gt; Techno
                        )

                    [comments] =&gt; Array
                        (
                            [0] =&gt; from www.underave.net
                        )

                )

        )

    [bitrate] =&gt; 128000
    [playtime_string] =&gt; 0:16
)
</pre></td></tr></tbody></table>
</div>
</div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2009-07-16T12:58:15+02:00">
          <a href="//elboletaire.github.io/racotecnic/2009/07/overdub-el-primer-comic-didactico-para-productores/">July 16, 2009</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2009/07/overdub-el-primer-comic-didactico-para-productores/" rel="bookmark" title="OVERDUB: El primer cómic didáctico para productores" itemprop="url">OVERDUB: El primer cómic didáctico para productores</a></h1>
    
  </header>
  <div class="entry-content">
    <blockquote>
  <p>Este artículo proviene del audioblog, clausurado por su desuso y cuyas entradas han sido movidas a este blog para que no se pierdan en el olvido.
Entrada escrita originalmente por <strong>909</strong>.</p>
</blockquote>

<p>¿Quién alguna vez en su vida, como productor, ha cogido un libro sobre audio, síntesis o mastering y no podido pasar de la página diez?  (yo soy uno de ellos) Pues la empresa <a href="http://www.m-audio.com">M-Audio</a> nos ha hecho un favor, Y QUE FAVOR!, al desarrollar **Overdub: **<em>Una guia para productores con una estética de cómic</em>.</p>

<p>Este <em>cómic-guia</em> esta pensando sobretodo para <em>newcomers</em>, es decir, si acabas de aterrizar en este mundillo no estaría mal que le dedicaras un rato de tu tiempo. Igualmente queda dicho para la gente con más experiencia/conocimientos en la materia. Ya que, como dicen en su página web: <span style="color: #808080;"><em><span style="text-decoration: underline;">Overdub cubre los conceptos base y también trucos/consejos más avanzados</span></em></span>.</p>

<p>El único inconveniente es que <span style="text-decoration: underline;">esta solo en inglés</span> y que solo han sacado dos números. Pero bueno, tiempo al tiempo, ya irán apareciendo más. También comentaros que <strong>Overdub</strong> se encuentra tanto en formato digital (más abajo están los links) y en papel. Pero, para que gastar papel y dinero cuando solo ocupa  unos pocos bytes?</p>

<p>Aquí os dejo los dos números publicados hasta dia de hoy de <strong>Overdub</strong>.</p>

<p><strong>Nº1: “Guia sobre monitores de estudio”</strong></p>

<p><img class="aligncenter" src="http://www.m-audio.com/images/interface/default2008/overdub/m-audio_overdub_cover_1.jpg" alt="" width="214" height="301" /></p>

<p><a href="http://www.m-audio.com/images/global/media/Overdub_Vol_1_[lowRes]_EN.pdf">Descargar nº1 en PDF</a></p>

<p><strong>Nº2: “Todo sobre las interfaces de audio”</strong></p>

<p><img class="aligncenter" src="http://www.m-audio.com/images/interface/default2008/overdub/m-audio_overdub_cover_2.jpg" alt="" width="214" height="301" /></p>

<p><a href="http://www.m-audio.com/images/global/media/Overdub_Vol_2_[lowRes]_EN.pdf">Descargar nº2 en PDF</a></p>

<p>Para visualizar estos documentos online y descargar los tonos de prueba que hace mención el primer capitulo de este cómic, visita la web: <a href="http://www.m-audio.com/index.php?do=media.overdub">Overdub web</a></p>

<p>Espero que os ayude un poco a aclarar alguna duda o que os de alguna que otra sorpresilla, de estas que te quedas: Ostia! Esto no lo sabía.</p>

<p>Zalú’!</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2009-06-12T00:52:32+02:00">
          <a href="//elboletaire.github.io/racotecnic/2009/06/subida-de-ficheros-en-cakephp-con-uploadify-y-jquery/">June 12, 2009</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
        <a href="http://www.underave.net" title="About Booletaire">
          Booletaire
        </a>
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~19 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2009/06/subida-de-ficheros-en-cakephp-con-uploadify-y-jquery/" rel="bookmark" title="Subida de ficheros en CakePHP 1.2 con uploadify y jQuery" itemprop="url">Subida de ficheros en CakePHP 1.2 con uploadify y jQuery</a></h1>
    
  </header>
  <div class="entry-content">
    <blockquote>
  <em>Entrada actualizada a 18 de junio de 2009. Los cambios son desde <a href="#ampliacio">aquí</a></em>
  <b>Existe una entrada más reciente relacionada con este tema: <a href="/2009/10/subida-de-ficheros-con-uploadify-y-validacion-ajax-en-cakephp/" target="_top">Subida de ficheros con Uploadify y validación Ajax en CakePHP</a></b>
</blockquote>

<p>Después de mucho tiempo liado con el fin de curso y tras mucho investigar con CakePHP por fin escribo algo al respecto. Para los que no lo sepáis, <strong>CakePHP</strong> es un <a title="Definición de framework" href="http://es.wikipedia.org/wiki/Framework" target="_blank"><em>framework</em></a> de PHP que nos permite programar más rápido nuestras aplicaciones web PHP ya que nos ofrece las herramientas para que empecemos a escribir el código que realmente necesitamos: la lógica de la aplicación.</p>

<p>Si no conocíais CakePHP y os ha interesado el tema echad un ojo a <a title="Visitar web de CakePHP" href="http://www.cakephp.org" target="_blank">su página web</a>, <a title="Descargas de CakePHP" href="http://cakephp.org/downloads" target="_blank">descargaos una copia</a> y empezad a hacer pruebas. En su web podréis encontrar la <a title="Comenzando con CakePHP" href="http://book.cakephp.org/es/view/4/Comenzando-con-CakePHP" target="_blank">mayor parte de la documentación</a> y todo lo demás, como no, en <a title="Realmente hacía falta enlazarlo?" href="http://www.google.es" target="_blank">google</a>.</p>

<p>En este artículo explicaré cómo integrar <a title="Página web oficial de uploadify" href="http://www.uploadify.com/" target="_blank">uploadify</a>, un sistema de carga de ficheros con Flash y JavaScript (utilizando el <em>framework</em> <a title="Página web oficial de jQuery" href="http://jquery.com/" target="_blank">jQuery</a>) a CakePHP para permitirnos cargar múltiples ficheros sin tener que refrescar la página, así como poder cargar ficheros de gran tamaño.</p>

<p><a id="more"></a><a id="more-617"></a>
Antes de empezar, sobreentiendo que tenéis conocimientos sobre CakePHP, así como que habéis utilizado algún sistema de carga de ficheros con flash, tipo <a title="Página web oficial de uploadify" href="http://www.uploadify.com/" target="_blank">uploadify</a> o <a title="Página web oficial de swfUpload" href="http://swfupload.org/" target="_blank">swfupload</a> alguna vez en vuestra vida (aunque no haya sido con Cake). Tampoco estaría de más tener conocimientos de jQuery, para poder gestionar las subidas de ficheros de forma asíncrona. También asumo que ya tenéis CakePHP funcionando en algun servidor.</p>

<p>Dicho esto, empecemos…</p>

<p>Descargamos la última versión de <a title="jQuery downloads" href="http://code.google.com/p/jqueryjs/downloads/list" target="_blank">jQuery</a> (en mi caso la <a title="jQuery 1.3.2 minified" href="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js" target="_blank">v. 1.3.2</a>) y copiamos o movemos el fichero JavaScript a nuestro directorio de ficheros JavaScript, situado en la carpeta <em>webroot</em> (en <em>/app/webroot/js</em>).</p>

<p>Descargamos la última versión de <a title="Descargar uploadify" href="http://www.uploadify.com/download/" target="_blank">uploadify</a> (en mi caso la <a title="uploadify v 1.6.2. GPL" href="http://www.uploadify.com/_files/jquery.uploadify-v1.6.2.zip" target="_self">v. 1.6.2 GPL</a>). Al descargar uploadify nos daremos cuenta que el paso anterior ha sido inútil dado que en la carpeta de uploadify ya viene jQuery :p estos fallos los tiene cualquiera… u.u</p>

<p>De la carpeta de uploadify nos interesan los siguientes ficheros:</p>

<ul>
  <li>cancel.png</li>
  <li>jquery.uploadify.js</li>
  <li>uploader.swf</li>
  <li>uploadify.css</li>
</ul>

<p>el resto eliminadlos (para lo que haremos no son necesarios, no obstante recomiendo que echéis un vistazo a todo ello). Renombrad la carpeta a “uploadify” y movedla dentro del directorio de JavaScripts de <em>webroot</em> (<em>app/webroot/js</em>). Opcionalmente podéis copiar el código del fichero <em>uploadify.css</em> a vuestro fichero css si lo preferís, de este modo podríais descartar también el fichero <em>uploadify.css</em> que apenas contiene 20 líneas.</p>

<p>Ahora que ya tenemos todos los JavaScripts necesarios, pasemos a la parte de los controladores y las vistas.</p>

<p>Para gestionar la subida de ficheros necesitaréis un <em>Component</em> (o bien programar toda la gestión de ficheros “a pelo” en vuestros controladores). Yo he utilizado <em>“<a title="Image Upload Component para CakePHP" href="http://labs.iamkoa.net/2007/10/23/image-upload-component-cakephp/" target="_blank">Image Upload Component</a>”</em>, que además de gestionarme la carga de cualquier tipo de fichero me permite recortar imágenes, generar miniaturas y otras acciones relacionadas con imágenes. <a title="Descargar upload component" href="http://iamkoa.net/mint/pepper/orderedlist/downloads/download.php?file=http%3A//labs.iamkoa.net/wp-content/uploads/2007/11/uploads-component-11062007.zip" target="_blank">Una vez descargado</a> el <em>Upload Component</em> nos quedamos con el fichero <strong><em>upload.php</em></strong> que hay dentro del directorio <em>/app/controllers/components</em> y lo copiamos en este mismo directorio, pero de nuestro proyecto.</p>

<p>Aquí viene el código del controlador, en mi caso “images_controller”:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">ImagesController</span> <span class="k">extends</span> <span class="nx">AppController</span>
<span class="p">{</span>
  <span class="k">var</span> <span class="nv">$name</span> <span class="o">=</span> <span class="s1">'Images'</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Upload'</span><span class="p">);</span>
  <span class="k">var</span> <span class="nv">$helpers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Uploadify'</span><span class="p">);</span>

  <span class="k">function</span> <span class="nf">beforeFilter</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="c1">// Si la acción es subir ficheros
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">action</span> <span class="o">==</span> <span class="s1">'upload'</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">'pass'</span><span class="p">][</span><span class="mi">0</span><span class="p">])){</span>
        <span class="c1">// Iniciamos la sesión con el id de sesión pasado como parámetro
</span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Session</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">'pass'</span><span class="p">][</span><span class="mi">0</span><span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Session</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// Cargamos el beforeFilter superior (en AppController o Controller)
</span>    <span class="k">parent</span><span class="o">::</span><span class="na">beforeFilter</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="k">function</span> <span class="nf">upload</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="c1">// Desactivamos el rendering de la vista para este método
</span>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">autoRender</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">'form'</span><span class="p">][</span><span class="s1">'Filedata'</span><span class="p">]))</span> <span class="p">{</span>
      <span class="c1">// Creamos una miniatura
</span>      <span class="nv">$thumb</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Upload</span><span class="o">-&gt;</span><span class="na">upload</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">'form'</span><span class="p">][</span><span class="s1">'Filedata'</span><span class="p">],</span><span class="s1">'img/thumb/'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'resizecrop'</span><span class="p">,</span> <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'150'</span><span class="p">,</span> <span class="s1">'150'</span><span class="p">),</span> <span class="s1">'output'</span> <span class="o">=&gt;</span> <span class="s1">'jpg'</span><span class="p">));</span>
      <span class="c1">// Si no se crea correctamente
</span>      <span class="k">if</span> <span class="p">(</span><span class="nv">$thumb</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Generamos un log con los errores
</span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">(</span><span class="s1">'L\'usuari '</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Auth</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">(</span><span class="s1">'username'</span><span class="p">)</span> <span class="o">.</span>
          <span class="s1">' ha tingut errors intentant crear una miniatura: '</span> <span class="o">.</span>
          <span class="nb">implode</span><span class="p">(</span><span class="s1">' | '</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Upload</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">),</span><span class="s1">'upload'</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Si la miniatura se ha creado subimos el fichero a tamaño original
</span>        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Upload</span><span class="o">-&gt;</span><span class="na">upload</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">'form'</span><span class="p">][</span><span class="s1">'Filedata'</span><span class="p">],</span><span class="s1">'img/'</span><span class="p">,</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Upload</span><span class="o">-&gt;</span><span class="na">result</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// Si la imagen se sube correctamente enviamos el nombre de ésta al usuario
</span>          <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Upload</span><span class="o">-&gt;</span><span class="na">result</span><span class="p">;</span>
          <span class="k">exit</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="c1">// En caso contrario generamos un log de error
</span>          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">(</span><span class="s1">'L\'usuari '</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Auth</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">(</span><span class="s1">'username'</span><span class="p">)</span> <span class="o">.</span>
            <span class="s1">' ha tingut errors intentant pujar una imatge: '</span> <span class="o">.</span>
            <span class="nb">implode</span><span class="p">(</span><span class="s1">' | '</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Upload</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">),</span><span class="s1">'upload'</span><span class="p">);</span>
          <span class="k">echo</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Error pujant el fitxer'</span><span class="p">);</span>
          <span class="k">exit</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">function</span> <span class="nf">add</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="c1">// Guardamos los datos en la base de datos
</span>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">))</span> <span class="p">{</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Image</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Si no entendéis algo podéis referiros a la <a href="http://api.cakephp.org" target="_blank" title="Ir a la API">api</a> y al <a href="http://book.cakephp.org" target="_blank" title="Ir al libro de recetas de Cake">libro de recetas</a> de Cake o, en caso de ser con la generación de imágenes a la ayuda del <a title="Image Upload Component para CakePHP" href="http://labs.iamkoa.net/2007/10/23/image-upload-component-cakephp/" target="_blank">Image Upload Component</a>.</p>

<p>Como podéis ver he instanciado un <em>helper</em> que se llama “Uploadify”. Lo he creado yo para insertar el código JavaScript de uploadify en las vistas y si lo queréis lo podéis descargar desde <a href="//elboletaire.github.io/racotecnic/uploads/2009/06/uploadify_helper.zip">aquí</a>. Cuando llegue el momento de explicar las vistas pondré los ejemplos utilizando el código convencional y el código del <em>helper</em>.</p>

<p>Siguiendo con el controlador “images_controller”, el <em>beforeFilter</em> se encarga de iniciar la sesión en caso de que ésta no exista, a partir de un ID que le pasaremos desde la vista como primer parámetro. Sin estas líneas en que se inicia la sesión de nuevo seguramente tendríais problemas al enviar el fichero; éste se enviaría pero al llegar al 100% os daría un IO error (en mac y linux) o bien os incrustará la ventana de login por ahí en medio (en windows). Una vez iniciada la sesión se llama al <em>beforeFilter</em> superior para realizar las tareas pertinentes.</p>

<p>Las tareas del método upload están descritas en los comentarios y no creo que haga falta entrar en más detalles. Para más detalles, como he dicho antes, dirigíos a la ayuda de Cake o del Image Upload Component.</p>

<p>En el método add() hacemos las tareas necesarias para guardar los datos.</p>
<blockquote>
<em>**Nota:** El envío de ficheros debéis hacerlo al mismo controlador. Si intentáis hacer un envío de ficheros desde el controlador "images" al controlador "files" (por ejemplo), NO FUNCIONARÁ. No sé porqué, así que si alguien encuentra el modo de hacerlo o sabe porqué pasa agradecería que me lo comentara por aquí.</em></blockquote>

<p>Ya tenemos el controlador con su componente, ahora nos quedan únicamente la vista, pero antes explicaré cómo funciona el helper que he creado para aquellos que quieran utilizarlo…</p>

<p>Primero decir que es la primera “versión” (si es que se le puede llamar así), así que veréis que hay algún fallo o cosa sin terminar. Con el tiempo quizás lo mejore, aunque por el momento me funciona perfectamente tal como está.</p>

<p>Una vez iniciado el <em>helper</em> en el controlador únicamente tenéis que llamar a la función “<em>startUploader</em>” de dicho <em>helper</em>. Como primer parámetro debéis pasar un array asociativo con el id de la capa del uploader como clave y el directorio destino como valor de la clave. Lamentablemente el directorio de destino no está implementado en este ejemplo, pero utilizando un poco la cabeza seguro que podréis descubrir cómo utilizarlo ;).</p>

<p>Como segundo parámetro se le pasa un array, también asociativo, con las opciones de uploadify (que podéis mirar desde <a href="http://www.uploadify.com/documentation/" target="_blank" title="Ver documentación de uploadify">aquí</a>). El tercer parámetro es por si ponéis varios uploadify en una misma página, para no volver a cargar los ficheros JavaScript y css; pasadle como parámetro “false” a partir del segundo uploader que añadáis.</p>

<p>Aquí tenéis el código que he utilizado para la vista:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="nt">&lt;h2&gt;</span><span class="cp">&lt;?php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Pujar imatges'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;?=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="s1">'Image'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'action'</span> <span class="o">=&gt;</span> <span class="s1">'add'</span><span class="p">))</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'imageFile'</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Necessites JavaScript i Flash per poder pujar fitxers'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'uploaded'</span> <span class="na">style=</span><span class="s">'display:none'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'files'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;?=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">submit</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">'Guardar'</span><span class="p">,</span><span class="kc">true</span><span class="p">));</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;?=</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">'Enviar'</span><span class="p">,</span><span class="kc">true</span><span class="p">),</span><span class="s1">'javascript:$(\'#imageFile\').fileUploadStart()'</span><span class="p">);</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">()</span> <span class="cp">?&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Como veis he creado un formulario que envía a la acción <em>add</em> del controlador. Dentro de este he creado una primera capa donde se cargará uploadify (con la id “imageFile”) seguida de una capa donde irán apareciendo las imágenes (en la capa “files” para ser más exactos) que se vayan subiendo. Esta capa está oculta (style=”display:none”) ya que no nos interesa que el usuario la vea hasta que hayamos recibido el primer fichero.</p>

<p>Ahora que ya tenemos el formulario insertemos el JavaScript para que todo funcione (en la misma vista). Primero os pongo la metodología para el Helper y después el equivalente en HTML / JavaScript:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><pre><span class="cp">&lt;?=</span>
<span class="nv">$uploadify</span><span class="o">-&gt;</span><span class="na">startUploader</span><span class="p">(</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">'imageFile'</span> <span class="o">=&gt;</span> <span class="s1">'img/'</span><span class="p">),</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">'imageFile'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'buttonText'</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Cercar fitxers'</span><span class="p">,</span><span class="kc">true</span><span class="p">),</span>
    <span class="s1">'script'</span> <span class="o">=&gt;</span> <span class="s1">'upload/'</span> <span class="o">.</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">(),</span>
    <span class="s1">'fileExt'</span> <span class="o">=&gt;</span> <span class="s1">'*.jpg;*.jpeg;*.png;*.gif'</span><span class="p">,</span>
    <span class="s1">'fileDesc'</span> <span class="o">=&gt;</span> <span class="s1">'Fitxers d\\\'imatge'</span><span class="p">,</span>
    <span class="s1">'multi'</span> <span class="o">=&gt;</span> <span class="s1">'true'</span><span class="p">,</span>
    <span class="s1">'onError'</span> <span class="o">=&gt;</span> <span class="s1">'function (a, b, c, d) {
      if (d.status == 404) {
        alert(\'Could not find upload script. Use a path relative to: '</span> <span class="o">.</span> <span class="nb">getcwd</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'\');
      } else if (d.type === "HTTP") {
        alert(\'error \' + d.type + \': \' + d.status);
      } else if (d.type === "File Size") {
        alert(c.name + \' \' + d.type + \' Limit: \' + Math.round(d.sizeLimit / 1024) + \'KB\');
      } else {
        alert(\'error \' + d.type + \': \' + d.text);
      }
    }'</span><span class="p">,</span>
    <span class="s1">'onComplete'</span> <span class="o">=&gt;</span> <span class="s1">'function(evt, queueID, fileObj, response, data) {
      $("#uploaded").show();
      $("#uploaded #files").append(\''</span> <span class="o">.</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">image</span><span class="p">(</span><span class="s2">"thumb/'+response+'"</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'&lt;input type="text" value="\'+response+\'" /&gt;&lt;input type="hidden" value="\'+response+\'" /&gt;\');
    }'</span><span class="p">,</span>
    <span class="s1">'onAllComplete'</span> <span class="o">=&gt;</span> <span class="s1">'function(){
      $("input[type=\\\'submit\\\']").removeAttr("disabled");
    }'</span>
  <span class="p">))</span>
<span class="p">);</span> <span class="cp">?&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Equivalente en JavaScript:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#imageFile'</span><span class="p">).</span><span class="nx">fileUpload</span> <span class="p">({</span>
    <span class="s1">'uploader'</span> <span class="p">:</span> <span class="s1">'/js/uploadify/uploader.swf'</span><span class="p">,</span>
    <span class="s1">'script'</span> <span class="p">:</span> <span class="s1">'upload/&lt;?= $session-&gt;id() ?&gt;'</span><span class="p">,</span>
    <span class="s1">'buttonText'</span> <span class="p">:</span> <span class="s1">'Cercar fitxers'</span><span class="p">,</span>
    <span class="s1">'onError'</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">404</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">'Could not find upload script. Use a path relative to: &lt;?= getcwd() ?&gt;'</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">'HTTP'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">'error '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">': '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">'File Size'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">' Limit: '</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">sizeLimit</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'KB'</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">'error '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">': '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s1">'onComplete'</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">,</span> <span class="nx">queueID</span><span class="p">,</span> <span class="nx">fileObj</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#uploaded'</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#uploaded #files'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;img src="/img/thumb/'</span> <span class="o">+</span> <span class="nx">response</span> <span class="o">+</span> <span class="s1">'" alt="" /&gt;&lt;input type="text" value="'</span> <span class="o">+</span> <span class="nx">response</span> <span class="o">+</span> <span class="s1">'" /&gt;&lt;input type="hidden" value="'</span> <span class="o">+</span> <span class="nx">response</span> <span class="o">+</span> <span class="s1">'" /&gt;'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s1">'onAllComplete'</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"input[type='submit']"</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">'disabled'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s1">'cancelImg'</span> <span class="p">:</span> <span class="s1">'/js/uploadify/cancel.png'</span><span class="p">,</span>
    <span class="s1">'fileExt'</span> <span class="p">:</span> <span class="s1">'*.jpg;*.jpeg;*.png;*.gif'</span><span class="p">,</span>
    <span class="s1">'fileDesc'</span> <span class="p">:</span> <span class="s1">'Fitxers d\'imatge'</span><span class="p">,</span>
    <span class="s1">'multi'</span> <span class="p">:</span> <span class="s1">'true'</span><span class="p">,</span>
    <span class="s1">'folder'</span><span class="p">:</span> <span class="s1">'img/'</span>
  <span class="p">});</span>
<span class="p">});</span>

</pre></td></tr></tbody></table>
</div>
</div>

<p>Sobre todo fijaros en que le paso como segundo parámetro a la url “upload” la id de la sesión actual. Esto junto con el beforeFilter del controlador puede ser vital para que os funcione correctamente uploadify con Cake.</p>

<p>He declarado tres funciones a ejecutar con uploadify: <em>onError</em>, <em>onComplete</em> y <em>onAllComplete</em>. La primera es por si sucede algún error con la carga del fichero, es simplemente para depuración pero nunca está de más tenerlo. Una vez os funcione correctamente la subida de ficheros podéis eliminarlo sin miedo alguno.</p>

<p>La función <em>onComplete</em> se encarga de hacer visible la capa “uploaded” y de ir insertando en ella las miniaturas de las imágenes que se vayan subiendo (ubicadas en la carpeta /webroot/img/thumb/). A demás de insertar las imágenes genera un textbox con el nombre del fichero, para que el usuario pueda poner el nombre deseado y un campo oculto con el nombre del fichero (para poder guardar su ruta en la base de datos).</p>

<p>Finalmente la función <em>onAllComplete</em> se encarga de eliminar el atributo “disabled” del botón de envío del formulario.
<a name="ampliacio"></a>
Aquí tenéis la vista al completo con el helper:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><pre><span class="cp">&lt;?=</span> <span class="nv">$uploadify</span><span class="o">-&gt;</span><span class="na">startUploader</span><span class="p">(</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">'imageFile'</span> <span class="o">=&gt;</span> <span class="s1">'img/'</span><span class="p">),</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">'imageFile'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'buttonText'</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Cercar fitxers'</span><span class="p">,</span><span class="kc">true</span><span class="p">),</span>
    <span class="s1">'script'</span> <span class="o">=&gt;</span> <span class="s1">'upload/'</span> <span class="o">.</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">(),</span>
    <span class="s1">'fileExt'</span> <span class="o">=&gt;</span> <span class="s1">'*.jpg;*.jpeg;*.png;*.gif'</span><span class="p">,</span>
    <span class="s1">'fileDesc'</span> <span class="o">=&gt;</span> <span class="s1">'Fitxers d\\\'imatge'</span><span class="p">,</span>
    <span class="s1">'multi'</span> <span class="o">=&gt;</span> <span class="s1">'true'</span><span class="p">,</span>
    <span class="s1">'onError'</span> <span class="o">=&gt;</span> <span class="s1">'function (a, b, c, d) {
      if (d.status == 404) {
        alert(\'Could not find upload script. Use a path relative to: '</span> <span class="o">.</span> <span class="nb">getcwd</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'\');
      } else if (d.type === "HTTP") {
        alert(\'error \' + d.type + \': \' + d.status);
      } else if (d.type === "File Size") {
        alert(c.name + \' \' + d.type + \' Limit: \' + Math.round(d.sizeLimit / 1024) + \'KB\');
      } else alert(\'error \' + d.type + \': \' + d.text);
    }'</span><span class="p">,</span>
    <span class="s1">'onComplete'</span> <span class="o">=&gt;</span> <span class="s1">'function(evt, queueID, fileObj, response, data){
      $("#uploaded").show();
      $("#uploaded #files").append(\''</span> <span class="o">.</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">image</span><span class="p">(</span><span class="s2">"thumb/' + response + '"</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'&lt;input type="text" value="\' + response + \'" /&gt;&lt;input type="hidden" value="\' + response + \'" /&gt;\');
    }'</span><span class="p">,</span>
    <span class="s1">'onAllComplete'</span> <span class="o">=&gt;</span> <span class="s1">'function(){
      $("input[type=\\\'submit\\\']").removeAttr("disabled");
    }'</span>
  <span class="p">))</span>
<span class="p">);</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;h2&gt;</span><span class="cp">&lt;?php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Pujar imatges'</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;?=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="s1">'Image'</span><span class="p">,</span><span class="k">array</span><span class="p">(</span><span class="s1">'action'</span> <span class="o">=&gt;</span> <span class="s1">'add'</span><span class="p">))</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"imageFile"</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="nx">__</span><span class="p">(</span><span class="s2">"Necessites JavaScript i Flash per poder pujar fitxers"</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"uploaded"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"files"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;?=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">submit</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s2">"Guardar"</span><span class="p">,</span><span class="kc">true</span><span class="p">));</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;?=</span> <span class="nv">$html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s2">"Enviar"</span><span class="p">,</span><span class="kc">true</span><span class="p">),</span><span class="s1">'javascript:$("#imageFile").fileUploadStart()'</span><span class="p">);</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">()</span> <span class="cp">?&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Y con Javascript:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></td><td class="code"><pre><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s1">'text/javascript'</span><span class="o">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#imageFile'</span><span class="p">).</span><span class="nx">fileUpload</span> <span class="p">({</span>
    <span class="s1">'uploader'</span> <span class="p">:</span> <span class="s1">'/js/uploadify/uploader.swf'</span><span class="p">,</span>
    <span class="s1">'script'</span> <span class="p">:</span> <span class="s1">'upload/&lt;?= $session-&gt;id() ?&gt;'</span><span class="p">,</span>
    <span class="s1">'buttonText'</span> <span class="p">:</span> <span class="s1">'Cercar fitxers'</span><span class="p">,</span>
    <span class="s1">'onError'</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">404</span><span class="p">)</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s1">'Could not find upload script. Use a path relative to: &lt;?= getcwd() ?&gt;'</span><span class="p">);</span>
         <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">'HTTP'</span><span class="p">)</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s1">'error '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">': '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
         <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span><span class="s1">'File Size'</span><span class="p">)</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">' Limit: '</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">sizeLimit</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'KB'</span><span class="p">);</span>
         <span class="k">else</span> <span class="nx">alert</span><span class="p">(</span><span class="s1">'error '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">': '</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">text</span><span class="p">);},</span>
    <span class="s1">'onComplete'</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">,</span> <span class="nx">queueID</span><span class="p">,</span> <span class="nx">fileObj</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#uploaded'</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#uploaded #files'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;img src="/img/thumb/'</span> <span class="o">+</span> <span class="nx">response</span> <span class="o">+</span> <span class="s1">'" alt="" /&gt;&lt;input type="text" value="'</span> <span class="o">+</span> <span class="nx">response</span> <span class="o">+</span> <span class="s1">'" /&gt;&lt;input type="hidden" value="'</span> <span class="o">+</span> <span class="nx">response</span> <span class="o">+</span> <span class="s1">'" /&gt;'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s1">'onAllComplete'</span> <span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'input[type=\'submit\']'</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">'disabled'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s1">'cancelImg'</span> <span class="p">:</span> <span class="s1">'/js/uploadify/cancel.png'</span><span class="p">,</span>
    <span class="s1">'fileExt'</span> <span class="p">:</span> <span class="s1">'*.jpg;*.jpeg;*.png;*.gif'</span><span class="p">,</span>
    <span class="s1">'fileDesc'</span> <span class="p">:</span> <span class="s1">'Fitxers d\'imatge'</span><span class="p">,</span>
    <span class="s1">'multi'</span> <span class="p">:</span> <span class="s1">'true'</span><span class="p">,</span>
    <span class="s1">'folder'</span><span class="p">:</span> <span class="s1">'img/'</span>
  <span class="p">});</span>
<span class="p">});</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;&lt;</span><span class="p">?</span><span class="nx">php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Pujar imatges'</span><span class="p">)</span> <span class="p">?</span><span class="o">&gt;&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="p">?</span><span class="o">=</span> <span class="nx">$form</span><span class="o">-&gt;</span><span class="nx">create</span><span class="p">(</span><span class="s1">'Image'</span><span class="p">,</span> <span class="nx">array</span><span class="p">(</span><span class="s1">'action'</span> <span class="o">=&gt;</span> <span class="s1">'add'</span><span class="p">))</span> <span class="p">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'imageFile'</span><span class="o">&gt;&lt;</span><span class="p">?</span><span class="nx">php</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Necessites JavaScript i Flash per poder pujar fitxers'</span><span class="p">)</span> <span class="p">?</span><span class="o">&gt;&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'uploaded'</span> <span class="nx">style</span><span class="o">=</span><span class="s1">'display:none'</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'files'</span><span class="o">&gt;</span>

  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="p">?</span><span class="o">=</span> <span class="nx">$form</span><span class="o">-&gt;</span><span class="nx">submit</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">'Guardar'</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span> <span class="p">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="p">?</span><span class="o">=</span> <span class="nx">$html</span><span class="o">-&gt;</span><span class="nx">link</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">'Enviar'</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span><span class="s1">'javascript:$('</span><span class="err">#</span><span class="nx">imageFile</span><span class="s1">').fileUploadStart()'</span><span class="p">);</span> <span class="p">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="p">?</span><span class="o">=</span><span class="nx">$form</span><span class="o">-&gt;</span><span class="nx">end</span><span class="p">()</span> <span class="p">?</span><span class="o">&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Vale, recordemos un poco todo lo que hemos hecho para ver que no nos hemos dejado nada:</p>

<ul>
  <li>Hemos descargado jQuery y Uploadify</li>
  <li>Hemos guardado los ficheros que nos interesaban de ambas librerías en nuestro proyecto</li>
  <li>Hemos creado el controlador (/app/controllers/images_controller.php)”</li>
  <li>Hemos creado la vista (/app/view/images/add.ctp)</li>
  <li>Algo que no he dicho (pero que es bastante lógico..) es haber creado una carpeta donde se guardarán los ficheros, con permisos de escritura (755, 777… en sistemas UNIX/Linux)</li>
  <li>Tampoco he dicho que hay que crear un modelo (/app/models/image.php), pero si tenéis conocimientos de Cake seguro que ya lo sabíais ;)</li>
</ul>

<p>Para terminar os explicaré cómo funcionará el proceso de envío. Aquí tendría que hacer un diagrama de estados o algo así pero la verdad es que no apetece nada… :p</p>

<ul>
  <li>El usuario accederá a la página “images/add” y se le mostrará un botón con el que subir imágenes.</li>
  <li>Una vez seleccionado(s) el/los fichero(s) a subir, el usuario le da a “enviar” y se inicia la transferencia del éste.</li>
  <li>Una vez ha terminado el fichero y ha llegado correctamente al servidor, este/estos se procesan y en caso de éxito se devuelve el/los nombre(s) de fichero(s) resultante(s) al usuario. A partir de este/estos nombre(s) de fichero(s) nos encargaremos de que vea una(s) miniatura(s) de la(s) imagen(es) subida(s) (qué pesadito con el plural, eh?).</li>
  <li>A demás de las miniaturas le mostraremos un textbox al lado de cada una para que pueda poner el nombre si quiere.</li>
  <li>Cuando haya editado todos los nombres le dará al botón “guardar” que aparecerá a partir del primer fichero subido pero que no estará activo hasta que todos los ficheros hayan subido al servidor.</li>
  <li>Aquí hay una cosa que yo no hago en el ejemplo porque no me quiero complicar pero que creo conveniente que hagáis si no queréis llenar vuestro servidor de ficheros sin uso. Sería necesario guardar las rutas de ficheros una vez subidos por si el usuario no le diera a “guardar”. De éste modo podríais hacer un método con el que eliminar ficheros inutilizados fácilmente.</li>
</ul>

<p>Pues ahí lo tenéis. Creo que me ha salido una guía algo pobre :( es lo que tiene hacerla con algo de prisa… Cuando tenga algo más de tiempo intentaré colgar un ejemplo sobre esto.</p>

<blockquote style="text-align:center">
  <em><b>Si has terminado este tutorial satisfactoriamente mírate este otro: <a href="/2009/10/subida-de-ficheros-con-uploadify-y-validacion-ajax-en-cakephp">Subida de ficheros con Uploadify y validación Ajax en CakePHP</a></b></em>
</blockquote>

<p>Espero que no tengáis muchas dudas. De todos modos sabéis que estoy abierto a preguntas a través de los comentarios si os surge cualquier duda!</p>

<blockquote>
  Páginas de referencia:
  <ul>
    <li><a title="Documentación de uploadify" href="http://www.uploadify.com/documentation/" target="_blank">Uploadify documentation</a></li>
    <li><a title="Ver documentación de jQuery" href="http://docs.jquery.com/Main_Page" target="_blank">jQuery</a></li>
    <li><a title="Página del proyecto CakePHP" href="http://www.cakephp.org" target="_blank">CakePHP</a> | <a title="Documentación de CakePHP" href="http://book.cakephp.org/">Book</a> | <a title="API de CakePHP" href="http://api.cakephp.org/" target="_blank">API</a></li>
    <li><a title="Página del proyecto SWFUpload" href="http://swfupload.org" target="_blank">SWFUpload</a> | <a title="Documentación de SWFupload" href="http://swfupload.org/documentation" target="_blank">API</a> | <a title="Foros de swfupload" href="http://swfupload.org/forum" target="_blank">Foros</a></li>
    <li><a title="Buscar en Google" href="http://www.google.cat" target="_blank">Google</a> (cómo no..)</li>
  </ul>
</blockquote>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2009-06-03T14:07:27+02:00">
          <a href="//elboletaire.github.io/racotecnic/2009/06/illimitux-i-freerapid-downloader-fem-les-descarregues-mes-comodes/">June 03, 2009</a>
        </time>
      </span>
      <span class="author vcard"><span class="fn">
        
          
            gerno
          
        
      </span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="//elboletaire.github.io/racotecnic/2009/06/illimitux-i-freerapid-downloader-fem-les-descarregues-mes-comodes/" rel="bookmark" title="Illimitux i FreeRapid Downloader, fem les descàrregues més còmodes" itemprop="url">Illimitux i FreeRapid Downloader, fem les descàrregues més còmodes</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Com tots sabreu, constantment van apareixent i desapareixen maneres de burlar les restriccions de pàgines de videos i descàrregues. Avui vinc a presentar <strong>Illimitux</strong>, un <span style="text-decoration: underline;">complement per a firefox</span> que ens ajudarà a saltar algunes restriccions de Megavideo, Megaupload, Veoh i Rapidshare; així com <strong>FreeRapid Downloader</strong> que ens farà més còmodes les descàrregues.</p>

<p>Ara anem a parlar de <strong>Illimitux</strong>. Abans de començar, cal avisar que és un complement en fase de proves i que no és del tot estable, intentarem aclarir en aquest post com configurar-lo perquè ens funcioni el més bé possible. Les indicacions són per a la versió actual (2.0.2) esperem que en un futur pròxim en millorin l’estabilitat.</p>

<p>Per instal·lar-lo accedim a la <a href="https://addons.mozilla.org/ca/firefox/addon/11037">pàgina de descàrrega</a>, seleccionem conforme som conscients que és experimental i l’afegim al nostre Firefox. Una vegada s’hagi descarregat, haurem de reiniciar el programa.</p>

<p><a rel="lightbox[568]" href="http://img190.imageshack.us/img190/5144/13086518.jpg" target="_blank"><img class="aligncenter" src="http://img190.imageshack.us/img190/5144/13086518.jpg" border="0" alt="" width="400" height="260" /></a></p>

<p><a id="more"></a><a id="more-595"></a></p>

<p>Una vegada instal·lat ja podeu accedir a les diferents pàgines de descàrrega o streaming i saltar-vos les limitacions. A continuació explico quines limitacions elimina:</p>

<p><span style="text-decoration: underline;">Megavideo</span>: <em>Per a megavideo redirecciona les pàgines a illimitux.net i les pots visualitzar sense problemes i descarregar l’arxiu original. Permet la visualització amb el reproductor de illimitux o amb el de Megavideo.
</em></p>

<p><span style="text-decoration: underline;">Veoh</span>: <em>Anula la restricció de temps de la web i permet visualitzar les pel·lícules sense el programa Veoh TV. No permet, però. avançar fins al punt desitjat. La visualització és del tirón i només pots pausar/reanudar.</em></p>

<p><span style="text-decoration: underline;">Megaupload</span>: <em>Permet les descàrregues sense limitació de temps i sense límit de descàrregues. Per funcionar correctament no pots tenir activada la opció de “unbridle videos automatically” ja que no funcionarà correctament.
</em></p>

<p><span style="text-decoration: underline;">Rapidshare</span>:<em> Enllaça directament les pàgines i no has de fer la combinació de click’s, però realment no evita cap limitació.</em></p>

<p>Amb tot això us apareixerà a la part inferior de la pàgina una finestra similar a la següent:</p>

<p><a rel="lightbox[568]" href="http://img242.imageshack.us/img242/5120/dibujobeq.jpg" target="_blank"><img class="aligncenter" style="border: 0pt none;" src="http://img242.imageshack.us/img242/5120/dibujobeq.jpg" border="0" alt="" width="286" height="133" /></a></p>

<p>Tan sols heu de clicar a “Remove limitation” i us rediccionarà a una pàgina on gaudireu dels avantatges ja citats.</p>

<p>Ara li toca el torn a <strong>FreeRapid Downloader</strong>, un software lliure disponible per a <span style="text-decoration: underline;">Windows, Mac i Linux</span>. Programa, que és disponible en castellà i al que se li poden afegir pluggins.</p>

<p>Aquesta aplicació tampoc elimina cap limitació real, però ens permet fer una llista de url’s que ens descarregarà de forma automàtica (respectant les limitacions de temps de cada pàgina). Per a descarregar accedim a la pàgina <a href="http://wordrider.net/freerapid/download.html">oficial de descàrrega</a> i cliquem (usuaris de windows) a l’icona del disc dur amb la fletxeta.</p>

<p>Descarreguem el fitxer i el descomprimim. Per executar-lo solament hem de obrir el fitxer frd.exe</p>

<p>Com veureu, bo i que pot ser un programa molt complert també és molt intuïtiu.</p>

<p>Cliquem a “añadir url” i obrira una finestra com la següent; només hem de seleccionar la carpeta on descarregarà els fitxers, enganxar la llista de enllaços i clicar a “empezar”</p>

<p><a rel="lightbox[568]" href="http://img26.imageshack.us/img26/5684/frdd.jpg" target="_blank"><img class="aligncenter" src="http://img26.imageshack.us/img26/5684/frdd.jpg" border="0" alt="" width="400" height="260" /></a></p>

<p>I la cosa quedarà finalment així:</p>

<p><a rel="lightbox[568]" href="http://img522.imageshack.us/img522/5788/frd2.jpg" target="_blank"><img class="aligncenter" style="border: 0pt none;" src="http://img522.imageshack.us/img522/5788/frd2.jpg" border="0" alt="" width="400" height="110" /></a></p>

<p>A <a href="http://wordrider.net/freerapid/index.html">aquest enllaç</a> teniu la llista de servidor compatibles amb el servei.</p>

<p>Espero que tot aixó us sigui de utilitat ;) fins haviat!</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="//elboletaire.github.io/racotecnic/page/15/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="//elboletaire.github.io/racotecnic">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/14/">14</a></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/15/">15</a></li>
      
    
      
        <li><strong class="current-page">16</strong></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/17/">17</a></li>
      
    
      
        
        
        
        <li><a href="//elboletaire.github.io/racotecnic/page/18/">18</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="//elboletaire.github.io/racotecnic/page/23/">23</a></li>
    

    
    
      <li><a href="//elboletaire.github.io/racotecnic/page/17/" class="btn">Next</a></li>
    
  </ul>
</div>



</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Racó Tècnic. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="//elboletaire.github.io/racotecnic/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="//elboletaire.github.io/racotecnic/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106861877-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>




</body>
</html>
